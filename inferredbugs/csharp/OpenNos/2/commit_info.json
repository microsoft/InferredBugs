{
    "hash": "3409333377af10762f76b9440a480d282875717c",
    "message": "cleanup jps and handlers",
    "file_num_lines": 948,
    "diff_parsed": {
        "added": [
            [
                54,
                "                    m_heuristic = Heuristic.Manhattan;"
            ],
            [
                58,
                "                    m_heuristic = Heuristic.Euclidean;"
            ],
            [
                62,
                "                    m_heuristic = Heuristic.Chebyshev;"
            ],
            [
                66,
                "                    m_heuristic = Heuristic.Euclidean;"
            ],
            [
                78,
                "            {"
            ],
            [
                80,
                "            }"
            ],
            [
                82,
                "            {"
            ],
            [
                84,
                "            }"
            ],
            [
                93,
                "                    m_heuristic = Heuristic.Manhattan;"
            ],
            [
                97,
                "                    m_heuristic = Heuristic.Euclidean;"
            ],
            [
                101,
                "                    m_heuristic = Heuristic.Chebyshev;"
            ],
            [
                105,
                "                    m_heuristic = Heuristic.Euclidean;"
            ],
            [
                141,
                "                    m_heuristic = Heuristic.Manhattan;"
            ],
            [
                145,
                "                    m_heuristic = Heuristic.Euclidean;"
            ],
            [
                149,
                "                    m_heuristic = Heuristic.Chebyshev;"
            ],
            [
                153,
                "                    m_heuristic = Heuristic.Euclidean;"
            ],
            [
                165,
                "            {"
            ],
            [
                167,
                "            }"
            ],
            [
                172,
                "            {"
            ],
            [
                174,
                "            }"
            ],
            [
                176,
                "            {"
            ],
            [
                178,
                "            }"
            ],
            [
                345,
                "                Node tNode = tOpenList.Last();"
            ],
            [
                379,
                "                IEnumerable<GridPos> tNeighbors = findNeighbors(iParam, iNode);"
            ],
            [
                380,
                "                foreach (GridPos gridPos in tNeighbors)"
            ],
            [
                382,
                "                    GridPos tNeighbor = gridPos;"
            ],
            [
                383,
                "                    GridPos tJumpPoint = iParam.UseRecursive ? jump(iParam, tNeighbor.x, tNeighbor.y, iNode.x, iNode.y) : jumpLoop(iParam, tNeighbor.x, tNeighbor.y, iNode.x, iNode.y);"
            ],
            [
                386,
                "                        Node tJumpNode = iParam.SearchGrid.GetNodeAt(tJumpPoint.x, tJumpPoint.y);"
            ],
            [
                390,
                "                            {"
            ],
            [
                392,
                "                            }"
            ],
            [
                394,
                "                        if (tJumpNode != null && tJumpNode.isClosed)"
            ],
            [
                402,
                "                        if (tJumpNode != null && (!tJumpNode.isOpened || tStartToJumpNodeLen < tJumpNode.startToCurNodeLen))"
            ],
            [
                405,
                "                            tJumpNode.heuristicCurNodeToEndLen = tJumpNode.heuristicCurNodeToEndLen ?? tHeuristic(Math.Abs(tJumpPoint.x - tEndX), Math.Abs(tJumpPoint.y - tEndY));"
            ],
            [
                451,
                "            JumpSnapshot currentSnapshot = new JumpSnapshot"
            ],
            [
                452,
                "            {"
            ],
            [
                453,
                "                iX = iX,"
            ],
            [
                454,
                "                iY = iY,"
            ],
            [
                455,
                "                iPx = iPx,"
            ],
            [
                456,
                "                iPy = iPy,"
            ],
            [
                457,
                "                stage = 0"
            ],
            [
                458,
                "            };"
            ],
            [
                464,
                "                JumpSnapshot newSnapshot;"
            ],
            [
                473,
                "                        if (iParam.SearchGrid.GetNodeAt(currentSnapshot.iX, currentSnapshot.iY).Equals(iParam.EndNode))"
            ],
            [
                525,
                "                                newSnapshot = new JumpSnapshot"
            ],
            [
                526,
                "                                {"
            ],
            [
                527,
                "                                    iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                528,
                "                                    iY = currentSnapshot.iY,"
            ],
            [
                529,
                "                                    iPx = currentSnapshot.iX,"
            ],
            [
                530,
                "                                    iPy = currentSnapshot.iY,"
            ],
            [
                531,
                "                                    stage = 0"
            ],
            [
                532,
                "                                };"
            ],
            [
                544,
                "                                newSnapshot = new JumpSnapshot"
            ],
            [
                545,
                "                                {"
            ],
            [
                546,
                "                                    iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                547,
                "                                    iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                548,
                "                                    iPx = currentSnapshot.iX,"
            ],
            [
                549,
                "                                    iPy = currentSnapshot.iY,"
            ],
            [
                550,
                "                                    stage = 0"
            ],
            [
                551,
                "                                };"
            ],
            [
                557,
                "                                newSnapshot = new JumpSnapshot"
            ],
            [
                558,
                "                                {"
            ],
            [
                559,
                "                                    iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                560,
                "                                    iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                561,
                "                                    iPx = currentSnapshot.iX,"
            ],
            [
                562,
                "                                    iPy = currentSnapshot.iY,"
            ],
            [
                563,
                "                                    stage = 0"
            ],
            [
                564,
                "                                };"
            ],
            [
                612,
                "                                newSnapshot = new JumpSnapshot"
            ],
            [
                613,
                "                                {"
            ],
            [
                614,
                "                                    iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                615,
                "                                    iY = currentSnapshot.iY,"
            ],
            [
                616,
                "                                    iPx = currentSnapshot.iX,"
            ],
            [
                617,
                "                                    iPy = currentSnapshot.iY,"
            ],
            [
                618,
                "                                    stage = 0"
            ],
            [
                619,
                "                                };"
            ],
            [
                628,
                "                                newSnapshot = new JumpSnapshot"
            ],
            [
                629,
                "                                {"
            ],
            [
                630,
                "                                    iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                631,
                "                                    iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                632,
                "                                    iPx = currentSnapshot.iX,"
            ],
            [
                633,
                "                                    iPy = currentSnapshot.iY,"
            ],
            [
                634,
                "                                    stage = 0"
            ],
            [
                635,
                "                                };"
            ],
            [
                649,
                "                        newSnapshot = new JumpSnapshot"
            ],
            [
                650,
                "                        {"
            ],
            [
                651,
                "                            iX = currentSnapshot.iX,"
            ],
            [
                652,
                "                            iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                653,
                "                            iPx = currentSnapshot.iX,"
            ],
            [
                654,
                "                            iPy = currentSnapshot.iY,"
            ],
            [
                655,
                "                            stage = 0"
            ],
            [
                656,
                "                        };"
            ],
            [
                672,
                "                            newSnapshot = new JumpSnapshot"
            ],
            [
                673,
                "                            {"
            ],
            [
                674,
                "                                iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                675,
                "                                iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                676,
                "                                iPx = currentSnapshot.iX,"
            ],
            [
                677,
                "                                iPy = currentSnapshot.iY,"
            ],
            [
                678,
                "                                stage = 0"
            ],
            [
                679,
                "                            };"
            ],
            [
                683,
                "                        if (iParam.CrossAdjacentPoint)"
            ],
            [
                685,
                "                            newSnapshot = new JumpSnapshot"
            ],
            [
                686,
                "                            {"
            ],
            [
                687,
                "                                iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                688,
                "                                iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                689,
                "                                iPx = currentSnapshot.iX,"
            ],
            [
                690,
                "                                iPy = currentSnapshot.iY,"
            ],
            [
                691,
                "                                stage = 0"
            ],
            [
                692,
                "                            };"
            ],
            [
                705,
                "                        newSnapshot = new JumpSnapshot"
            ],
            [
                706,
                "                        {"
            ],
            [
                707,
                "                            iX = currentSnapshot.iX,"
            ],
            [
                708,
                "                            iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                709,
                "                            iPx = currentSnapshot.iX,"
            ],
            [
                710,
                "                            iPy = currentSnapshot.iY,"
            ],
            [
                711,
                "                            stage = 0"
            ],
            [
                712,
                "                        };"
            ],
            [
                728,
                "                            newSnapshot = new JumpSnapshot"
            ],
            [
                729,
                "                            {"
            ],
            [
                730,
                "                                iX = currentSnapshot.iX + currentSnapshot.tDx,"
            ],
            [
                731,
                "                                iY = currentSnapshot.iY + currentSnapshot.tDy,"
            ],
            [
                732,
                "                                iPx = currentSnapshot.iX,"
            ],
            [
                733,
                "                                iPy = currentSnapshot.iY,"
            ],
            [
                734,
                "                                stage = 0"
            ],
            [
                735,
                "                            };"
            ],
            [
                749,
                "            while (true)"
            ],
            [
                751,
                "                if (!iParam.SearchGrid.IsWalkableAt(iX, iY))"
            ],
            [
                753,
                "                    return null;"
            ],
            [
                755,
                "                if (iParam.SearchGrid.GetNodeAt(iX, iY).Equals(iParam.EndNode))"
            ],
            [
                757,
                "                    return new GridPos(iX, iY);"
            ],
            [
                758,
                "                }"
            ],
            [
                759,
                ""
            ],
            [
                760,
                "                int tDx = iX - iPx;"
            ],
            [
                761,
                "                int tDy = iY - iPy;"
            ],
            [
                762,
                "                GridPos jx;"
            ],
            [
                763,
                "                GridPos jy;"
            ],
            [
                764,
                "                if (iParam.CrossCorner)"
            ],
            [
                765,
                "                {"
            ],
            [
                766,
                "                    // check for forced neighbors"
            ],
            [
                767,
                "                    // along the diagonal"
            ],
            [
                768,
                "                    if (tDx != 0 && tDy != 0)"
            ],
            [
                770,
                "                        if ((iParam.SearchGrid.IsWalkableAt(iX - tDx, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX - tDx, iY)) || (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY - tDy) && !iParam.SearchGrid.IsWalkableAt(iX, iY - tDy)))"
            ],
            [
                775,
                "                    // horizontally/vertically"
            ],
            [
                778,
                "                        if (tDx != 0)"
            ],
            [
                780,
                "                            // moving along x"
            ],
            [
                781,
                "                            if ((iParam.SearchGrid.IsWalkableAt(iX + tDx, iY + 1) && !iParam.SearchGrid.IsWalkableAt(iX, iY + 1)) || (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY - 1) && !iParam.SearchGrid.IsWalkableAt(iX, iY - 1)))"
            ],
            [
                782,
                "                            {"
            ],
            [
                783,
                "                                return new GridPos(iX, iY);"
            ],
            [
                784,
                "                            }"
            ],
            [
                785,
                "                        }"
            ],
            [
                786,
                "                        else"
            ],
            [
                787,
                "                        {"
            ],
            [
                788,
                "                            if ((iParam.SearchGrid.IsWalkableAt(iX + 1, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX + 1, iY)) || (iParam.SearchGrid.IsWalkableAt(iX - 1, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX - 1, iY)))"
            ],
            [
                789,
                "                            {"
            ],
            [
                790,
                "                                return new GridPos(iX, iY);"
            ],
            [
                791,
                "                            }"
            ],
            [
                794,
                "                    // when moving diagonally, must check for vertical/horizontal jump points"
            ],
            [
                795,
                "                    if (tDx != 0 && tDy != 0)"
            ],
            [
                797,
                "                        jx = jump(iParam, iX + tDx, iY, iX, iY);"
            ],
            [
                798,
                "                        jy = jump(iParam, iX, iY + tDy, iX, iY);"
            ],
            [
                799,
                "                        if (jx != null || jy != null)"
            ],
            [
                800,
                "                        {"
            ],
            [
                801,
                "                            return new GridPos(iX, iY);"
            ],
            [
                802,
                "                        }"
            ],
            [
                805,
                "                    // moving diagonally, must make sure one of the vertical/horizontal"
            ],
            [
                806,
                "                    // neighbors is open to allow the path"
            ],
            [
                807,
                "                    if (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY) || iParam.SearchGrid.IsWalkableAt(iX, iY + tDy))"
            ],
            [
                808,
                "                    {"
            ],
            [
                809,
                "                        var iX1 = iX;"
            ],
            [
                810,
                "                        var iY1 = iY;"
            ],
            [
                811,
                "                        iX = iX + tDx;"
            ],
            [
                812,
                "                        iY = iY + tDy;"
            ],
            [
                813,
                "                        iPx = iX1;"
            ],
            [
                814,
                "                        iPy = iY1;"
            ],
            [
                815,
                "                    }"
            ],
            [
                816,
                "                    else if (iParam.CrossAdjacentPoint)"
            ],
            [
                817,
                "                    {"
            ],
            [
                818,
                "                        var iX1 = iX;"
            ],
            [
                819,
                "                        var iY1 = iY;"
            ],
            [
                820,
                "                        iX = iX + tDx;"
            ],
            [
                821,
                "                        iY = iY + tDy;"
            ],
            [
                822,
                "                        iPx = iX1;"
            ],
            [
                823,
                "                        iPy = iY1;"
            ],
            [
                824,
                "                    }"
            ],
            [
                825,
                "                    else"
            ],
            [
                827,
                "                        return null;"
            ],
            [
                830,
                "                else //if (!iParam.CrossCorner)"
            ],
            [
                832,
                "                    // check for forced neighbors"
            ],
            [
                833,
                "                    // along the diagonal"
            ],
            [
                834,
                "                    if (tDx != 0 && tDy != 0)"
            ],
            [
                836,
                "                        if ((iParam.SearchGrid.IsWalkableAt(iX + tDx, iY + tDy) && iParam.SearchGrid.IsWalkableAt(iX, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX + tDx, iY)) || (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY + tDy) && iParam.SearchGrid.IsWalkableAt(iX + tDx, iY) && !iParam.SearchGrid.IsWalkableAt(iX, iY + tDy)))"
            ],
            [
                841,
                "                    // horizontally/vertically"
            ],
            [
                844,
                "                        if (tDx != 0)"
            ],
            [
                846,
                "                            // moving along x"
            ],
            [
                847,
                "                            if ((iParam.SearchGrid.IsWalkableAt(iX, iY + 1) && !iParam.SearchGrid.IsWalkableAt(iX - tDx, iY + 1)) || (iParam.SearchGrid.IsWalkableAt(iX, iY - 1) && !iParam.SearchGrid.IsWalkableAt(iX - tDx, iY - 1)))"
            ],
            [
                848,
                "                            {"
            ],
            [
                849,
                "                                return new GridPos(iX, iY);"
            ],
            [
                850,
                "                            }"
            ],
            [
                851,
                "                        }"
            ],
            [
                852,
                "                        else"
            ],
            [
                853,
                "                        {"
            ],
            [
                854,
                "                            if ((iParam.SearchGrid.IsWalkableAt(iX + 1, iY) && !iParam.SearchGrid.IsWalkableAt(iX + 1, iY - tDy)) || (iParam.SearchGrid.IsWalkableAt(iX - 1, iY) && !iParam.SearchGrid.IsWalkableAt(iX - 1, iY - tDy)))"
            ],
            [
                855,
                "                            {"
            ],
            [
                856,
                "                                return new GridPos(iX, iY);"
            ],
            [
                857,
                "                            }"
            ],
            [
                861,
                "                    // when moving diagonally, must check for vertical/horizontal jump points"
            ],
            [
                862,
                "                    if (tDx != 0 && tDy != 0)"
            ],
            [
                864,
                "                        jx = jump(iParam, iX + tDx, iY, iX, iY);"
            ],
            [
                865,
                "                        jy = jump(iParam, iX, iY + tDy, iX, iY);"
            ],
            [
                866,
                "                        if (jx != null || jy != null)"
            ],
            [
                867,
                "                        {"
            ],
            [
                868,
                "                            return new GridPos(iX, iY);"
            ],
            [
                869,
                "                        }"
            ],
            [
                872,
                "                    // moving diagonally, must make sure both of the vertical/horizontal"
            ],
            [
                873,
                "                    // neighbors is open to allow the path"
            ],
            [
                874,
                "                    if (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY) && iParam.SearchGrid.IsWalkableAt(iX, iY + tDy))"
            ],
            [
                875,
                "                    {"
            ],
            [
                876,
                "                        var iX1 = iX;"
            ],
            [
                877,
                "                        var iY1 = iY;"
            ],
            [
                878,
                "                        iX = iX + tDx;"
            ],
            [
                879,
                "                        iY = iY + tDy;"
            ],
            [
                880,
                "                        iPx = iX1;"
            ],
            [
                881,
                "                        iPy = iY1;"
            ],
            [
                882,
                "                        continue;"
            ],
            [
                883,
                "                    }"
            ],
            [
                889,
                "        private static IEnumerable<GridPos> findNeighbors(JumpPointParam iParam, Node iNode)"
            ],
            [
                899,
                "                int tPx = tParent.x;"
            ],
            [
                900,
                "                int tPy = tParent.y;"
            ],
            [
                901,
                ""
            ],
            [
                903,
                "                int tDx = (tX - tPx) / Math.Max(Math.Abs(tX - tPx), 1);"
            ],
            [
                904,
                "                int tDy = (tY - tPy) / Math.Max(Math.Abs(tY - tPy), 1);"
            ],
            [
                1031,
                "                            if (iParam.SearchGrid.IsWalkableAt(tX, tY + tDy) &&"
            ],
            [
                1032,
                "                                iParam.SearchGrid.IsWalkableAt(tX + tDx, tY))"
            ],
            [
                1033,
                "                            {"
            ],
            [
                1035,
                "                            }"
            ],
            [
                1040,
                "                            if (iParam.SearchGrid.IsWalkableAt(tX, tY + tDy) &&"
            ],
            [
                1041,
                "                                iParam.SearchGrid.IsWalkableAt(tX - tDx, tY))"
            ],
            [
                1042,
                "                            {"
            ],
            [
                1044,
                "                            }"
            ],
            [
                1049,
                "                            if (iParam.SearchGrid.IsWalkableAt(tX, tY - tDy) &&"
            ],
            [
                1050,
                "                                iParam.SearchGrid.IsWalkableAt(tX + tDx, tY))"
            ],
            [
                1051,
                "                            {"
            ],
            [
                1053,
                "                            }"
            ],
            [
                1075,
                "                            {"
            ],
            [
                1077,
                "                            }"
            ],
            [
                1079,
                "                            {"
            ],
            [
                1081,
                "                            }"
            ],
            [
                1099,
                "                            {"
            ],
            [
                1101,
                "                            }"
            ],
            [
                1103,
                "                            {"
            ],
            [
                1105,
                "                            }"
            ],
            [
                1113,
                "                List<Node> tNeighborNodes = iParam.SearchGrid.GetNeighbors(iNode, iParam.CrossCorner, iParam.CrossAdjacentPoint);"
            ],
            [
                1114,
                "                foreach (Node tNeighborNode in tNeighborNodes)"
            ]
        ],
        "deleted": [
            [
                42,
                "using System.Runtime.InteropServices;"
            ],
            [
                55,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Manhattan);"
            ],
            [
                59,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Euclidean);"
            ],
            [
                63,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Chebyshev);"
            ],
            [
                67,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Euclidean);"
            ],
            [
                90,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Manhattan);"
            ],
            [
                94,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Euclidean);"
            ],
            [
                98,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Chebyshev);"
            ],
            [
                102,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Euclidean);"
            ],
            [
                138,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Manhattan);"
            ],
            [
                142,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Euclidean);"
            ],
            [
                146,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Chebyshev);"
            ],
            [
                150,
                "                    m_heuristic = new HeuristicDelegate(Heuristic.Euclidean);"
            ],
            [
                316,
                "            Node tNode;"
            ],
            [
                337,
                "                tNode = tOpenList.Last();"
            ],
            [
                370,
                "                GridPos tNeighbor;"
            ],
            [
                371,
                "                GridPos tJumpPoint;"
            ],
            [
                372,
                "                Node tJumpNode;"
            ],
            [
                374,
                "                List<GridPos> tNeighbors = findNeighbors(iParam, iNode);"
            ],
            [
                375,
                "                for (int i = 0; i < tNeighbors.Count; i++)"
            ],
            [
                377,
                "                    tNeighbor = tNeighbors[i];"
            ],
            [
                378,
                "                    if (iParam.UseRecursive)"
            ],
            [
                379,
                "                        tJumpPoint = jump(iParam, tNeighbor.x, tNeighbor.y, iNode.x, iNode.y);"
            ],
            [
                380,
                "                    else"
            ],
            [
                381,
                "                        tJumpPoint = jumpLoop(iParam, tNeighbor.x, tNeighbor.y, iNode.x, iNode.y);"
            ],
            [
                384,
                "                        tJumpNode = iParam.SearchGrid.GetNodeAt(tJumpPoint.x, tJumpPoint.y);"
            ],
            [
                390,
                "                        if (tJumpNode.isClosed)"
            ],
            [
                398,
                "                        if (!tJumpNode.isOpened || tStartToJumpNodeLen < tJumpNode.startToCurNodeLen)"
            ],
            [
                401,
                "                            tJumpNode.heuristicCurNodeToEndLen = (tJumpNode.heuristicCurNodeToEndLen == null ? tHeuristic(Math.Abs(tJumpPoint.x - tEndX), Math.Abs(tJumpPoint.y - tEndY)) : tJumpNode.heuristicCurNodeToEndLen);"
            ],
            [
                447,
                "            JumpSnapshot currentSnapshot = new JumpSnapshot();"
            ],
            [
                448,
                "            JumpSnapshot newSnapshot = null;"
            ],
            [
                449,
                "            currentSnapshot.iX = iX;"
            ],
            [
                450,
                "            currentSnapshot.iY = iY;"
            ],
            [
                451,
                "            currentSnapshot.iPx = iPx;"
            ],
            [
                452,
                "            currentSnapshot.iPy = iPy;"
            ],
            [
                453,
                "            currentSnapshot.stage = 0;"
            ],
            [
                467,
                "                        else if (iParam.SearchGrid.GetNodeAt(currentSnapshot.iX, currentSnapshot.iY).Equals(iParam.EndNode))"
            ],
            [
                519,
                "                                newSnapshot = new JumpSnapshot();"
            ],
            [
                520,
                "                                newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                521,
                "                                newSnapshot.iY = currentSnapshot.iY;"
            ],
            [
                522,
                "                                newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                523,
                "                                newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                524,
                "                                newSnapshot.stage = 0;"
            ],
            [
                536,
                "                                newSnapshot = new JumpSnapshot();"
            ],
            [
                537,
                "                                newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                538,
                "                                newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                539,
                "                                newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                540,
                "                                newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                541,
                "                                newSnapshot.stage = 0;"
            ],
            [
                547,
                "                                newSnapshot = new JumpSnapshot();"
            ],
            [
                548,
                "                                newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                549,
                "                                newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                550,
                "                                newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                551,
                "                                newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                552,
                "                                newSnapshot.stage = 0;"
            ],
            [
                600,
                "                                newSnapshot = new JumpSnapshot();"
            ],
            [
                601,
                "                                newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                602,
                "                                newSnapshot.iY = currentSnapshot.iY;"
            ],
            [
                603,
                "                                newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                604,
                "                                newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                605,
                "                                newSnapshot.stage = 0;"
            ],
            [
                614,
                "                                newSnapshot = new JumpSnapshot();"
            ],
            [
                615,
                "                                newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                616,
                "                                newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                617,
                "                                newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                618,
                "                                newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                619,
                "                                newSnapshot.stage = 0;"
            ],
            [
                633,
                "                        newSnapshot = new JumpSnapshot();"
            ],
            [
                634,
                "                        newSnapshot.iX = currentSnapshot.iX;"
            ],
            [
                635,
                "                        newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                636,
                "                        newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                637,
                "                        newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                638,
                "                        newSnapshot.stage = 0;"
            ],
            [
                654,
                "                            newSnapshot = new JumpSnapshot();"
            ],
            [
                655,
                "                            newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                656,
                "                            newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                657,
                "                            newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                658,
                "                            newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                659,
                "                            newSnapshot.stage = 0;"
            ],
            [
                663,
                "                        else if (iParam.CrossAdjacentPoint)"
            ],
            [
                665,
                "                            newSnapshot = new JumpSnapshot();"
            ],
            [
                666,
                "                            newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                667,
                "                            newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                668,
                "                            newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                669,
                "                            newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                670,
                "                            newSnapshot.stage = 0;"
            ],
            [
                683,
                "                        newSnapshot = new JumpSnapshot();"
            ],
            [
                684,
                "                        newSnapshot.iX = currentSnapshot.iX;"
            ],
            [
                685,
                "                        newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                686,
                "                        newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                687,
                "                        newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                688,
                "                        newSnapshot.stage = 0;"
            ],
            [
                704,
                "                            newSnapshot = new JumpSnapshot();"
            ],
            [
                705,
                "                            newSnapshot.iX = currentSnapshot.iX + currentSnapshot.tDx;"
            ],
            [
                706,
                "                            newSnapshot.iY = currentSnapshot.iY + currentSnapshot.tDy;"
            ],
            [
                707,
                "                            newSnapshot.iPx = currentSnapshot.iX;"
            ],
            [
                708,
                "                            newSnapshot.iPy = currentSnapshot.iY;"
            ],
            [
                709,
                "                            newSnapshot.stage = 0;"
            ],
            [
                723,
                "            if (!iParam.SearchGrid.IsWalkableAt(iX, iY))"
            ],
            [
                724,
                "            {"
            ],
            [
                725,
                "                return null;"
            ],
            [
                726,
                "            }"
            ],
            [
                727,
                "            else if (iParam.SearchGrid.GetNodeAt(iX, iY).Equals(iParam.EndNode))"
            ],
            [
                729,
                "                return new GridPos(iX, iY);"
            ],
            [
                730,
                "            }"
            ],
            [
                731,
                ""
            ],
            [
                732,
                "            int tDx = iX - iPx;"
            ],
            [
                733,
                "            int tDy = iY - iPy;"
            ],
            [
                734,
                "            GridPos jx = null;"
            ],
            [
                735,
                "            GridPos jy = null;"
            ],
            [
                736,
                "            if (iParam.CrossCorner)"
            ],
            [
                737,
                "            {"
            ],
            [
                738,
                "                // check for forced neighbors"
            ],
            [
                739,
                "                // along the diagonal"
            ],
            [
                740,
                "                if (tDx != 0 && tDy != 0)"
            ],
            [
                742,
                "                    if ((iParam.SearchGrid.IsWalkableAt(iX - tDx, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX - tDx, iY)) ||"
            ],
            [
                743,
                "                        (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY - tDy) && !iParam.SearchGrid.IsWalkableAt(iX, iY - tDy)))"
            ],
            [
                744,
                "                    {"
            ],
            [
                745,
                "                        return new GridPos(iX, iY);"
            ],
            [
                746,
                "                    }"
            ],
            [
                748,
                "                // horizontally/vertically"
            ],
            [
                749,
                "                else"
            ],
            [
                751,
                "                    if (tDx != 0)"
            ],
            [
                753,
                "                        // moving along x"
            ],
            [
                754,
                "                        if ((iParam.SearchGrid.IsWalkableAt(iX + tDx, iY + 1) && !iParam.SearchGrid.IsWalkableAt(iX, iY + 1)) ||"
            ],
            [
                755,
                "                            (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY - 1) && !iParam.SearchGrid.IsWalkableAt(iX, iY - 1)))"
            ],
            [
                762,
                "                        if ((iParam.SearchGrid.IsWalkableAt(iX + 1, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX + 1, iY)) ||"
            ],
            [
                763,
                "                            (iParam.SearchGrid.IsWalkableAt(iX - 1, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX - 1, iY)))"
            ],
            [
                765,
                "                            return new GridPos(iX, iY);"
            ],
            [
                768,
                "                }"
            ],
            [
                769,
                "                // when moving diagonally, must check for vertical/horizontal jump points"
            ],
            [
                770,
                "                if (tDx != 0 && tDy != 0)"
            ],
            [
                771,
                "                {"
            ],
            [
                772,
                "                    jx = jump(iParam, iX + tDx, iY, iX, iY);"
            ],
            [
                773,
                "                    jy = jump(iParam, iX, iY + tDy, iX, iY);"
            ],
            [
                774,
                "                    if (jx != null || jy != null)"
            ],
            [
                776,
                "                        return new GridPos(iX, iY);"
            ],
            [
                778,
                "                }"
            ],
            [
                780,
                "                // moving diagonally, must make sure one of the vertical/horizontal"
            ],
            [
                781,
                "                // neighbors is open to allow the path"
            ],
            [
                782,
                "                if (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY) || iParam.SearchGrid.IsWalkableAt(iX, iY + tDy))"
            ],
            [
                783,
                "                {"
            ],
            [
                784,
                "                    return jump(iParam, iX + tDx, iY + tDy, iX, iY);"
            ],
            [
                785,
                "                }"
            ],
            [
                786,
                "                else if (iParam.CrossAdjacentPoint)"
            ],
            [
                787,
                "                {"
            ],
            [
                788,
                "                    return jump(iParam, iX + tDx, iY + tDy, iX, iY);"
            ],
            [
                789,
                "                }"
            ],
            [
                790,
                "                else"
            ],
            [
                791,
                "                {"
            ],
            [
                792,
                "                    return null;"
            ],
            [
                793,
                "                }"
            ],
            [
                794,
                "            }"
            ],
            [
                795,
                "            else //if (!iParam.CrossCorner)"
            ],
            [
                796,
                "            {"
            ],
            [
                797,
                "                // check for forced neighbors"
            ],
            [
                798,
                "                // along the diagonal"
            ],
            [
                799,
                "                if (tDx != 0 && tDy != 0)"
            ],
            [
                800,
                "                {"
            ],
            [
                801,
                "                    if ((iParam.SearchGrid.IsWalkableAt(iX + tDx, iY + tDy) && iParam.SearchGrid.IsWalkableAt(iX, iY + tDy) && !iParam.SearchGrid.IsWalkableAt(iX + tDx, iY)) ||"
            ],
            [
                802,
                "                        (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY + tDy) && iParam.SearchGrid.IsWalkableAt(iX + tDx, iY) && !iParam.SearchGrid.IsWalkableAt(iX, iY + tDy)))"
            ],
            [
                804,
                "                        return new GridPos(iX, iY);"
            ],
            [
                807,
                "                // horizontally/vertically"
            ],
            [
                808,
                "                else"
            ],
            [
                810,
                "                    if (tDx != 0)"
            ],
            [
                812,
                "                        // moving along x"
            ],
            [
                813,
                "                        if ((iParam.SearchGrid.IsWalkableAt(iX, iY + 1) && !iParam.SearchGrid.IsWalkableAt(iX - tDx, iY + 1)) ||"
            ],
            [
                814,
                "                            (iParam.SearchGrid.IsWalkableAt(iX, iY - 1) && !iParam.SearchGrid.IsWalkableAt(iX - tDx, iY - 1)))"
            ],
            [
                821,
                "                        if ((iParam.SearchGrid.IsWalkableAt(iX + 1, iY) && !iParam.SearchGrid.IsWalkableAt(iX + 1, iY - tDy)) ||"
            ],
            [
                822,
                "                            (iParam.SearchGrid.IsWalkableAt(iX - 1, iY) && !iParam.SearchGrid.IsWalkableAt(iX - 1, iY - tDy)))"
            ],
            [
                824,
                "                            return new GridPos(iX, iY);"
            ],
            [
                827,
                "                }"
            ],
            [
                829,
                "                // when moving diagonally, must check for vertical/horizontal jump points"
            ],
            [
                830,
                "                if (tDx != 0 && tDy != 0)"
            ],
            [
                831,
                "                {"
            ],
            [
                832,
                "                    jx = jump(iParam, iX + tDx, iY, iX, iY);"
            ],
            [
                833,
                "                    jy = jump(iParam, iX, iY + tDy, iX, iY);"
            ],
            [
                834,
                "                    if (jx != null || jy != null)"
            ],
            [
                836,
                "                        return new GridPos(iX, iY);"
            ],
            [
                838,
                "                }"
            ],
            [
                840,
                "                // moving diagonally, must make sure both of the vertical/horizontal"
            ],
            [
                841,
                "                // neighbors is open to allow the path"
            ],
            [
                842,
                "                if (iParam.SearchGrid.IsWalkableAt(iX + tDx, iY) && iParam.SearchGrid.IsWalkableAt(iX, iY + tDy))"
            ],
            [
                843,
                "                {"
            ],
            [
                844,
                "                    return jump(iParam, iX + tDx, iY + tDy, iX, iY);"
            ],
            [
                845,
                "                }"
            ],
            [
                846,
                "                else"
            ],
            [
                847,
                "                {"
            ],
            [
                853,
                "        private static List<GridPos> findNeighbors(JumpPointParam iParam, Node iNode)"
            ],
            [
                858,
                "            int tPx, tPy, tDx, tDy;"
            ],
            [
                860,
                "            List<Node> tNeighborNodes;"
            ],
            [
                861,
                "            Node tNeighborNode;"
            ],
            [
                866,
                "                tPx = tParent.x;"
            ],
            [
                867,
                "                tPy = tParent.y;"
            ],
            [
                869,
                "                tDx = (tX - tPx) / Math.Max(Math.Abs(tX - tPx), 1);"
            ],
            [
                870,
                "                tDy = (tY - tPy) / Math.Max(Math.Abs(tY - tPy), 1);"
            ],
            [
                997,
                "                            if (iParam.SearchGrid.IsWalkableAt(tX, tY + tDy) && iParam.SearchGrid.IsWalkableAt(tX + tDx, tY))"
            ],
            [
                1003,
                "                            if (iParam.SearchGrid.IsWalkableAt(tX, tY + tDy) && iParam.SearchGrid.IsWalkableAt(tX - tDx, tY))"
            ],
            [
                1009,
                "                            if (iParam.SearchGrid.IsWalkableAt(tX, tY - tDy) && iParam.SearchGrid.IsWalkableAt(tX + tDx, tY))"
            ],
            [
                1062,
                "                tNeighborNodes = iParam.SearchGrid.GetNeighbors(iNode, iParam.CrossCorner, iParam.CrossAdjacentPoint);"
            ],
            [
                1063,
                "                for (int i = 0; i < tNeighborNodes.Count; i++)"
            ],
            [
                1065,
                "                    tNeighborNode = tNeighborNodes[i];"
            ]
        ]
    },
    "num_lines_added": 252,
    "num_lines_removed": 202
}