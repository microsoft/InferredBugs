{
    "hash": "d15c2e74720d37710e26d4b937ddba05d8c6ed6d",
    "message": "\u91cd\u6784Http\u8c03\u7528",
    "file_num_lines": 166,
    "diff_parsed": {
        "added": [
            [
                7,
                "using BiliBiliTool.Agent.Interfaces;"
            ],
            [
                23,
                "        private readonly IDailyTaskApi _dailyTaskApi;"
            ],
            [
                31,
                "            IOptionsMonitor<DailyTaskOptions> dailyTaskOptions,"
            ],
            [
                32,
                "            IDailyTaskApi dailyTaskApi)"
            ],
            [
                38,
                "            _dailyTaskApi = dailyTaskApi;"
            ],
            [
                64,
                "            //\u6295\u5e01\u4efb\u52a1"
            ],
            [
                65,
                "            //doCoinAdd();"
            ],
            [
                66,
                ""
            ],
            [
                68,
                "            silver2coin(); //\u76f4\u64ad\u4e2d\u5fc3\u7684\u94f6\u74dc\u5b50\u5151\u6362\u786c\u5e01"
            ],
            [
                69,
                ""
            ],
            [
                85,
                "            var apiResponse = _dailyTaskApi.LoginByCookie().Result;"
            ],
            [
                120,
                "            var apiResponse = _dailyTaskApi.GetDailyTaskRewardInfo().Result;"
            ],
            [
                130,
                "                return _dailyTaskApi.GetDailyTaskRewardInfo().Result.Data;"
            ],
            [
                131,
                "                //todo:\u5076\u53d1\u6027\u8bf7\u6c42\u5931\u8d25\uff0c\u518d\u8bf7\u6c42\u4e00\u6b21"
            ],
            [
                171,
                "            var apiResponse = _dailyTaskApi.GetRegionRankingVideos(rid, day).Result;"
            ],
            [
                192,
                "            var apiResponse = JsonSerializer.Deserialize<BiliApiResponse>(contentStr);"
            ],
            [
                218,
                "            var apiResponse = JsonSerializer.Deserialize<BiliApiResponse>(contentStr);"
            ],
            [
                251,
                "            var apiResponse = JsonSerializer.Deserialize<BiliApiResponse>(contentStr);"
            ],
            [
                273,
                "        //    int maxNumberOfCoins = 5;"
            ],
            [
                275,
                "        //    int setCoin = _dailyTaskOptions.CurrentValue.NumberOfCoins;"
            ],
            [
                282,
                "        //        _logger.LogInformation(\"\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u4e3a: {setCoin}\u679a,\u4e3a\u4fdd\u62a4\u4f60\u7684\u8d44\u4ea7\uff0c\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u91cd\u7f6e\u4e3a: {maxNumberOfCoins}\u679a\", setCoin, maxNumberOfCoins);"
            ],
            [
                286,
                "        //    _logger.LogInformation(\"\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u4e3a: {setCoin}\u679a,\u7a0b\u5e8f\u6267\u884c\u524d\u5df2\u6295: {useCoin}\u679a\", setCoin, useCoin);"
            ],
            [
                287,
                "        //    //desp.appendDesp($\"\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u4e3a: {setCoin}\u679a,\u7a0b\u5e8f\u6267\u884c\u524d\u5df2\u6295: {useCoin}\u679a\");"
            ],
            [
                339,
                "        ///**"
            ],
            [
                340,
                "        // * \u83b7\u53d6\u5f53\u524d\u6295\u5e01\u83b7\u5f97\u7684\u7ecf\u9a8c\u503c"
            ],
            [
                341,
                "        // *"
            ],
            [
                342,
                "        // * @return \u672c\u65e5\u5df2\u7ecf\u6295\u4e86\u51e0\u4e2a\u5e01"
            ],
            [
                343,
                "        // */"
            ],
            [
                344,
                "        //public int expConfirm()"
            ],
            [
                345,
                "        //{"
            ],
            [
                346,
                "        //    JsonObject resultJson = HttpUnit.doGet(ApiList.needCoin);"
            ],
            [
                347,
                "        //    int getCoinExp = resultJson.get(\"number\").getAsInt();"
            ],
            [
                348,
                "        //    logger.info(\"\u4eca\u65e5\u5df2\u83b7\u5f97\u6295\u5e01\u7ecf\u9a8c: \" + getCoinExp);"
            ],
            [
                349,
                "        //    return getCoinExp / 10;"
            ],
            [
                350,
                "        //}"
            ],
            [
                351,
                ""
            ],
            [
                380,
                "        #region"
            ],
            [
                381,
                ""
            ],
            [
                382,
                ""
            ],
            [
                383,
                ""
            ],
            [
                384,
                ""
            ],
            [
                385,
                "        ///**"
            ],
            [
                386,
                "        // * @param aid         av\u53f7"
            ],
            [
                387,
                "        // * @param multiply    \u6295\u5e01\u6570\u91cf"
            ],
            [
                388,
                "        // * @param select_like \u662f\u5426\u540c\u65f6\u70b9\u8d5e 1\u662f"
            ],
            [
                389,
                "        // * @return \u662f\u5426\u6295\u5e01\u6210\u529f"
            ],
            [
                390,
                "        // */"
            ],
            [
                391,
                "        //public bool coinAdd(String aid, int multiply, int select_like)"
            ],
            [
                392,
                "        //{"
            ],
            [
                393,
                "        //    String requestBody = \"aid=\" + aid"
            ],
            [
                394,
                "        //                                + \"&multiply=\" + multiply"
            ],
            [
                395,
                "        //                                + \"&select_like=\" + select_like"
            ],
            [
                396,
                "        //                                + \"&cross_domain=\" + \"true\""
            ],
            [
                397,
                "        //                                + \"&csrf=\" + Verify.getInstance().getBiliJct();"
            ],
            [
                398,
                ""
            ],
            [
                399,
                "        //    //\u5224\u65ad\u66fe\u7ecf\u662f\u5426\u5bf9\u6b64av\u6295\u5e01\u8fc7"
            ],
            [
                400,
                "        //    if (!isCoin(aid))"
            ],
            [
                401,
                "        //    {"
            ],
            [
                402,
                "        //        JsonObject jsonObject = HttpUnit.doPost(ApiList.CoinAdd, requestBody);"
            ],
            [
                403,
                "        //        if (jsonObject.get(statusCodeStr).getAsInt() == 0)"
            ],
            [
                404,
                "        //        {"
            ],
            [
                405,
                "        //            logger.info(\"\u4e3aAv\" + aid + \"\u6295\u5e01\u6210\u529f\");"
            ],
            [
                406,
                "        //            desp.appendDesp(\"\u4e3aAv\" + aid + \"\u6295\u5e01\u6210\u529f\");"
            ],
            [
                407,
                "        //            return true;"
            ],
            [
                408,
                "        //        }"
            ],
            [
                409,
                "        //        else"
            ],
            [
                410,
                "        //        {"
            ],
            [
                411,
                "        //            logger.info(\"\u6295\u5e01\u5931\u8d25\" + jsonObject.get(\"message\").getAsString());"
            ],
            [
                412,
                "        //            return false;"
            ],
            [
                413,
                "        //        }"
            ],
            [
                414,
                "        //    }"
            ],
            [
                415,
                "        //    else"
            ],
            [
                416,
                "        //    {"
            ],
            [
                417,
                "        //        logger.debug(aid + \"\u5df2\u7ecf\u6295\u5e01\u8fc7\u4e86\");"
            ],
            [
                418,
                "        //        return false;"
            ],
            [
                419,
                "        //    }"
            ],
            [
                420,
                "        //}"
            ],
            [
                421,
                ""
            ],
            [
                422,
                "        ///**"
            ],
            [
                423,
                "        // * \u68c0\u67e5\u662f\u5426\u6295\u5e01"
            ],
            [
                424,
                "        // *"
            ],
            [
                425,
                "        // * @param aid av\u53f7"
            ],
            [
                426,
                "        // * @return \u8fd4\u56de\u662f\u5426\u6295\u8fc7\u786c\u5e01\u4e86"
            ],
            [
                427,
                "        // */"
            ],
            [
                428,
                "        //public bool isCoin(String aid)"
            ],
            [
                429,
                "        //{"
            ],
            [
                430,
                "        //    String urlParam = \"?aid=\" + aid;"
            ],
            [
                431,
                "        //    JsonObject result = HttpUnit.doGet(ApiList.isCoin + urlParam);"
            ],
            [
                432,
                ""
            ],
            [
                433,
                "        //    int multiply = result.getAsJsonObject(\"data\").get(\"multiply\").getAsInt();"
            ],
            [
                434,
                "        //    if (multiply > 0)"
            ],
            [
                435,
                "        //    {"
            ],
            [
                436,
                "        //        logger.info(\"\u5df2\u7ecf\u4e3aAv\" + aid + \"\u6295\u8fc7\" + multiply + \"\u679a\u786c\u5e01\u5566\");"
            ],
            [
                437,
                "        //        return true;"
            ],
            [
                438,
                "        //    }"
            ],
            [
                439,
                "        //    else"
            ],
            [
                440,
                "        //    {"
            ],
            [
                441,
                "        //        logger.info(\"\u8fd8\u6ca1\u6709\u4e3aAv\" + aid + \" \u6295\u8fc7\u786c\u5e01\uff0c\u5f00\u59cb\u6295\u5e01\");"
            ],
            [
                442,
                "        //        return false;"
            ],
            [
                443,
                "        //    }"
            ],
            [
                444,
                "        //}"
            ],
            [
                445,
                ""
            ],
            [
                446,
                ""
            ],
            [
                447,
                ""
            ],
            [
                448,
                ""
            ],
            [
                449,
                ""
            ]
        ],
        "deleted": [
            [
                29,
                "            IOptionsMonitor<DailyTaskOptions> dailyTaskOptions)"
            ],
            [
                61,
                "            silver2coin(); //\u94f6\u74dc\u5b50\u6362\u786c\u5e01"
            ],
            [
                62,
                "            doCoinAdd(); //\u6295\u5e01\u4efb\u52a1"
            ],
            [
                78,
                "            var request = new HttpRequestMessage(HttpMethod.Get, ApiList.LOGIN);"
            ],
            [
                79,
                "            var client = _httpClientFactory.CreateClient(\"bilibili\");"
            ],
            [
                80,
                "            var response = client.SendAsync(request).Result;"
            ],
            [
                81,
                "            var contentStr = response.Content.ReadAsStringAsync().Result;"
            ],
            [
                82,
                ""
            ],
            [
                83,
                "            ApiResponse<LoginResponse> apiResponse = JsonSerializer.Deserialize<ApiResponse<LoginResponse>>(contentStr);"
            ],
            [
                84,
                "            _logger.LogInformation(JsonSerializer.Serialize(apiResponse.Data));"
            ],
            [
                119,
                "            var request = new HttpRequestMessage(HttpMethod.Get, ApiList.reward);"
            ],
            [
                120,
                "            var client = _httpClientFactory.CreateClient(\"bilibili\");"
            ],
            [
                121,
                "            var response = client.SendAsync(request).Result;"
            ],
            [
                122,
                "            var contentStr = response.Content.ReadAsStringAsync().Result;"
            ],
            [
                123,
                ""
            ],
            [
                124,
                "            var apiResponse = JsonSerializer.Deserialize<ApiResponse<DailyTaskInfo>>(contentStr);"
            ],
            [
                134,
                "                return GetDailyTaskStatus();"
            ],
            [
                135,
                "                //\u5076\u53d1\u6027\u8bf7\u6c42\u5931\u8d25\uff0c\u518d\u8bf7\u6c42\u4e00\u6b21\u3002"
            ],
            [
                175,
                "            String urlParam = $\"?rid={rid}&day={day}\";"
            ],
            [
                176,
                "            var request = new HttpRequestMessage(HttpMethod.Get, ApiList.getRegionRanking + urlParam);"
            ],
            [
                177,
                "            var client = _httpClientFactory.CreateClient(\"bilibili\");"
            ],
            [
                178,
                "            var response = client.SendAsync(request).Result;"
            ],
            [
                179,
                "            var contentStr = response.Content.ReadAsStringAsync().Result;"
            ],
            [
                183,
                "            var apiResponse = JsonSerializer.Deserialize<ApiResponse<List<RankingInfo>>>(contentStr);"
            ],
            [
                184,
                ""
            ],
            [
                202,
                "            var apiResponse = JsonSerializer.Deserialize<ApiResponse>(contentStr);"
            ],
            [
                228,
                "            var apiResponse = JsonSerializer.Deserialize<ApiResponse>(contentStr);"
            ],
            [
                261,
                "            var apiResponse = JsonSerializer.Deserialize<ApiResponse>(contentStr);"
            ],
            [
                274,
                "        #region"
            ],
            [
                275,
                ""
            ],
            [
                276,
                ""
            ],
            [
                277,
                ""
            ],
            [
                278,
                ""
            ],
            [
                279,
                "        ///**"
            ],
            [
                280,
                "        // * @param aid         av\u53f7"
            ],
            [
                281,
                "        // * @param multiply    \u6295\u5e01\u6570\u91cf"
            ],
            [
                282,
                "        // * @param select_like \u662f\u5426\u540c\u65f6\u70b9\u8d5e 1\u662f"
            ],
            [
                283,
                "        // * @return \u662f\u5426\u6295\u5e01\u6210\u529f"
            ],
            [
                284,
                "        // */"
            ],
            [
                285,
                "        //public bool coinAdd(String aid, int multiply, int select_like)"
            ],
            [
                286,
                "        //{"
            ],
            [
                287,
                "        //    String requestBody = \"aid=\" + aid"
            ],
            [
                288,
                "        //                                + \"&multiply=\" + multiply"
            ],
            [
                289,
                "        //                                + \"&select_like=\" + select_like"
            ],
            [
                290,
                "        //                                + \"&cross_domain=\" + \"true\""
            ],
            [
                291,
                "        //                                + \"&csrf=\" + Verify.getInstance().getBiliJct();"
            ],
            [
                292,
                ""
            ],
            [
                293,
                "        //    //\u5224\u65ad\u66fe\u7ecf\u662f\u5426\u5bf9\u6b64av\u6295\u5e01\u8fc7"
            ],
            [
                294,
                "        //    if (!isCoin(aid))"
            ],
            [
                295,
                "        //    {"
            ],
            [
                296,
                "        //        JsonObject jsonObject = HttpUnit.doPost(ApiList.CoinAdd, requestBody);"
            ],
            [
                297,
                "        //        if (jsonObject.get(statusCodeStr).getAsInt() == 0)"
            ],
            [
                298,
                "        //        {"
            ],
            [
                299,
                "        //            logger.info(\"\u4e3aAv\" + aid + \"\u6295\u5e01\u6210\u529f\");"
            ],
            [
                300,
                "        //            desp.appendDesp(\"\u4e3aAv\" + aid + \"\u6295\u5e01\u6210\u529f\");"
            ],
            [
                301,
                "        //            return true;"
            ],
            [
                302,
                "        //        }"
            ],
            [
                303,
                "        //        else"
            ],
            [
                304,
                "        //        {"
            ],
            [
                305,
                "        //            logger.info(\"\u6295\u5e01\u5931\u8d25\" + jsonObject.get(\"message\").getAsString());"
            ],
            [
                306,
                "        //            return false;"
            ],
            [
                307,
                "        //        }"
            ],
            [
                308,
                "        //    }"
            ],
            [
                309,
                "        //    else"
            ],
            [
                310,
                "        //    {"
            ],
            [
                311,
                "        //        logger.debug(aid + \"\u5df2\u7ecf\u6295\u5e01\u8fc7\u4e86\");"
            ],
            [
                312,
                "        //        return false;"
            ],
            [
                313,
                "        //    }"
            ],
            [
                314,
                "        //}"
            ],
            [
                315,
                ""
            ],
            [
                316,
                "        ///**"
            ],
            [
                317,
                "        // * \u68c0\u67e5\u662f\u5426\u6295\u5e01"
            ],
            [
                318,
                "        // *"
            ],
            [
                319,
                "        // * @param aid av\u53f7"
            ],
            [
                320,
                "        // * @return \u8fd4\u56de\u662f\u5426\u6295\u8fc7\u786c\u5e01\u4e86"
            ],
            [
                321,
                "        // */"
            ],
            [
                322,
                "        //public bool isCoin(String aid)"
            ],
            [
                323,
                "        //{"
            ],
            [
                324,
                "        //    String urlParam = \"?aid=\" + aid;"
            ],
            [
                325,
                "        //    JsonObject result = HttpUnit.doGet(ApiList.isCoin + urlParam);"
            ],
            [
                326,
                ""
            ],
            [
                327,
                "        //    int multiply = result.getAsJsonObject(\"data\").get(\"multiply\").getAsInt();"
            ],
            [
                328,
                "        //    if (multiply > 0)"
            ],
            [
                329,
                "        //    {"
            ],
            [
                330,
                "        //        logger.info(\"\u5df2\u7ecf\u4e3aAv\" + aid + \"\u6295\u8fc7\" + multiply + \"\u679a\u786c\u5e01\u5566\");"
            ],
            [
                331,
                "        //        return true;"
            ],
            [
                332,
                "        //    }"
            ],
            [
                333,
                "        //    else"
            ],
            [
                334,
                "        //    {"
            ],
            [
                335,
                "        //        logger.info(\"\u8fd8\u6ca1\u6709\u4e3aAv\" + aid + \" \u6295\u8fc7\u786c\u5e01\uff0c\u5f00\u59cb\u6295\u5e01\");"
            ],
            [
                336,
                "        //        return false;"
            ],
            [
                337,
                "        //    }"
            ],
            [
                338,
                "        //}"
            ],
            [
                339,
                ""
            ],
            [
                340,
                "        ///**"
            ],
            [
                341,
                "        // * \u83b7\u53d6\u5f53\u524d\u6295\u5e01\u83b7\u5f97\u7684\u7ecf\u9a8c\u503c"
            ],
            [
                342,
                "        // *"
            ],
            [
                343,
                "        // * @return \u672c\u65e5\u5df2\u7ecf\u6295\u4e86\u51e0\u4e2a\u5e01"
            ],
            [
                344,
                "        // */"
            ],
            [
                345,
                "        //public int expConfirm()"
            ],
            [
                346,
                "        //{"
            ],
            [
                347,
                "        //    JsonObject resultJson = HttpUnit.doGet(ApiList.needCoin);"
            ],
            [
                348,
                "        //    int getCoinExp = resultJson.get(\"number\").getAsInt();"
            ],
            [
                349,
                "        //    logger.info(\"\u4eca\u65e5\u5df2\u83b7\u5f97\u6295\u5e01\u7ecf\u9a8c: \" + getCoinExp);"
            ],
            [
                350,
                "        //    return getCoinExp / 10;"
            ],
            [
                351,
                "        //}"
            ],
            [
                352,
                ""
            ],
            [
                362,
                "        //    final int maxNumberOfCoins = 5;"
            ],
            [
                364,
                "        //    int setCoin = Config.getInstance().getNumberOfCoins();"
            ],
            [
                371,
                "        //        logger.info(\"\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u4e3a: \" + setCoin + \"\u679a,\" + \"\u4e3a\u4fdd\u62a4\u4f60\u7684\u8d44\u4ea7\uff0c\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u91cd\u7f6e\u4e3a: \" + maxNumberOfCoins + \"\u679a\");"
            ],
            [
                375,
                "        //    logger.info(\"\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u4e3a: \" + setCoin + \"\u679a,\" + \"\u7a0b\u5e8f\u6267\u884c\u524d\u5df2\u6295: \" + useCoin + \"\u679a\");"
            ],
            [
                376,
                "        //    desp.appendDesp(\"\u81ea\u5b9a\u4e49\u6295\u5e01\u6570\u4e3a: \" + setCoin + \"\u679a,\" + \"\u7a0b\u5e8f\u6267\u884c\u524d\u5df2\u6295: \" + useCoin + \"\u679a\");"
            ]
        ]
    },
    "num_lines_added": 106,
    "num_lines_removed": 112
}