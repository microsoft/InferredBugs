{"hash": "25d563f1de6a82f6d540f957339451bb462532ef", "message": "\u904d\u5386\u7f51\u5361\u83b7\u53d6IP\u65f6\uff0c\u4f18\u5148\u83b7\u53d6\u672c\u5730\u7ad9\u70b9IP\u6216\u7b2c\u4e00\u4e2a\u53ef\u7528IP", "file_num_lines": 79, "diff_parsed": {"added": [[8, "import java.net.SocketException;"], [43, "     * get first valid address"], [49, "        Enumeration<NetworkInterface> interfaces;"], [51, "            interfaces = NetworkInterface.getNetworkInterfaces();"], [52, "        } catch (SocketException e) {"], [54, "            return null;"], [57, "        InetAddress candidateAddress = null;"], [58, "        while (interfaces.hasMoreElements()) {"], [59, "            NetworkInterface network = interfaces.nextElement();"], [60, "            Enumeration<InetAddress> addresses = network.getInetAddresses();"], [61, "            while (addresses.hasMoreElements()) {"], [62, "                InetAddress address = addresses.nextElement();"], [63, "                if (isValidAddress(address)) {"], [64, "                    // return site-local address immediately."], [65, "                    if (address.isSiteLocalAddress()) {"], [66, "                        return address;"], [67, "                    }"], [68, "                    // get first candidate address."], [69, "                    if (candidateAddress == null) {"], [70, "                        candidateAddress = address;"], [71, "                    }"], [72, "                }"], [76, "        return candidateAddress;"], [90, "        LOCAL_ADDRESS = localAddress != null ? localAddress.getHostAddress() : null;"]], "deleted": [[42, "     * get first valid addredd"], [47, ""], [50, "            Enumeration<NetworkInterface> interfaces = NetworkInterface.getNetworkInterfaces();"], [51, "            if (interfaces != null) {"], [52, "                while (interfaces.hasMoreElements()) {"], [53, "                    try {"], [54, "                        NetworkInterface network = interfaces.nextElement();"], [55, "                        Enumeration<InetAddress> addresses = network.getInetAddresses();"], [56, "                        if (addresses != null) {"], [57, "                            while (addresses.hasMoreElements()) {"], [58, "                                try {"], [59, "                                    InetAddress address = addresses.nextElement();"], [60, "                                    if (isValidAddress(address)) {"], [61, "                                        return address;"], [62, "                                    }"], [63, "                                } catch (Throwable e) {"], [64, "                                    logger.error(\"Failed to retriving ip address, \" + e.getMessage(), e);"], [65, "                                }"], [66, "                            }"], [67, "                        }"], [68, "                    } catch (Throwable e) {"], [69, "                        logger.error(\"Failed to retriving ip address, \" + e.getMessage(), e);"], [70, "                    }"], [71, "                }"], [72, "            }"], [73, "        } catch (Throwable e) {"], [77, "        // getLocalHost address"], [78, "        try {"], [79, "            InetAddress localAddress = InetAddress.getLocalHost();"], [80, "            if (isValidAddress(localAddress)) {"], [81, "                return localAddress;"], [83, "        } catch (Throwable e) {"], [84, "            logger.error(\"Failed to retriving ip address, \" + e.getMessage(), e);"], [86, ""], [88, "        return null;"], [102, "        LOCAL_ADDRESS = localAddress.getHostAddress();"]]}, "num_lines_added": 24, "num_lines_removed": 36}