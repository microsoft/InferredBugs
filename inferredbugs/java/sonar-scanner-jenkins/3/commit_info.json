{"hash": "2e64558c06e37ab5d5286b327ac566cc8beafcfd", "message": "SONARJNKNS-306 Add SonarGlobalConfiguration tests", "file_num_lines": 128, "diff_parsed": {"added": [[24, "import com.google.common.annotations.VisibleForTesting;"], [35, "import java.util.function.Supplier;"], [56, ""], [57, "  private final Supplier<Jenkins> jenkinsSupplier;"], [58, ""], [66, "    this("], [67, "      () -> Optional.ofNullable(Jenkins.getInstanceOrNull())"], [68, "              .orElseThrow(() -> new IllegalStateException(\"Could not get Jenkins instance\"))"], [69, "    );"], [70, "  }"], [71, ""], [72, "  @VisibleForTesting"], [73, "  public SonarGlobalConfiguration(Supplier<Jenkins> supplier) {"], [75, "    this.jenkinsSupplier = supplier;"], [162, "    return createListBoxModel(credentialsId);"], [167, "    return createListBoxModel(webhookSecretId);"], [168, "  }"], [169, ""], [170, "  private ListBoxModel createListBoxModel(String credentialId) {"], [171, "    if (!jenkinsSupplier.get().hasPermission(Jenkins.ADMINISTER)) {"], [172, "      return new StandardListBoxModel().includeCurrentValue(credentialId);"], [179, "        jenkinsSupplier.get(),"]], "deleted": [[148, "    if (!Jenkins.getInstance().hasPermission(Jenkins.ADMINISTER)) {"], [149, "      return new StandardListBoxModel().includeCurrentValue(credentialsId);"], [150, "    }"], [151, ""], [152, "    return new StandardListBoxModel()"], [153, "      .includeEmptyValue()"], [154, "      .includeMatchingAs("], [155, "        ACL.SYSTEM,"], [156, "        Jenkins.getInstance(),"], [157, "        StringCredentials.class,"], [158, "        Collections.emptyList(),"], [159, "        CredentialsMatchers.always()"], [160, "      );"], [165, "    if (!Jenkins.getInstance().hasPermission(Jenkins.ADMINISTER)) {"], [166, "      return new StandardListBoxModel().includeCurrentValue(webhookSecretId);"], [173, "        Jenkins.getInstance(),"], [179, ""]]}, "num_lines_added": 22, "num_lines_removed": 17}