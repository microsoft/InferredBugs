{"hash": "f361597447874b18856fbc70fab8954d97533b95", "message": "Inline unit test for locale-specific number formats in video:price tags (#220)\n- simply unit tests to contain only tested or required video attributes\n- fix order of attributes/elements to follow XSD schema spec", "file_num_lines": 219, "diff_parsed": {"added": [[28, "import java.util.Iterator;"], [58, "        assertEquals(2, sm.getSiteMapUrls().size());"], [59, "        Iterator<SiteMapURL> siter = sm.getSiteMapUrls().iterator();"], [60, ""], [61, "        // first <loc> element: nearly all video attributes"], [81, "        VideoAttributes attr = (VideoAttributes) siter.next().getAttributesForExtension(Extension.VIDEO)[0];"], [82, "        assertNotNull(attr);"], [83, "        assertEquals(expectedVideoAttributes, attr);"], [85, "        // locale-specific number format in <video:price>, test #220"], [86, "        expectedVideoAttributes = new VideoAttributes(new URL(\"http://www.example.com/thumbs/123-2.jpg\"), \"Grilling steaks for summer, episode 2\","], [87, "                        \"Alkis shows you how to get perfectly done steaks every time\", new URL(\"http://www.example.com/video123-2.flv\"), null);"], [88, "        expectedVideoAttributes.setPrices(new VideoAttributes.VideoPrice[] { new VideoAttributes.VideoPrice(\"EUR\", null, VideoAttributes.VideoPriceType.own) });"], [89, "        attr = (VideoAttributes) siter.next().getAttributesForExtension(Extension.VIDEO)[0];"], [90, "        assertNotNull(attr);"], [91, "        assertEquals(expectedVideoAttributes, attr);"]], "deleted": [[57, "        assertEquals(1, sm.getSiteMapUrls().size());"], [78, "        for (SiteMapURL su : sm.getSiteMapUrls()) {"], [79, "            assertNotNull(su.getAttributesForExtension(Extension.VIDEO));"], [80, "            VideoAttributes attr = (VideoAttributes) su.getAttributesForExtension(Extension.VIDEO)[0];"], [81, "            assertEquals(expectedVideoAttributes, attr);"], [82, "        }"], [260, ""], [261, "    @Test"], [262, "    public void testVideosSitemapWithError() throws UnknownFormatException, IOException {"], [263, "        SiteMapParser parser = new SiteMapParser();"], [264, "        parser.enableExtension(Extension.VIDEO);"], [265, ""], [266, "        String contentType = \"text/xml\";"], [267, "        byte[] content = SiteMapParserTest.getResourceAsBytes(\"src/test/resources/sitemaps/extension/sitemap-videos-error.xml\");"], [268, ""], [269, "        URL url = new URL(\"http://www.example.com/sitemap-video.xml\");"], [270, "        AbstractSiteMap asm = parser.parseSiteMap(contentType, content, url);"], [271, "        assertEquals(false, asm.isIndex());"], [272, "        assertEquals(true, asm instanceof SiteMap);"], [273, "        SiteMap sm = (SiteMap) asm;"], [274, "        assertEquals(1, sm.getSiteMapUrls().size());"], [275, "        VideoAttributes expectedVideoAttributes = new VideoAttributes(new URL(\"http://www.example.com/thumbs/123.jpg\"), \"Grilling steaks for summer\","], [276, "                \"Alkis shows you how to get perfectly done steaks every time\", new URL(\"http://www.example.com/video123.flv\"), new URL(\"http://www.example.com/videoplayer.swf?video=123\"));"], [277, "        expectedVideoAttributes.setDuration(600);"], [278, "        ZonedDateTime dt = ZonedDateTime.parse(\"2009-11-05T19:20:30+08:00\");"], [279, "        expectedVideoAttributes.setExpirationDate(dt);"], [280, "        dt = ZonedDateTime.parse(\"2007-11-05T19:20:30+08:00\");"], [281, "        expectedVideoAttributes.setPublicationDate(dt);"], [282, "        expectedVideoAttributes.setRating(4.2f);"], [283, "        expectedVideoAttributes.setViewCount(12345);"], [284, "        expectedVideoAttributes.setFamilyFriendly(true);"], [285, "        expectedVideoAttributes.setTags(new String[] { \"sample_tag1\", \"sample_tag2\" });"], [286, "        expectedVideoAttributes.setAllowedCountries(new String[] { \"IE\", \"GB\", \"US\", \"CA\" });"], [287, "        expectedVideoAttributes.setGalleryLoc(new URL(\"http://cooking.example.com\"));"], [288, "        expectedVideoAttributes.setGalleryTitle(\"Cooking Videos\");"], [289, "        expectedVideoAttributes.setPrices(new VideoAttributes.VideoPrice[] { new VideoAttributes.VideoPrice(\"EUR\", null, VideoAttributes.VideoPriceType.own) });"], [290, "        expectedVideoAttributes.setRequiresSubscription(true);"], [291, "        expectedVideoAttributes.setUploader(\"GrillyMcGrillerson\");"], [292, "        expectedVideoAttributes.setUploaderInfo(new URL(\"http://www.example.com/users/grillymcgrillerson\"));"], [293, "        expectedVideoAttributes.setLive(false);"], [294, ""], [295, "        for (SiteMapURL su : sm.getSiteMapUrls()) {"], [296, "            assertNotNull(su.getAttributesForExtension(Extension.VIDEO));"], [297, "            VideoAttributes attr = (VideoAttributes) su.getAttributesForExtension(Extension.VIDEO)[0];"], [298, "            assertEquals(expectedVideoAttributes, attr);"], [299, "        }"], [300, "    }"], [301, ""]]}, "num_lines_added": 15, "num_lines_removed": 48}