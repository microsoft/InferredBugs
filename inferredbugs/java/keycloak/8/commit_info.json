{"hash": "1e33931f233d4d634ec566eb22892b82e54b1d63", "message": "KEYCLOAK-741 Failure to refresh token should invalidate http session", "file_num_lines": 177, "diff_parsed": {"added": [[190, "        // Refresh failed, so user is already logged out from keycloak. Cleanup and expire our session"], [191, "        Session catalinaSession = request.getSessionInternal();"], [192, "        log.fine(\"Cleanup and expire session \" + catalinaSession + \" after failed refresh\");"], [193, "        catalinaSession.removeNote(KeycloakSecurityContext.class.getName());"], [196, "        catalinaSession.setPrincipal(null);"], [197, "        catalinaSession.setAuthType(null);"], [198, "        catalinaSession.expire();"]], "deleted": [[190, "        request.getSessionInternal().removeNote(KeycloakSecurityContext.class.getName());"], [193, "        request.getSessionInternal().setPrincipal(null);"], [194, "        request.getSessionInternal().setAuthType(null);"]]}, "num_lines_added": 7, "num_lines_removed": 3}