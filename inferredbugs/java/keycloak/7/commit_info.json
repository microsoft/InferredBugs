{"hash": "1e33931f233d4d634ec566eb22892b82e54b1d63", "message": "KEYCLOAK-741 Failure to refresh token should invalidate http session", "file_num_lines": 173, "diff_parsed": {"added": [[188, "        // Refresh failed, so user is already logged out from keycloak. Cleanup and expire our session"], [189, "        Session catalinaSession = request.getSessionInternal();"], [190, "        log.debugf(\"Cleanup and expire session %s after failed refresh\", catalinaSession.getId());"], [191, "        catalinaSession.removeNote(KeycloakSecurityContext.class.getName());"], [194, "        catalinaSession.setPrincipal(null);"], [195, "        catalinaSession.setAuthType(null);"], [196, "        catalinaSession.expire();"]], "deleted": [[188, "        request.getSessionInternal().removeNote(KeycloakSecurityContext.class.getName());"], [191, "        request.getSessionInternal().setPrincipal(null);"], [192, "        request.getSessionInternal().setAuthType(null);"]]}, "num_lines_added": 7, "num_lines_removed": 3}