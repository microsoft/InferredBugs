{"hash": "c8cf66a48c7bee90a2905766e55bb06414b0f53b", "message": "Make uncommitted more configurable, improve tests", "file_num_lines": 86, "diff_parsed": {"added": [[29, "   private final long bucketNumber;"], [30, "   private final long bucketSize;"], [32, "   private Bucket buckets[];"], [37, "   public Uncommitted(long startTimestamp, int bucketNumber, int bucketSize) {"], [38, "      this.bucketSize = bucketSize;"], [39, "      this.bucketNumber = bucketNumber;"], [40, "      this.buckets = new Bucket[(int) bucketNumber];"], [43, "      long ts = startTimestamp & ~(bucketSize - 1);"], [44, "      LOG.info(\"Start TS : \" + startTimestamp + \" firstUncom: \" + firstUncommitedBucket + \" Mask:\" + ts );"], [45, "      LOG.info(\"BKT_NUMBER : \" + bucketNumber + \" BKT_SIZE: \" + bucketSize);"], [54, "         bucket = new Bucket(getAbsolutePosition(id), (int) bucketSize);"], [82, "      for (int i = firstUncommitedBucket; i != maxBucket ; i = (int)((i+1) % bucketNumber)) {"], [107, "         firstUncommitedBucket = (int)((firstUncommitedBucket + 1) % bucketNumber);"], [113, "      return (int) ((id / bucketSize) % bucketNumber);"], [117, "      return id / bucketSize;"]], "deleted": [[29, "   private static final long BKT_NUMBER = 1 << 10; // 2 ^ 10"], [31, "   private Bucket buckets[] = new Bucket[(int) BKT_NUMBER];"], [36, "   public Uncommitted(long startTimestamp) {"], [39, "      long ts = startTimestamp & ~(Bucket.getBucketSize() - 1);"], [40, "      LOG.debug(\"Start TS : \" + startTimestamp + \" firstUncom: \" + firstUncommitedBucket + \" Mask:\" + ts );"], [41, "      LOG.debug(\"BKT_NUMBER : \" + BKT_NUMBER + \" BKT_SIZE: \" + Bucket.getBucketSize());"], [50, "         bucket = new Bucket(getAbsolutePosition(id));"], [78, "      for (int i = firstUncommitedBucket; i != maxBucket ; i = (int)((i+1) % BKT_NUMBER)) {"], [103, "         firstUncommitedBucket = (int)((firstUncommitedBucket + 1) % BKT_NUMBER);"], [109, "      return (int) ((id / Bucket.getBucketSize()) % BKT_NUMBER);"], [113, "      return id / Bucket.getBucketSize();"]]}, "num_lines_added": 15, "num_lines_removed": 11}