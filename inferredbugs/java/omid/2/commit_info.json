{"hash": "3084da1f739c3fe17edf22d9e3356e1706e3a0c3", "message": "Address fpj's comments. Fix some other issues", "file_num_lines": 270, "diff_parsed": {"added": [[32, "import org.apache.commons.logging.Log;"], [33, "import org.apache.commons.logging.LogFactory;"], [35, "import org.apache.zookeeper.AsyncCallback.StringCallback;"], [40, "import org.apache.zookeeper.ZooDefs.Ids;"], [73, "        if(!config.isRecoveryEnabled()){"], [111, "        TSOServerConfig config = null;"], [139, ""], [140, "        synchronized void abort() {"], [141, "           this.ready = true;"], [142, "           this.state = null;"], [143, "           notify();"], [144, "        }"], [145, ""], [262, "        ctx.config = this.config;"], [287, "                if(!ctx.isReady()){"], [288, "                    // TODO make configurable maximum waiting"], [355, "                           LOG.error(\"Couldn't build state\", e);"], [356, "                           ((Context) ctx).abort();"], [357, "                           break;"]], "deleted": [[20, "import java.io.ByteArrayOutputStream;"], [21, "import java.io.DataOutputStream;"], [22, "import java.io.IOException;"], [41, "import org.apache.zookeeper.AsyncCallback.StatCallback;"], [42, "import org.apache.zookeeper.AsyncCallback.StringCallback;"], [44, "import org.apache.zookeeper.ZooDefs.Ids;"], [45, ""], [46, "import org.apache.commons.logging.Log;"], [47, "import org.apache.commons.logging.LogFactory;"], [52, "import com.yahoo.omid.tso.persistence.BookKeeperStateLogger.LedgerIdCreateCallback;"], [53, "import com.yahoo.omid.tso.persistence.BookKeeperStateLogger.LoggerWatcher;"], [54, "import com.yahoo.omid.tso.persistence.LoggerAsyncCallback.BuilderInitCallback;"], [81, "        if(config.getZkServers() == null){"], [146, ""], [287, "                while(!ctx.isReady()){"], [354, "                           // ignore"]]}, "num_lines_added": 19, "num_lines_removed": 16}