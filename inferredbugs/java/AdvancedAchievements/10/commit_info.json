{"hash": "8339169e1edb09c422a67234df2ab907aa56e526", "message": "Support for multiple items in rewards (#779)\n\n* Support for multiple item rewards\r\n\r\n* Update grammar in code for multiple item rewards\r\n\r\n* Include multi-item reward in config (Needs translated code comment)\r\n\r\n* Update more grammar in code for multiple reward items\r\n\r\n* Add back old item reward methods and mark them as deprecated\r\n\r\n* Add space to multi item reward example in config\r\n\r\n* Maven formatter run for multi item reward changes", "file_num_lines": 163, "diff_parsed": {"added": [[39, "\tprivate static final Pattern MULTIPLE_REWARDS_SPLITTER = Pattern.compile(\";\\\\s*\");"], [100, "\t\t\tItemStack[] items = getItemRewards(path, player);"], [101, "\t\t\tfor (ItemStack item : items) {"], [102, "\t\t\t\tItemMeta itemMeta = item.getItemMeta();"], [103, "\t\t\t\tString name = itemMeta.hasDisplayName() ? itemMeta.getDisplayName() : getItemName(item);"], [104, "\t\t\t\trewardTypes.add(StringUtils.replaceEach(langListRewardItem, new String[] { \"AMOUNT\", \"ITEM\" },"], [105, "\t\t\t\t\t\tnew String[] { Integer.toString(item.getAmount()), name }));"], [106, "\t\t\t}"], [175, "\tpublic ItemStack[] getItemRewards(String path, Player player) {"], [176, "\t\tString itemString = StringUtils.normalizeSpace(mainConfig.getString(path + \".Item\", \"\"));"], [177, "\t\tif (!itemString.contains(\" \")) {"], [181, "\t\tString[] itemStrings = MULTIPLE_REWARDS_SPLITTER.split(itemString);"], [182, "\t\tItemStack[] itemData = new ItemStack[itemStrings.length];"], [183, "\t\tfor (int i = 0; i < itemStrings.length; i++) {"], [184, "\t\t\tString[] parts = StringUtils.split(itemStrings[i]);"], [185, "\t\t\tOptional<Material> rewardMaterial = materialHelper.matchMaterial(parts[0],"], [186, "\t\t\t\t\t\"config.yml (\" + (path + \".Item\") + \")\");"], [187, "\t\t\tif (rewardMaterial.isPresent()) {"], [188, "\t\t\t\tItemStack item = new ItemStack(rewardMaterial.get(), NumberUtils.toInt(parts[1], 1));"], [189, "\t\t\t\tItemMeta meta = item.getItemMeta();"], [190, "\t\t\t\tString name = replacePlayerPlaceholders(StringUtils.join(parts, \" \", 2, parts.length), player);"], [191, "\t\t\t\tif (!name.isEmpty()) {"], [192, "\t\t\t\t\tmeta.setDisplayName(name);"], [193, "\t\t\t\t}"], [194, "\t\t\t\titem.setItemMeta(meta);"], [195, "\t\t\t\titemData[i] = item;"], [196, "\t\t\t} else {"], [197, "\t\t\t\treturn null;"], [200, "\t\treturn itemData;"], [221, "\t\treturn MULTIPLE_REWARDS_SPLITTER.split(replacePlayerPlaceholders(commandReward, player));"]], "deleted": [[39, "\tprivate static final Pattern MULTIPLE_REWARD_COMMANDS_SPLITTER = Pattern.compile(\";\\\\s*\");"], [100, "\t\t\tItemStack itemReward = getItemReward(path, player);"], [101, "\t\t\tItemMeta itemMeta = itemReward.getItemMeta();"], [102, "\t\t\tString name = itemMeta.hasDisplayName() ? itemMeta.getDisplayName() : getItemName(itemReward);"], [103, "\t\t\trewardTypes.add(StringUtils.replaceEach(langListRewardItem, new String[] { \"AMOUNT\", \"ITEM\" },"], [104, "\t\t\t\t\tnew String[] { Integer.toString(itemReward.getAmount()), name }));"], [173, "\tpublic ItemStack getItemReward(String path, Player player) {"], [174, "\t\tString itemReward = StringUtils.normalizeSpace(mainConfig.getString(path + \".Item\", \"\"));"], [175, "\t\tif (!itemReward.contains(\" \")) {"], [179, "\t\tString[] parts = StringUtils.split(itemReward);"], [180, "\t\tOptional<Material> rewardMaterial = materialHelper.matchMaterial(parts[0], \"config.yml (\" + (path + \".Item\") + \")\");"], [181, "\t\tif (rewardMaterial.isPresent()) {"], [182, "\t\t\tItemStack item = new ItemStack(rewardMaterial.get(), NumberUtils.toInt(parts[1], 1));"], [183, "\t\t\tItemMeta meta = item.getItemMeta();"], [184, "\t\t\tString name = replacePlayerPlaceholders(StringUtils.join(parts, \" \", 2, parts.length), player);"], [185, "\t\t\tif (!name.isEmpty()) {"], [186, "\t\t\t\tmeta.setDisplayName(name);"], [188, "\t\t\titem.setItemMeta(meta);"], [189, "\t\t\treturn item;"], [191, "\t\treturn null;"], [212, "\t\treturn MULTIPLE_REWARD_COMMANDS_SPLITTER.split(replacePlayerPlaceholders(commandReward, player));"]]}, "num_lines_added": 30, "num_lines_removed": 21}