{"hash": "fb2e52db5464459647bf8f2f58f62462d1be6f5c", "message": "Addition to Shridhar PR (#253)\n\n* adding regex to remove unwanted chars from device name\r\n\r\n* Fixing the video logs\r\n\r\n* Fixing Lint issues\r\n\r\n* added support for simulator video recording", "file_num_lines": 167, "diff_parsed": {"added": [[4, "import com.appium.ios.IOSDeviceConfiguration;"], [6, "import com.appium.manager.AppiumDriverManager;"], [8, "import com.thoughtworks.device.SimulatorManager;"], [26, "    private SimulatorManager simulatorManager;"], [27, "    ThreadLocal<Process> simulatorRecordSession = new ThreadLocal<>();"], [28, ""], [29, "    public Flick() {"], [30, "        simulatorManager = new SimulatorManager();"], [31, "    }"], [43, "        if (AppiumDeviceManager.getDeviceUDID().length()"], [44, "                == IOSDeviceConfiguration.SIM_UDID_LENGTH) {"], [45, "            stopRunningProcess(getPid(simulatorRecordSession.get()));"], [46, "            System.out.println(\"Killed .........\");"], [47, "        } else {"], [48, "            flickRecordingCommand(\"stop\", className, methodName, videoFileName);"], [49, "        }"], [50, ""], [64, "        if (AppiumDeviceManager.getDeviceUDID().length()"], [65, "                == IOSDeviceConfiguration.SIM_UDID_LENGTH) {"], [66, "            String videoPath = System.getProperty(\"user.dir\");"], [67, "            String videoLocationIOS ="], [68, "                    videoPath + \"/target/screenshot/iOS/\" + AppiumDeviceManager.getDeviceUDID()"], [69, "                            + \"/\" + className + \"/\" + methodName;"], [70, "            File file = new File(videoLocationIOS);"], [71, "            if (!file.exists()) {"], [72, "                file.mkdirs();"], [73, "            }"], [74, "            simulatorRecordSession.set(simulatorManager"], [75, "                    .startScreenRecording(AppiumDeviceManager.getDeviceUDID(),"], [76, "                    videoLocationIOS + \"/\" + videoFileName + \".mp4\"));"], [77, "        } else {"], [78, "            flickRecordingCommand(\"start\", className, methodName, videoFileName);"], [79, "        }"], [80, ""], [179, "        stopRunningProcess(processId);"], [180, "    }"], [181, ""], [182, "    private void stopRunningProcess(Integer processId) throws IOException {"], [188, "            String command = \"kill -2 \" + processId;"], [192, "                runCommand(command);"]], "deleted": [[34, "        flickRecordingCommand(\"stop\", className, methodName, videoFileName);"], [48, "        flickRecordingCommand(\"start\", className, methodName, videoFileName);"], [152, "            String command = \"kill \" + processId;"], [156, "                runCommandThruProcess(command);"]]}, "num_lines_added": 40, "num_lines_removed": 4}