{"hash": "8a22ee2a08d3d00a2085459c5f1941648a12ec98", "message": "ZOOKEEPER-108. Fix sync operation reordering on a Quorum. (Flavio Paiva Junqueira via mahadev)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/zookeeper/trunk@683707 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 337, "diff_parsed": {"added": [[376, "                        if(pendingSyncs.containsKey(zxid)){"], [377, "                            sendSync(syncHandler.get(pendingSyncs.get(zxid).sessionId), pendingSyncs.get(zxid));"], [378, "                            syncHandler.remove(pendingSyncs.get(zxid));"], [379, "                            pendingSyncs.remove(zxid);"], [380, "                        }"], [546, "        if(f != null){"], [547, "            QuorumPacket qp = new QuorumPacket(Leader.SYNC, 0, null, null);"], [548, "            f.queuePacket(qp);"], [549, "        }"], [550, "        else{"], [551, "            LOG.warn(\"Committing sync: \" + r.cxid );"], [552, "            zk.commitProcessor.commit(r);"], [553, "        }"]], "deleted": [[465, ""], [466, "        if(pendingSyncs.containsKey(zxid)){"], [467, "            sendSync(syncHandler.get(pendingSyncs.get(zxid).sessionId), pendingSyncs.get(zxid));"], [468, "            syncHandler.remove(pendingSyncs.get(zxid));"], [469, "            pendingSyncs.remove(zxid);"], [470, "        }"], [547, "        QuorumPacket qp = new QuorumPacket(Leader.SYNC, 0, null, null);"], [548, "        f.queuePacket(qp);"]]}, "num_lines_added": 13, "num_lines_removed": 8}