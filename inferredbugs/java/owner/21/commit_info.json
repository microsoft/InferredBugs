{"hash": "5a803b4da089e5a4008d7b068668c7b5d418a500", "message": "Revert \"cleanup\"\n\nThis reverts commit 0e1a60fcd18fa67f47ca0a9f63105cc2e054a332.", "file_num_lines": 169, "diff_parsed": {"added": [[28, "import static java.io.File.createTempFile;"], [71, "        File parent = target.getParentFile();"], [72, "        parent.mkdirs();"], [73, "        if (isWindows()) {"], [74, "            store(target, p);"], [75, "        } else {"], [76, "            File tempFile = createTempFile(target.getName(), \".temp\", parent);"], [77, "            store(tempFile, p);"], [78, "            rename(tempFile, target);"], [79, "        }"], [95, "    private static boolean isWindows() {"], [96, "        return System.getProperty(\"os.name\").toLowerCase().indexOf(\"win\") >= 0;"], [97, "    }"], [98, ""], [104, "        File parent = target.getParentFile();"], [105, "        parent.mkdirs();"], [106, "        storeJar(target, entryName, props);"], [107, "    }"], [108, ""], [109, "    private static void rename(File source, File target) throws IOException {"], [110, "        if (!source.renameTo(target))"], [111, "            throw new IOException(String.format(\"Failed to overwrite %s to %s\", source.toString(), target.toString()));"], [112, "    }"], [113, ""], [114, "    private static void storeJar(File target, String entryName, Properties props) throws IOException {"], [117, "        JarOutputStream output = new JarOutputStream(new FileOutputStream(target));"]], "deleted": [[70, "        File tempFile = createTempFile(target);"], [71, "        store(tempFile, p);"], [72, "        rename(tempFile, target);"], [95, "        FileOutputStream fos = new FileOutputStream(target);"], [96, "        JarOutputStream output = new JarOutputStream(fos);"], [104, "            output.flush();"], [108, "            fos.close();"], [112, "    private static File createTempFile(File target) throws IOException {"], [113, "        File parent = target.getParentFile();"], [114, "        parent.mkdirs();"], [115, "        return File.createTempFile(target.getName(), \".temp\", parent);"], [116, "    }"], [117, ""], [118, "    private static void rename(File source, File target) throws IOException {"], [119, "        if (!source.renameTo(target))"], [120, "            throw new IOException(String.format(\"Failed to overwrite %s to %s\", source.toString(), target.toString()));"], [121, "    }"], [122, ""]]}, "num_lines_added": 26, "num_lines_removed": 18}