{"hash": "01b7ca5bfd57a72b6734d529e88f646512e76e73", "message": "multi-monitor problems: further revised the respective classes", "file_num_lines": 285, "diff_parsed": {"added": [[17, " * INTERNAL USE implements the screen overlay used with the capture feature"], [28, "  private Rectangle screenFrame = null;"], [33, "  private Screen scrOCP;"], [44, "  private String promptMsg;"], [49, "    super();"], [62, "    scrOCP = scr;"], [67, ""], [70, "        if (promptMsg == null) {"], [73, "        promptMsg = null;"], [82, "        if (promptMsg != null) {"], [83, "          promptMsg = null;"], [88, "        srcScreenId = scrOCP.getIdFromPoint(srcx, srcy);"], [89, "        srcScreenLocation = new Location(srcx + scrOCP.x, srcy + scrOCP.y);"], [108, "          destScreenLocation = new Location(destx + scrOCP.x, desty + scrOCP.y);"], [134, "          if (promptMsg != null) {"], [135, "            promptMsg = null;"], [184, "    captureScreen(scrOCP);"], [185, "    this.setBounds(scrOCP.getBounds());"], [186, "    promptMsg = msg;"], [187, "    Debug.log(2, \"CapturePrompt: \" + promptMsg);"], [213, "    rectSelection.x += scrOCP.x;"], [214, "    rectSelection.y += scrOCP.y;"], [231, "      Debug.error(e.getMessage());"], [238, "    if (promptMsg == null) {"], [243, "    int sw = g2d.getFontMetrics().stringWidth(promptMsg);"], [250, "      g2d.drawString(promptMsg, cx, cy);"], [289, "    if (screenFrame == null) {"], [290, "      screenFrame = Screen.getBounds(scrId);"], [291, "      Rectangle ubound = scrOCP.getBounds();"], [292, "      screenFrame.x -= ubound.x;"], [293, "      screenFrame.y -= ubound.y;"], [294, "      int sw = (int) (strokeScreenFrame.getLineWidth() / 2);"], [295, "      screenFrame.x += sw;"], [296, "      screenFrame.y += sw;"], [297, "      screenFrame.width -= sw * 2;"], [298, "      screenFrame.height -= sw * 2;"], [299, "    }"], [300, "    g2d.draw(screenFrame);"], [308, "        bi = new BufferedImage(scrOCP.w,"], [309, "                scrOCP.h, BufferedImage.TYPE_INT_RGB);"]], "deleted": [[17, " * INTERNAL USE"], [18, " * implements the screen overlay used with the capture feature"], [33, "  private Screen scr;"], [42, "  private ScreenUnion srcScreenUnion = null;"], [45, "  private String msg;"], [62, "    this.scr = scr;"], [63, ""], [70, "        if (msg == null) {"], [73, "        msg = null;"], [82, "        if (msg != null) {"], [83, "          msg = null;"], [88, "        srcScreenUnion = new ScreenUnion();"], [89, "        srcScreenId = srcScreenUnion.getIdFromPoint(srcx, srcy);"], [90, "        srcScreenLocation = new Location(srcx + srcScreenUnion.getBounds().x,"], [91, "                srcy + srcScreenUnion.getBounds().y);"], [110, "          destScreenLocation = new Location(destx + srcScreenUnion.getBounds().x,"], [111, "                  desty + srcScreenUnion.getBounds().y);"], [137, "          if (msg != null) {"], [138, "            msg = null;"], [187, "    captureScreen(scr);"], [188, "    this.setBounds(scr.getBounds());"], [189, "    this.setAlwaysOnTop(true);"], [190, "    this.msg = msg;"], [191, "    Debug.log(2, \"CapturePrompt: \" + this.msg);"], [217, "    rectSelection.x += scr.getBounds().x;"], [218, "    rectSelection.y += scr.getBounds().y;"], [235, "      e.printStackTrace();"], [238, "    /*"], [239, "     try{"], [240, "     ImageIO.write(crop, \"png\", new File(\"debug_crop.png\"));"], [241, "     }"], [242, "     catch(IOException e){}"], [243, "     */"], [248, "    if (msg == null) {"], [253, "    int sw = g2d.getFontMetrics().stringWidth(msg);"], [260, "      g2d.drawString(msg, cx, cy);"], [271, "      if (Screen.getNumberScreens() > 1) {"], [272, "        Rectangle selRect = new Rectangle(x1, y1, x2 - x1, y2 - y1);"], [273, "        Rectangle ubound = (new ScreenUnion()).getBounds();"], [274, "        selRect.x += ubound.x;"], [275, "        selRect.y += ubound.y;"], [276, "        Rectangle inBound = selRect.intersection(Screen.getBounds(srcScreenId));"], [277, "        x1 = inBound.x - ubound.x;"], [278, "        y1 = inBound.y - ubound.y;"], [279, "        x2 = x1 + inBound.width - 1;"], [280, "        y2 = y1 + inBound.height - 1;"], [281, "      }"], [282, ""], [287, ""], [296, ""], [311, "    Rectangle rect = Screen.getBounds(scrId);"], [312, "    Rectangle ubound = (new ScreenUnion()).getBounds();"], [315, "    rect.x -= ubound.x;"], [316, "    rect.y -= ubound.y;"], [317, "    int sw = (int) (strokeScreenFrame.getLineWidth() / 2);"], [318, "    rect.x += sw;"], [319, "    rect.y += sw;"], [320, "    rect.width -= sw * 2;"], [321, "    rect.height -= sw * 2;"], [322, "    g2d.draw(rect);"], [330, "        bi = new BufferedImage(scr.getBounds().width,"], [331, "                scr.getBounds().height, BufferedImage.TYPE_INT_RGB);"]]}, "num_lines_added": 40, "num_lines_removed": 62}