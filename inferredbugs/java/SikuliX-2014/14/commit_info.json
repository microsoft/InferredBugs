{"hash": "14f6f119d93da9e09b808912843cfdd888178c93", "message": "intermediate --- not running (Java 8 com.apple.eawt problem)", "file_num_lines": 2200, "diff_parsed": {"added": [[19, "import java.net.URLClassLoader;"], [123, ""], [128, "  public static synchronized SikuliIDE getInstance() {"], [277, "\t\tif (Settings.isMac()) {"], [278, "\t\t\tSystem.setProperty(\"apple.laf.useScreenMenuBar\", \"true\");"], [279, "\t\t\tSystem.setProperty(\"com.apple.mrj.application.apple.menu.about.name\", \"SikuliX-u8zIDE\");"], [280, "\t\t}"], [281, ""], [284, "      //TODO UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());"], [289, "\t\tSikuliIDE.getInstance().initNativeSupport();"], [290, ""], [291, "    SikuliIDE.getInstance().initSikuliIDE(args);"], [292, "  }"], [293, ""], [294, "  private void initNativeSupport() {"], [295, "\t\tlog(lvl, \"initNativeSupport: starting\");"], [296, "\t\tClass comAppleEawtApplication = null;"], [297, "\t\tMethod m = null;"], [298, "\t\tObject inst = null;"], [299, "    try {"], [300, "\t\t\t\tClass sysclass = URLClassLoader.class;"], [301, "\t\t\t\tcomAppleEawtApplication = sysclass.forName(\"com.apple.eawt.Application\");"], [302, "\t\t\t\tm = comAppleEawtApplication.getDeclaredMethod(\"getApplication\", null);"], [303, "\t\t\t\tinst = m.invoke(null, null);"], [304, "\t\t\t\tm = inst.getClass().getMethod(\"setAboutHandler\", new Class[]{Object.class});"], [305, "//\t\t\t\tm.invoke(inst, new Object[]{this});"], [306, "//      Application.getApplication().setAboutHandler(this);"], [307, "//      Application.getApplication().setPreferencesHandler(this);"], [308, "//      Application.getApplication().setQuitHandler(this);"], [309, "    } catch (Exception ex) {"], [310, "\t\t\tlog(lvl, \"initNativeSupport: error: %s\", ex.getMessage());"], [311, "\t\t\tSystem.exit(1);"], [312, "    }"], [313, "\t\tlog(lvl, \"initNativeSupport: success\");"], [314, "\t\tSystem.exit(1);"], [315, "  }"], [316, ""], [317, "\tpublic void handleAbout(Object evt) {"], [318, "    SikuliIDE.getInstance().doAbout();"], [319, "  }"], [320, ""], [321, "  public void handlePreferences(Object evt) {"], [322, "    SikuliIDE.getInstance().showPreferencesWindow();"], [323, "  }"], [324, ""], [325, "  public void handleQuitRequestWith(Object evt, Object resp) {"], [326, "\t// handleQuitRequestWith(AppEvent.QuitEvent evt, QuitResponse resp)"], [327, "\t\tif (!SikuliIDE.getInstance().quit()) {"], [328, "//      resp.cancelQuit();"], [329, "    } else {"], [330, "//      resp.performQuit();"], [334, "\t//<editor-fold defaultstate=\"collapsed\" desc=\"IDE setup and general\">"], [828, "\t\tboolean showAbout = true;"], [829, "\t\tboolean showPrefs = true;"], [830, "\t\tboolean showQuit = true;"], [831, ""], [832, "\t\tJMenuItem jmi;"], [836, "    if (showAbout) {"], [900, "    if (showPrefs) {"], [907, "    if (showQuit) {"], [1283, ""], [1995, ""], [1996, "//TODO get it working for OSX 10.10"], [2000, ""]], "deleted": [[17, "import java.lang.reflect.Constructor;"], [20, "//import java.util.*;"], [74, "  private static NativeSupport nativeSupport;"], [125, ""], [130, "  public static synchronized SikuliIDE getInstance(String args[]) {"], [133, "      sikulixIDE.initSikuliIDE(args);"], [138, "  public static synchronized SikuliIDE getInstance() {"], [139, "    return getInstance(null);"], [140, "  }"], [141, ""], [284, "    initNativeSupport();"], [287, "      //UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());"], [292, "    if (nativeSupport != null) {"], [293, "      nativeSupport.initApp(Debug.getDebugLevel() > 2 ? true : false);"], [294, "      try {"], [295, "        Thread.sleep(1000);"], [296, "      } catch (InterruptedException ie) {"], [297, "      }"], [299, "    SikuliIDE.getInstance(args);"], [302, "  //<editor-fold defaultstate=\"collapsed\" desc=\"IDE setup and general\">"], [311, "    if (nativeSupport != null) {"], [312, "      nativeSupport.initIDE(this);"], [313, "    }"], [314, ""], [415, "  static private void initNativeSupport() {"], [416, "//TODO IDE native Support"], [417, "//    String jb = FileManager.getJarName();"], [418, "//    ClassPool pool  = ClassPool.getDefault();"], [419, "//    try {"], [420, "//      pool.appendClassPath(jb);"], [421, "//      pool.find(\"resources.NativeSupportMac\");"], [422, "//      CtClass nsm = pool.get(\"resources.NativeSupportMac\");"], [423, "//      nativeSupport = (NativeSupport) nsm.toClass().newInstance();"], [424, "//    } catch (Exception ex) {"], [425, "//      log(-1, \"JavAssist: problem:%s\", ex.getMessage());"], [426, "//    }"], [427, "    String os = \"unknown\";"], [428, "    if (Settings.isWindows()) {"], [429, "      os = \"Windows\";"], [430, "    } else if (Settings.isMac()) {"], [431, "      os = \"Mac\";"], [432, "    } else if (Settings.isLinux()) {"], [433, "      os = \"Linux\";"], [434, "    }"], [435, "    String className = \"org.sikuli.ide.NativeSupport\" + os;"], [436, "    try {"], [437, "      Class c = Class.forName(className);"], [438, "      Constructor constr = c.getConstructor();"], [439, "      nativeSupport = (NativeSupport) constr.newInstance();"], [440, "      log(lvl, \"Native support found for \" + os);"], [441, "    } catch (Exception e) {"], [442, "      log(lvl, \"No native support for %s (%s)\", os, e.getMessage());"], [443, "    }"], [444, "  }"], [830, "    JMenuItem jmi;"], [834, "    if (!Settings.isMac()) {"], [898, "    if (!Settings.isMac()) {"], [905, "    if (!Settings.isMac()) {"], [1281, ""], [1993, ""], [1994, "//TODO get it working for OSX 10.10"], [1998, ""]]}, "num_lines_added": 64, "num_lines_removed": 62}