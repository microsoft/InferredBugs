{"hash": "9a75e83be85d686ce0862e914d5c7c1ebf695992", "message": "intermediate: callback for FindFailed and ImageMissing", "file_num_lines": 2381, "diff_parsed": {"added": [[70, "  private Object findFailedHandler = FindFailed.getFindFailedHandler();"], [71, "  private Object imageMissingHandler = FindFailed.getImageMissingHandler();"], [759, "    imageMissingHandler = setHandler(handler, ObserveEvent.Type.MISSING);"], [2146, "  private <PSI> Boolean handleFindFailed(PSI target, Image img) {"], [2147, "    log(lvl, \"handleFindFailed: %s\", target);"], [2149, "    ObserveEvent evt = null;"], [2150, "    FindFailedResponse response = findFailedResponse;"], [2151, "    if (FindFailedResponse.HANDLE.equals(response)) {"], [2152, "      ObserveEvent.Type type = ObserveEvent.Type.FINDFAILED;"], [2153, "      if (findFailedHandler != null && ((ObserverCallBack) findFailedHandler).getType().equals(type)) {"], [2154, "        log(lvl, \"handleFindFailed: Response.HANDLE: calling handler\");"], [2155, "        evt = new ObserveEvent(\"\", type, target, img, this, 0);"], [2156, "        ((ObserverCallBack) findFailedHandler).findfailed(evt);"], [2157, "        response = evt.getResponse();"], [2158, "      }"], [2159, "    }"], [2160, "    if (FindFailedResponse.PROMPT.equals(response)) {"], [2161, "      response = handleFindFailedShowDialog(img, false);"], [2162, "    }"], [2178, "    }"], [2184, "    ObserveEvent evt = null;"], [2185, "    FindFailedResponse response = findFailedResponse;"], [2186, "    if (FindFailedResponse.HANDLE.equals(response)) {"], [2187, "      ObserveEvent.Type type = ObserveEvent.Type.MISSING;"], [2188, "      if (imageMissingHandler != null && ((ObserverCallBack) imageMissingHandler).getType().equals(type)) {"], [2189, "        log(lvl, \"handleImageMissing: Response.HANDLE: calling handler\");"], [2190, "        evt = new ObserveEvent(\"\", type, null, img, this, 0);"], [2191, "        ((ObserverCallBack) imageMissingHandler).missing(evt);"], [2192, "        response = evt.getResponse();"], [2193, "      } else {"], [2194, "        response = FindFailedResponse.PROMPT;"], [2195, "      }"], [2196, "    }"], [2197, "    if (FindFailedResponse.PROMPT.equals(response)) {"], [2198, "      response = handleFindFailedShowDialog(img, true);"], [2199, "    }"], [2227, "    FindFailedResponse response;"], [2228, "    FindFailedDialog fd = new FindFailedDialog(img, shouldCapture);"], [2229, "    fd.setVisible(true);"], [2230, "    response = fd.getResponse();"], [2231, "    fd.dispose();"], [2232, "    wait(0.5);"], [2258, "      lastMatch = doFind(target, img, null);"], [2269, "        response = handleFindFailed(target, img);"], [2305, "    String targetStr = img.getName();"], [2306, "    Boolean response = true;"], [2308, "      response = handleImageMissing(img, false);"], [2310, "    while (null != response && response) {"], [2321, "        response = handleFindFailed(target, img);"], [2382, "      if (!handleFindFailed(target, img)) {"], [2657, "      if (!handleFindFailed(target, img)) {"], [2773, "  private <PSI> Match doFind(PSI ptn, Image img, RepeatableFind repeating) {"], [2797, "//      Image img = null;"], [2802, "//          img = Image.create((String) ptn);"], [2823, "//        img = ((Pattern) ptn).getImage();"], [2833, "//        img = ((Image) ptn);"], [3050, "      _match = doFind(_target, _image, this);"]], "deleted": [[70, "  private Object findFailedHandler = FindFailed.getHandler();"], [758, "    findFailedHandler = setHandler(handler, ObserveEvent.Type.MISSING);"], [2145, "  private Boolean handleFindFailed(Image img) {"], [2146, "    FindFailedResponse response = handleFindFailedShowDialog(img, false);"], [2163, "    } else if (FindFailedResponse.HANDLE.equals(response)) {"], [2164, "      log(-1, \"handleFindFailed: FindFailedResponse.HANDLE not implemented\");"], [2165, "    }"], [2171, "    FindFailedResponse response = handleFindFailedShowDialog(img, true);"], [2191, "    } else if (findFailedResponse.HANDLE.equals(response)) {"], [2192, "      log(-1, \"handleImageMissing: HANDLE: not implemented\");"], [2193, "      return null;"], [2202, "    FindFailedResponse response = findFailedResponse;"], [2203, "    if (response == FindFailedResponse.PROMPT) {"], [2204, "      FindFailedDialog fd = new FindFailedDialog(img, shouldCapture);"], [2205, "      fd.setVisible(true);"], [2206, "      response = fd.getResponse();"], [2207, "      fd.dispose();"], [2208, "      wait(0.5);"], [2209, "    }"], [2235, "      lastMatch = doFind(img, null);"], [2246, "        response = handleFindFailed(img);"], [2280, "    String targetStr = target.toString();"], [2281, "    if (target instanceof String) {"], [2282, "      targetStr = targetStr.trim();"], [2283, "    }"], [2286, "    boolean shouldDoFind = true;"], [2288, "      shouldDoFind = handleImageMissing(img, false);"], [2290, "    while (shouldDoFind) {"], [2291, "//      try {"], [2302, "        Boolean response = handleFindFailed(img);"], [2363, "      if (!handleFindFailed(img)) {"], [2638, "      if (!handleFindFailed(img)) {"], [2754, "  private <PSI> Match doFind(PSI ptn, RepeatableFind repeating) {"], [2778, "      Image img = null;"], [2783, "          img = Image.create((String) ptn);"], [2804, "        img = ((Pattern) ptn).getImage();"], [2814, "        img = ((Image) ptn);"], [3031, "      _match = doFind(_target, this);"]]}, "num_lines_added": 57, "num_lines_removed": 38}