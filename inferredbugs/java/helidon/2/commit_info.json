{"hash": "85a65db41e2ea3e8c4353549f9fc7bca14439b33", "message": "1. Improvements to BulkheadHelper 2. New thread factory for executor and 3. Exclude list for some async bulkhead tests.\n\nSigned-off-by: Santiago Pericas-Geertsen <Santiago.PericasGeertsen@oracle.com>", "file_num_lines": 252, "diff_parsed": {"added": [[131, "                                                       : MAX_THREAD_POOL_QUEUE_SIZE)));"], [156, "            bulkheadHelper = new BulkheadHelper(commandKey, introspector.getBulkhead());"], [158, "            if (bulkheadHelper.isAtMaxRunningInvocations()) {"], [162, "            // Register gauges for this method"], [166, "                                                () -> bulkheadHelper.runningInvocations());"], [171, "                                                    () -> bulkheadHelper.waitingInvocations());"], [190, "     * Code to run as part of this command. Called from superclass."], [199, ""], [207, "        // Finally, invoke the user method"], [208, "        try {"], [209, "            return context.proceed();"], [210, "        } finally {"], [211, "            if (introspector.hasBulkhead()) {"], [212, "                bulkheadHelper.markAsNotRunning(this);"], [213, "            }"], [239, "        // Track invocation in a bulkhead"], [240, "        if (introspector.hasBulkhead()) {"], [241, "            bulkheadHelper.trackInvocation(this);"], [242, "        }"], [243, ""], [253, ""], [322, "        // Untrack invocation in a bulkhead"], [324, "            bulkheadHelper.untrackInvocation(this);"]], "deleted": [[131, "                                                       : MAX_THREAD_POOL_QUEUE_SIZE"], [132, "                                                   )));"], [157, "            bulkheadHelper = new BulkheadHelper(this, introspector.getBulkhead());"], [159, "            if (bulkheadHelper.isQueueFull()) {"], [162, "            bulkheadHelper.addCommand(this);"], [164, "            // Register guages for this method"], [168, "                                                () -> bulkheadHelper.runningCommands());"], [173, "                                                    () -> bulkheadHelper.waitingCommands());"], [192, "     * Code to run as part of this command."], [208, "        // Command execution"], [209, "        Object result = context.proceed();"], [210, ""], [211, "        if (introspector.hasBulkhead()) {"], [212, "            bulkheadHelper.markAsNotRunning(this);"], [214, "        return result;"], [316, "        // Update bulkhead helper"], [318, "            bulkheadHelper.removeCommand(this);"]]}, "num_lines_added": 23, "num_lines_removed": 17}