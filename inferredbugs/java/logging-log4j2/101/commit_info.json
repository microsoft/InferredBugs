{"hash": "aff6553cd7dcfd11d70096a2e0831a0a4c077468", "message": "Reduce code duplication in jms servers.", "file_num_lines": 15, "diff_parsed": {"added": [[24, "public class JmsTopicReceiver extends AbstractJmsReceiver {"], [25, ""], [26, "    private JmsTopicReceiver() {"], [27, "    }"], [31, "     *"], [36, "        final JmsTopicReceiver receiver = new JmsTopicReceiver();"], [37, "        receiver.doMain(args);"], [40, "    @Override"], [41, "    protected void usage() {"], [42, "        System.err.println(\"Wrong number of arguments.\");"]], "deleted": [[20, "import java.io.BufferedReader;"], [21, "import java.io.InputStreamReader;"], [22, "import java.nio.charset.Charset;"], [23, ""], [24, "import org.apache.logging.log4j.core.net.server.JmsServer;"], [25, ""], [30, "public abstract class JmsTopicReceiver {"], [38, "        if (args.length != 4) {"], [39, "            usage(\"Wrong number of arguments.\");"], [40, "        }"], [41, ""], [42, "        final String tcfBindingName = args[0];"], [43, "        final String topicBindingName = args[1];"], [44, "        final String username = args[2];"], [45, "        final String password = args[3];"], [46, "        final JmsServer server = new JmsServer(tcfBindingName, topicBindingName, username, password);"], [47, "        server.start();"], [48, ""], [49, "        final Charset enc = Charset.defaultCharset();"], [50, "        final BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in, enc));"], [51, "        // Loop until the word \"exit\" is typed"], [52, "        System.out.println(\"Type \\\"exit\\\" to quit JmsTopicReceiver.\");"], [53, "        while (true) {"], [54, "            final String line = stdin.readLine();"], [55, "            if (line == null || line.equalsIgnoreCase(\"exit\")) {"], [56, "                System.out.println(\"Exiting. Kill the application if it does not exit \""], [57, "                    + \"due to daemon threads.\");"], [58, "                server.stop();"], [59, "                return;"], [60, "            }"], [61, "        }"], [64, "    private static void usage(final String msg) {"], [65, "        System.err.println(msg);"], [68, "        System.exit(1);"]]}, "num_lines_added": 10, "num_lines_removed": 34}