{"hash": "9c4b9eb93fea2850a29eb54dbfc87f2a7f50f14b", "message": "[LOG4J2-696] RegexFilter does not match multiline log messages.\n\ngit-svn-id: https://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk@1608511 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 58, "diff_parsed": {"added": [[19, "import static org.hamcrest.CoreMatchers.equalTo;"], [20, "import static org.hamcrest.MatcherAssert.assertThat;"], [21, "import static org.junit.Assert.assertNull;"], [22, "import static org.junit.Assert.assertSame;"], [23, "import static org.junit.Assert.assertTrue;"], [27, "import org.apache.logging.log4j.core.Filter.Result;"], [46, "    public void testThresholds() throws Exception {"], [47, "        RegexFilter filter = RegexFilter.createFilter(\".* test .*\", null, false, null, null);"], [51, "                filter.filter(null, Level.DEBUG, null, \"This is a test message\", (Throwable) null));"], [53, "        LogEvent event = new Log4jLogEvent(null, null, null, Level.DEBUG, new SimpleMessage(\"Another test message\"),"], [54, "                null);"], [58, "        filter = RegexFilter.createFilter(null, null, false, null, null);"], [63, "    public void testDotAllPattern() throws Exception {"], [64, "        String singleLine = \"test single line matches\";"], [65, "        String multiLine = \"test multi line matches\\nsome more lines\";"], [66, "        RegexFilter filter = RegexFilter.createFilter(\".*line.*\", new String[] { \"DOTALL\", \"COMMENTS\" }, false,"], [67, "                Filter.Result.DENY, Filter.Result.ACCEPT);"], [68, "        Result singleLineResult = filter.filter(null, null, null, singleLine, (Throwable) null);"], [69, "        Result multiLineResult = filter.filter(null, null, null, multiLine, (Throwable) null);"], [70, "        assertThat(singleLineResult, equalTo(Result.DENY));"], [71, "        assertThat(multiLineResult, equalTo(Result.DENY));"], [72, "    }"], [73, ""], [74, "    @Test"], [75, "    public void testNoMsg() throws Exception {"], [76, "        final RegexFilter filter = RegexFilter.createFilter(\".* test .*\", null, false, null, null);"]], "deleted": [[19, "import java.util.regex.Pattern;"], [24, "import org.apache.logging.log4j.core.config.plugins.util.TypeConverters;"], [32, "import static org.junit.Assert.*;"], [33, ""], [44, "    public void testThresholds() {"], [45, "        RegexFilter filter = RegexFilter.createFilter(Pattern.compile(\".* test .*\"), false, null, null);"], [49, "            filter.filter(null, Level.DEBUG, null, \"This is a test message\", (Throwable) null));"], [51, "        LogEvent event = new Log4jLogEvent(null, null, null, Level.DEBUG, new SimpleMessage(\"Another test message\"), null);"], [55, "        filter = RegexFilter.createFilter((Pattern) TypeConverters.convert(\"* test *\", Pattern.class, null), false, null, null);"], [60, "    public void testNoMsg() {"], [61, "        final RegexFilter filter = RegexFilter.createFilter(Pattern.compile(\".* test .*\"), false, null, null);"], [67, ""]]}, "num_lines_added": 26, "num_lines_removed": 12}