{"hash": "74b34136eb961e5a4dcfeb4e37fca7866a8b9dc7", "message": "Sanitize baseUrl only for http and https scheme", "file_num_lines": 63, "diff_parsed": {"added": [[7, "import java.util.Arrays;"], [8, "import java.util.Objects;"], [55, "     * Sanitize base url from current url by using the same scheme if http/https."], [57, "     * @param baseUriSpec base URI"], [58, "     * @param uriSpec     current URI"], [69, "            baseUri = ensureScheme(baseUri, \"http\");"], [71, "            final URI uri = uriSpec == null ? null : URI.create(uriSpec);"], [72, "            final String scheme = uri == null || !Objects.equals(baseUri.getAuthority(), uri.getAuthority()) || !Arrays"], [73, "                    .asList(new String[] {\"http\", \"https\"}).contains(uri.getScheme()) ? baseUri.getScheme() : uri.getScheme();"], [85, "    /**"], [86, "     * Ensure a scheme is defined on the URI."], [87, "     *"], [88, "     * @param uri           uri"], [89, "     * @param defaultScheme scheme to use when no scheme is defined on uri"], [90, "     * @return uri with scheme defined"], [91, "     * @throws URISyntaxException"], [92, "     */"], [93, "    private static URI ensureScheme(final URI uri, final String defaultScheme) throws URISyntaxException {"], [94, "        String fixedBaseUriSpec = uri.toString();"], [95, "        if (uri.getScheme() == null) {"], [96, "            while (!fixedBaseUriSpec.startsWith(\"//\")) {"], [97, "                fixedBaseUriSpec = \"/\" + fixedBaseUriSpec;"], [98, "            }"], [99, "            return new URIBuilder(fixedBaseUriSpec).setScheme(defaultScheme).build();"], [100, "        }"], [101, "        return uri;"], [102, "    }"], [103, ""]], "deleted": [[53, "     * Sanitize base url from current url, by using the same scheme."], [55, "     * @param baseUriSpec"], [56, "     * @param uriSpec"], [67, "            String fixedBaseUriSpec = baseUriSpec;"], [68, "            if (baseUri.getScheme() == null) {"], [69, "                while (!fixedBaseUriSpec.startsWith(\"//\")) {"], [70, "                    fixedBaseUriSpec = \"/\" + fixedBaseUriSpec;"], [71, "                }"], [72, "                baseUri = new URIBuilder(fixedBaseUriSpec).setScheme(\"http\").build();"], [73, "            }"], [75, "            URI uri = uriSpec == null ? null : URI.create(uriSpec);"], [76, "            String scheme = uri == null || !baseUri.getAuthority().equals(uri.getAuthority()) ? baseUri.getScheme() : uri.getScheme();"]]}, "num_lines_added": 28, "num_lines_removed": 12}