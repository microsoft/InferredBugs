{"hash": "8fbda29caab9e37812bcf2f4682c6e19264b9d83", "message": "send server exception msg to client (#126)", "file_num_lines": 642, "diff_parsed": {"added": [[296, "            if (!httpResponse.status().equals(HttpResponseStatus.OK)) {"], [297, "                String body = new String(bytes);"], [298, "                String message = String.format(\"http status=%d, message=%s\","], [299, "                        httpResponse.status().code(), body);"], [300, "                LOG.warn(\"{}\", message);"], [301, "                response.setException(new RpcException(RpcException.SERVICE_EXCEPTION, message));"], [302, "                return response;"], [303, "            }"], [304, ""], [440, "            byte[] responseBytes;"], [442, "                httpResponse = new DefaultFullHttpResponse("], [443, "                        HttpVersion.HTTP_1_1, HttpResponseStatus.INTERNAL_SERVER_ERROR);"], [444, "                responseBytes = response.getException().toString().getBytes();"], [451, "                    responseBytes = encodeBody(protocolType,"], [457, "                    httpResponse = new DefaultFullHttpResponse("], [458, "                            HttpVersion.HTTP_1_1, HttpResponseStatus.INTERNAL_SERVER_ERROR);"], [459, "                    responseBytes = response.getException().toString().getBytes();"], [462, "            httpResponse.content().writeBytes(responseBytes);"], [463, "            addHttpResponseHeaders(httpResponse, response, httpRequest);"], [622, "        fullHttpResponse.headers().set(HttpHeaderNames.CONTENT_LENGTH, fullHttpResponse.content().readableBytes());"]], "deleted": [[292, "            if (!httpResponse.status().equals(HttpResponseStatus.OK)) {"], [293, "                LOG.warn(\"status={}\", httpResponse.status());"], [294, "                response.setException(new RpcException(RpcException.SERVICE_EXCEPTION,"], [295, "                        \"http status=\" + httpResponse.status()));"], [296, "                return response;"], [297, "            }"], [298, ""], [439, "                httpResponse ="], [440, "                        new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.INTERNAL_SERVER_ERROR);"], [443, "                addHttpResponseHeaders(httpResponse, response, httpRequest);"], [448, "                    byte[] responseBytes = encodeBody(protocolType,"], [451, "                    httpResponse.content().writeBytes(responseBytes);"], [452, "                    httpResponse.headers().set(HttpHeaderNames.CONTENT_LENGTH, responseBytes.length);"], [456, "                    httpResponse ="], [457, "                            new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.INTERNAL_SERVER_ERROR);"]]}, "num_lines_added": 20, "num_lines_removed": 15}