{"hash": "6207097b63e2a0ef4ff54832edb3d27555e37422", "message": "RiakObject.copyData() should also copy valueStream\nRiakObject.fetch() does a more efficient shallow copy and replaces the FetchReponse object", "file_num_lines": 336, "diff_parsed": {"added": [[18, "import java.util.Arrays;"], [170, "        if (object.value != null) {"], [171, "            value = Arrays.copyOf(object.value, object.value.length);"], [176, "        valueStream = object.valueStream;"], [177, "        valueStreamLength = object.valueStreamLength;"], [178, ""], [180, "        if (object.links != null) {"], [181, "            for (RiakLink link : object.links) {"], [186, "        if (object.usermeta != null) {"], [187, "            usermeta.putAll(object.usermeta);"], [189, "        contentType = object.contentType;"], [190, "        vclock = object.vclock;"], [191, "        lastmod = object.lastmod;"], [192, "        vtag = object.vtag;"], [193, "    }"], [194, ""], [195, "    /**"], [196, "     * Perform a shallow copy of the object"], [197, "     */"], [198, "    void shallowCopy(RiakObject object) {"], [199, "        this.value = object.value;"], [200, "        this.links = object.links;"], [201, "        this.usermeta = object.usermeta;"], [202, "        this.contentType = object.contentType;"], [203, "        this.vclock = object.vclock;"], [204, "        this.lastmod = object.lastmod;"], [205, "        this.vtag = object.vtag;"], [206, "        this.valueStream = object.valueStream;"], [207, "        this.valueStreamLength = object.valueStreamLength;"], [455, "        if (r.getObject() != null) {"], [456, "            RiakObject other = r.getObject();"], [457, "            shallowCopy(other);"], [458, "            r.setObject(this);"]], "deleted": [[169, "        if (object.getValue() != null) {"], [170, "            value = object.getValue().getBytes();"], [176, "        if (object.getLinks() != null) {"], [177, "            for (RiakLink link : object.getLinks()) {"], [182, "        if (object.getUsermeta() != null) {"], [183, "            usermeta.putAll(object.getUsermeta());"], [185, "        contentType = object.getContentType();"], [186, "        vclock = object.getVclock();"], [187, "        lastmod = object.getLastmod();"], [188, "        vtag = object.getVtag();"], [436, "        if (r.isSuccess()) {"], [437, "            this.copyData(r.getObject());"]]}, "num_lines_added": 33, "num_lines_removed": 12}