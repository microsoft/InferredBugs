{"hash": "ea7a6d96e67fbcfbe661e1e461e5b6c2c85f5bda", "message": "Remove the search precommit hook from the list of precommit hooks if it is present", "file_num_lines": 220, "diff_parsed": {"added": [[16, "import java.util.ArrayList;"], [56, "    private Collection<NamedFunction> precommitHooks;"], [57, "    private Collection<NamedErlangFunction> postcommitHooks;"], [88, "        this.precommitHooks = bucket.getPrecommitHooks();"], [89, "        this.postcommitHooks = bucket.getPostcommitHooks();"], [97, "        final BucketProperties propsToStore = builder.precommitHooks(precommitHooks).postcommitHooks(postcommitHooks).build();"], [183, "        if(preCommitHook != null) {"], [184, "            if(precommitHooks == null) {"], [185, "                precommitHooks = new ArrayList<NamedFunction>();"], [186, "            }"], [187, "            precommitHooks.add(preCommitHook);"], [188, "        }"], [214, "        if(postcommitHook != null) {"], [215, "            if(postcommitHooks == null) {"], [216, "                postcommitHooks = new ArrayList<NamedErlangFunction>();"], [217, "            }"], [218, "            postcommitHooks.add(postcommitHook);"], [219, "        }"], [502, "        addPrecommitHook(NamedErlangFunction.SEARCH_PRECOMMIT_HOOK);"], [503, "        builder.search(true);"], [518, "        if (precommitHooks != null) {"], [519, "            precommitHooks.remove(NamedErlangFunction.SEARCH_PRECOMMIT_HOOK);"]], "deleted": [[55, "    private final Collection<NamedFunction> existingPrecommitHooks;"], [69, "        this.existingPrecommitHooks = null;"], [87, "        this.existingPrecommitHooks = bucket.getPrecommitHooks();"], [95, "        final BucketProperties propsToStore = builder.build();"], [181, "        builder.addPrecommitHook(preCommitHook);"], [207, "        builder.addPostcommitHook(postcommitHook);"], [490, "        builder.addPrecommitHook(NamedErlangFunction.SEARCH_PRECOMMIT_HOOK).search(true);"], [505, "        if (existingPrecommitHooks != null) {"], [506, "            synchronized (existingPrecommitHooks) {"], [507, "                existingPrecommitHooks.remove(NamedErlangFunction.SEARCH_PRECOMMIT_HOOK);"], [508, "                for (NamedFunction f : existingPrecommitHooks) {"], [509, "                    builder.addPrecommitHook(f);"], [510, "                }"], [511, "            }"]]}, "num_lines_added": 22, "num_lines_removed": 14}