{"bug_class": "PROVER", "kind": "ERROR", "bug_type": "THREAD_SAFETY_VIOLATION", "qualifier": "Read/Write race. Non-private method `org.apache.helix.manager.zk.ZKHelixManager.handleNewSession` indirectly reads without synchronization from `record.org.apache.helix.ZNRecord._creationTime`. Potentially races with write in method `ZKHelixManager.isLeader()`.\n Reporting because this access may occur on a background thread.", "severity": "HIGH", "visibility": "user", "line": 695, "column": -1, "procedure": "void ZKHelixManager.handleNewSession()", "procedure_id": "org.apache.helix.manager.zk.ZKHelixManager.handleNewSession():void.ada16e6739ae09352eab6ae3589b1a25", "procedure_start_line": 651, "file": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "bug_trace": [{"level": 0, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 695, "column_number": -1, "description": "<Read trace>"}, {"level": 0, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 695, "column_number": -1, "description": "call to void ZKHelixManager.handleNewSessionAsParticipant()"}, {"level": 1, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 782, "column_number": -1, "description": "call to void ZKHelixManager.addControllerListener(ControllerChangeListener)"}, {"level": 2, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 357, "column_number": -1, "description": "call to void ZKHelixManager.addListener(Object,PropertyKey,HelixConstants$ChangeType,org.apache.zookeeper.Watcher$Event$EventType[])"}, {"level": 3, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 247, "column_number": -1, "description": "call to CallbackHandler ZKHelixManager.createCallBackHandler(PropertyKey,Object,org.apache.zookeeper.Watcher$Event$EventType[],HelixConstants$ChangeType)"}, {"level": 4, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 635, "column_number": -1, "description": "call to CallbackHandler.<init>(HelixManager,ZkClient,PropertyKey,Object,org.apache.zookeeper.Watcher$Event$EventType[],HelixConstants$ChangeType)"}, {"level": 5, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "line_number": 98, "column_number": -1, "description": "call to void CallbackHandler.init()"}, {"level": 6, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "line_number": 377, "column_number": -1, "description": "call to void CallbackHandler.invoke(NotificationContext)"}, {"level": 7, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "line_number": 129, "column_number": -1, "description": "call to void CallbackHandler.subscribeForChanges(NotificationContext,String,boolean,boolean)"}, {"level": 8, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java", "line_number": 308, "column_number": -1, "description": "call to HelixProperty.<init>(ZNRecord)"}, {"level": 9, "filename": "helix-core/src/main/java/org/apache/helix/HelixProperty.java", "line_number": 50, "column_number": -1, "description": "call to ZNRecord.<init>(ZNRecord)"}, {"level": 10, "filename": "helix-core/src/main/java/org/apache/helix/ZNRecord.java", "line_number": 76, "column_number": -1, "description": "call to ZNRecord.<init>(ZNRecord,String)"}, {"level": 11, "filename": "helix-core/src/main/java/org/apache/helix/ZNRecord.java", "line_number": 86, "column_number": -1, "description": "call to long ZNRecord.getCreationTime()"}, {"level": 12, "filename": "helix-core/src/main/java/org/apache/helix/ZNRecord.java", "line_number": 348, "column_number": -1, "description": "access to `this.org.apache.helix.ZNRecord._creationTime`"}, {"level": 0, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 864, "column_number": -1, "description": "<Write trace>"}, {"level": 0, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java", "line_number": 864, "column_number": -1, "description": "call to HelixProperty ZKHelixDataAccessor.getProperty(PropertyKey)"}, {"level": 1, "filename": "helix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixDataAccessor.java", "line_number": 274, "column_number": -1, "description": "call to void ZNRecord.setCreationTime(long)"}, {"level": 2, "filename": "helix-core/src/main/java/org/apache/helix/ZNRecord.java", "line_number": 354, "column_number": -1, "description": "access to `this.org.apache.helix.ZNRecord._creationTime`"}], "key": "ZKHelixManager.java|handleNewSession|THREAD_SAFETY_VIOLATION", "node_key": "9c5d6d9028928346cc4fb44cced5dea1", "hash": "4631c68345b887233c7a1673b73473b0", "bug_type_hum": "Thread Safety Violation", "censored_reason": ""}