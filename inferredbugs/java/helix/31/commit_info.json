{"hash": "d6ab245d824f9c47206426de7aba15ceb1ed9590", "message": "HELIX-89: User added listeners are not re-init after zk session expiry", "file_num_lines": 897, "diff_parsed": {"added": [[101, "  protected final List<CallbackHandler>        _handlers = new ArrayList<CallbackHandler>();"], [253, "    CallbackHandler newHandler ="], [258, "      for (CallbackHandler handler : _handlers)"], [259, "      {"], [260, "        // compare property-key path and listener reference"], [261, "        if (handler.getPath().equals(propertyKey.getPath()) && handler.getListener().equals(listener))"], [262, "        {"], [263, "          // TODO add log"], [264, "          return;"], [265, "        }"], [266, "      }"], [267, ""], [268, "      _handlers.add(newHandler);"], [269, "      logger.info(\"Add listener: \" + listener + \" for type: \" + type + \" to path: \" + newHandler.getPath());"], [768, "    \t  _leaderElectionHandler.init();"], [769, "      } else {"], [770, "        _leaderElectionHandler ="], [771, "              createCallBackHandler(new Builder(_clusterName).controller(),"], [772, "                                    new DistClusterControllerElection(_zkConnectString),"], [773, "                                    new EventType[] { EventType.NodeChildrenChanged,"], [774, "                                        EventType.NodeDeleted, EventType.NodeCreated },"], [775, "                                    ChangeType.CONTROLLER);"]], "deleted": [[101, "  protected List<CallbackHandler>         \t   _handlers;"], [253, "    CallbackHandler handler ="], [258, "      _handlers.add(handler);"], [259, "      logger.info(\"Add listener: \" + listener + \" for type: \" + type + \" to path: \" + handler.getPath());"], [680, "    _handlers = new ArrayList<CallbackHandler>();"], [757, "      // create a new leader-election handler for a new session"], [761, "      _leaderElectionHandler ="], [762, "            createCallBackHandler(new Builder(_clusterName).controller(),"], [763, "                                  new DistClusterControllerElection(_zkConnectString),"], [764, "                                  new EventType[] { EventType.NodeChildrenChanged,"], [765, "                                      EventType.NodeDeleted, EventType.NodeCreated },"], [766, "                                  ChangeType.CONTROLLER);"]]}, "num_lines_added": 22, "num_lines_removed": 12}