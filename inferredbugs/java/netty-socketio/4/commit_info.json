{"hash": "3677978c1b27c6576a658439fe6f3157c3bf0043", "message": "Encoding fixed. #157", "file_num_lines": 229, "diff_parsed": {"added": [[98, "//            packet = new String(packet.getBytes(CharsetUtil.UTF_8), CharsetUtil.ISO_8859_1);"], [264, "                        jsonSupport.writeValue(out, values);"]], "deleted": [[98, "            packet = new String(packet.getBytes(CharsetUtil.UTF_8), CharsetUtil.ISO_8859_1);"], [264, "                        if (binary) {"], [265, "                            // handling websocket encoding bug"], [266, "                            ByteBuf b = allocateBuffer(allocator);"], [267, "                            try {"], [268, "                                ByteBufOutputStream os = new ByteBufOutputStream(b);"], [269, "                                jsonSupport.writeValue(os, values);"], [270, ""], [271, "                                CharsetEncoder enc = CharsetUtil.ISO_8859_1.newEncoder();"], [272, "                                String str = b.toString(CharsetUtil.ISO_8859_1);"], [273, "                                if (enc.canEncode(str)) {"], [274, "                                    buf.writeBytes(str.getBytes(CharsetUtil.UTF_8));"], [275, "                                } else {"], [276, "                                    buf.writeBytes(b);"], [277, "                                }"], [278, "                            }"], [279, "                            finally {"], [280, "                                b.release();"], [281, "                            }"], [282, "                        } else {"], [283, "                            jsonSupport.writeValue(out, values);"], [284, "                        }"]]}, "num_lines_added": 2, "num_lines_removed": 22}