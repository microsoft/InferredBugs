{"hash": "f2a9644e46cda86422f18d41f3e3c45c64f91d5a", "message": "support serialization with blocking/non-blocking IO simutaneously", "file_num_lines": 210, "diff_parsed": {"added": [[7, "import com.intel.distml.util.*;"], [70, "            log(\"attempt to write: \" + resBuf.position() + \", \" + resBuf.remaining());"], [73, "            log(\"write: \" + len1 + \", \" + len2 + \", \" + resBuf.position() + \", \" + resBuf.remaining());"], [178, "        } catch (Exception e) {"], [183, "    private void read(SelectionKey key) throws Exception {"], [187, ""], [190, "            AbstractDataReader reader = new DefaultDataReader(dis);"], [192, "            DataBusProtocol.DistMLMessage req = DataBusProtocol.DistMLMessage.readDistMLMessage(reader, model);"], [205, "//                ByteArrayOutputStream bdos = new ByteArrayOutputStream(len + 4);"], [206, "//                DataOutputStream dos = new DataOutputStream(bdos);"], [207, "//                dos.writeInt(len);"], [208, "//                res.write(dos, model);"], [211, "                AbstractDataWriter out = new ByteBufferDataWriter(buf.resBuf);"], [212, "                out.writeInt(len);"], [213, "                res.write(out, model);"], [248, "                //warn(\"memory too low: free=\" + freeMemory + \", total=\" + totalMemory);"], [275, "        //Logger.info(msg, \"PSAgent\");"]], "deleted": [[7, "import com.intel.distml.util.DataStore;"], [8, "import com.intel.distml.util.KeyCollection;"], [9, "import com.intel.distml.util.Logger;"], [10, "import com.intel.distml.util.Utils;"], [57, "//            log(\"read data: \" + len + \", \" + buf.position());"], [74, "            //log(\"attempt to write: \" + resBuf.position() + \", \" + resBuf.remaining());"], [77, "            //log(\"write: \" + len1 + \", \" + len2 + \", \" + resBuf.position() + \", \" + resBuf.remaining());"], [182, "        } catch (IOException e) {"], [187, "    private void read(SelectionKey key) throws IOException {"], [194, "            DataBusProtocol.DistMLMessage req = DataBusProtocol.DistMLMessage.readDistMLMessage(dis, model);"], [207, "                ByteArrayOutputStream bdos = new ByteArrayOutputStream(len + 4);"], [208, "                DataOutputStream dos = new DataOutputStream(bdos);"], [209, "                dos.writeInt(len);"], [210, "                res.write(dos, model);"], [213, "                buf.resBuf.put(bdos.toByteArray());"], [248, "                warn(\"memory too low: free=\" + freeMemory + \", total=\" + totalMemory);"], [275, "//        Logger.info(msg, \"PSAgent\");"]]}, "num_lines_added": 17, "num_lines_removed": 17}