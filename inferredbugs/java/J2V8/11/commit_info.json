{"hash": "f8394f1461c6aca155924352630e7b7dc31b3181", "message": "Convert ByteBuffers to V8ArrayBuffers\n\nByteBuffers are now converted to V8ArrayBuffers in V8ObjectUtils.\nYou can now program against ByteBuffers, and pass these directly\nto V8 using the V8ObjectUtils utilities.\n\nChange-Id: I2d5314a98bb796570b6277f283ba7ce3f579541e", "file_num_lines": 489, "diff_parsed": {"added": [[176, "        Map<Object, V8Value> cache = new Hashtable<Object, V8Value>();"], [180, "            for (V8Value v8Object : cache.values()) {"], [196, "        Map<Object, V8Value> cache = new Hashtable<Object, V8Value>();"], [200, "            for (V8Value v8Object : cache.values()) {"], [224, "        Map<Object, V8Value> cache = new Hashtable<Object, V8Value>();"], [232, "            for (V8Value v8Object : cache.values()) {"], [249, "        Map<Object, V8Value> cache = new Hashtable<Object, V8Value>();"], [253, "            for (V8Value v8Object : cache.values()) {"], [340, "    private static V8Object toV8Object(final V8 v8, final Map<String, ? extends Object> map, final Map<Object, V8Value> cache) {"], [342, "            return (V8Object) cache.get(map);"], [357, "    private static V8Array toV8Array(final V8 v8, final List<? extends Object> list, final Map<Object, V8Value> cache) {"], [375, "    private static V8ArrayBuffer toV8ArrayBuffer(final V8 v8, final ByteBuffer byteBuffer, final Map<Object, V8Value> cache) {"], [376, "        if (cache.containsKey(byteBuffer)) {"], [377, "            return (V8ArrayBuffer) cache.get(byteBuffer);"], [378, "        }"], [379, "        V8ArrayBuffer result = new V8ArrayBuffer(v8, byteBuffer);"], [380, "        cache.put(byteBuffer, result);"], [381, "        return result;"], [382, "    }"], [383, ""], [384, "    private static V8TypedArray toV8TypedArray(final V8 v8, final TypedArray typedArray, final Map<Object, V8Value> cache) {"], [399, "    private static Object getV8Result(final V8 v8, final Object value, final Map<Object, V8Value> cache) {"], [409, "        } else if (value instanceof ByteBuffer) {"], [410, "            return toV8ArrayBuffer(v8, (ByteBuffer) value, cache);"], [416, "    private static void pushValue(final V8 v8, final V8Array result, final Object value, final Map<Object, V8Value> cache) {"], [436, "        } else if (value instanceof ByteBuffer) {"], [437, "            V8ArrayBuffer v8ArrayBuffer = toV8ArrayBuffer(v8, (ByteBuffer) value, cache);"], [438, "            result.push(v8ArrayBuffer);"], [451, "    private static void setValue(final V8 v8, final V8Object result, final String key, final Object value, final Map<Object, V8Value> cache) {"], [471, "        } else if (value instanceof ByteBuffer) {"], [472, "            V8ArrayBuffer v8ArrayBuffer = toV8ArrayBuffer(v8, (ByteBuffer) value, cache);"], [473, "            result.add(key, v8ArrayBuffer);"], [508, "                    return toTypedArray(typedArray);"], [541, "    private static Object toTypedArray(final V8Array typedArray) {"], [591, "                    return toTypedArray(typedArray);"]], "deleted": [[176, "        Map<Object, V8Object> cache = new Hashtable<Object, V8Object>();"], [180, "            for (V8Object v8Object : cache.values()) {"], [196, "        Map<Object, V8Object> cache = new Hashtable<Object, V8Object>();"], [200, "            for (V8Object v8Object : cache.values()) {"], [224, "        Map<Object, V8Object> cache = new Hashtable<Object, V8Object>();"], [232, "            for (V8Object v8Object : cache.values()) {"], [249, "        Map<Object, V8Object> cache = new Hashtable<Object, V8Object>();"], [253, "            for (V8Object v8Object : cache.values()) {"], [340, "    private static V8Object toV8Object(final V8 v8, final Map<String, ? extends Object> map, final Map<Object, V8Object> cache) {"], [342, "            return cache.get(map);"], [357, "    private static V8Array toV8Array(final V8 v8, final List<? extends Object> list, final Map<Object, V8Object> cache) {"], [375, "    private static V8TypedArray toV8TypedArray(final V8 v8, final TypedArray typedArray, final Map<Object, V8Object> cache) {"], [390, "    private static Object getV8Result(final V8 v8, final Object value, final Map<Object, V8Object> cache) {"], [405, "    private static void pushValue(final V8 v8, final V8Array result, final Object value, final Map<Object, V8Object> cache) {"], [437, "    private static void setValue(final V8 v8, final V8Object result, final String key, final Object value, final Map<Object, V8Object> cache) {"], [491, "                    return toByteBuffer(typedArray);"], [524, "    private static Object toByteBuffer(final V8Array typedArray) {"], [574, "                    return toByteBuffer(typedArray);"]]}, "num_lines_added": 35, "num_lines_removed": 18}