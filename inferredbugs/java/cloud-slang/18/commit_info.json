{"hash": "9c14b4dc30b451238dd1e1ce1c6f2886c3c6bea8", "message": "throw the RuntimeException to score engine for handle", "file_num_lines": 183, "diff_parsed": {"added": [[13, "import io.cloudslang.lang.entities.ListForLoopStatement;"], [14, "import io.cloudslang.lang.entities.LoopStatement;"], [17, "import io.cloudslang.lang.entities.ScoreLangConstants;"], [21, "import io.cloudslang.lang.runtime.bindings.LoopsBinding;"], [22, "import io.cloudslang.lang.runtime.bindings.OutputsBinding;"], [24, "import io.cloudslang.lang.runtime.env.ExecutionPath;"], [25, "import io.cloudslang.lang.runtime.env.ForLoopCondition;"], [26, "import io.cloudslang.lang.runtime.env.LoopCondition;"], [27, "import io.cloudslang.lang.runtime.env.ReturnValues;"], [28, "import io.cloudslang.lang.runtime.env.RunEnvironment;"], [29, "import io.cloudslang.lang.runtime.events.LanguageEventData;"], [30, "import io.cloudslang.score.api.execution.ExecutionParametersConsts;"], [31, "import io.cloudslang.score.lang.ExecutionRuntimeServices;"], [32, "import org.apache.commons.lang3.tuple.Pair;"], [33, "import org.apache.log4j.Logger;"], [38, "import java.util.ArrayList;"], [73, "            startStepExecutionPathCalc(runEnv);"], [79, "            Map<String, Serializable> flowVariables = flowContext.getImmutableViewOfVariables();"], [80, ""], [81, "            fireEvent(executionRuntimeServices, runEnv, ScoreLangConstants.EVENT_INPUT_START, \"Task inputs start Binding\","], [82, "                    Pair.of(LanguageEventData.BOUND_INPUTS,(Serializable)retrieveInputs(taskInputs)),"], [83, "                    Pair.of( LanguageEventData.levelName.TASK_NAME.name(), nodeName));"], [84, ""], [111, "//            Map<String, Serializable> flowVariables = flowContext.getImmutableViewOfVariables();"], [126, "//            runEnv.getExecutionPath().down();"], [133, "    private List<String> retrieveInputs(List<Input> taskInputs) {"], [134, "        List<String> inputs = new ArrayList<>(taskInputs.size());"], [135, "        for (Input input : taskInputs){"], [136, "            inputs.add(input.getName());"], [137, "        }"], [138, "        return inputs;"], [139, "    }"], [140, ""], [141, "    private void startStepExecutionPathCalc(RunEnvironment runEnv) {"], [142, "        if(runEnv.getExecutionPath().getNextAction() != null && runEnv.getExecutionPath().getNextAction().equals(ExecutionPath.Action.FORWARD.name())){"], [143, "            runEnv.getExecutionPath().forward();"], [144, "        }else{"], [145, "            runEnv.getExecutionPath().down();"], [146, "        }"], [147, "    }"], [148, ""], [163, "//            if (runEnv.getExecutionPath().getDepth() > 0) runEnv.getExecutionPath().up();"], [184, "                    endStepExecutionPathCalc(runEnv, previousStepId);"], [225, ""], [226, "            endStepExecutionPathCalc(runEnv, nextPosition);"], [227, ""], [234, "    private void endStepExecutionPathCalc(RunEnvironment runEnv, Long nextPosition) {"], [235, "        if(nextPosition != 0L){"], [236, "            runEnv.getExecutionPath().setNextAction(ExecutionPath.Action.FORWARD.name());"], [237, "        }"], [238, "        else {"], [239, "            runEnv.getExecutionPath().up();"], [240, "        }"], [241, "    }"], [242, ""]], "deleted": [[13, "import io.cloudslang.lang.entities.*;"], [14, "import io.cloudslang.lang.runtime.bindings.LoopsBinding;"], [15, "import io.cloudslang.lang.runtime.bindings.OutputsBinding;"], [16, "import io.cloudslang.lang.runtime.env.*;"], [17, "import io.cloudslang.lang.runtime.events.LanguageEventData;"], [18, "import org.apache.log4j.Logger;"], [19, "import org.apache.commons.lang3.tuple.Pair;"], [21, "import io.cloudslang.lang.entities.ScoreLangConstants;"], [22, "import io.cloudslang.lang.runtime.env.LoopCondition;"], [23, "import io.cloudslang.score.api.execution.ExecutionParametersConsts;"], [24, "import io.cloudslang.score.lang.ExecutionRuntimeServices;"], [68, "            runEnv.getExecutionPath().forward();"], [100, "            Map<String, Serializable> flowVariables = flowContext.getImmutableViewOfVariables();"], [115, "            runEnv.getExecutionPath().down();"], [136, "            if (runEnv.getExecutionPath().getDepth() > 0) runEnv.getExecutionPath().up();"]]}, "num_lines_added": 55, "num_lines_removed": 15}