{"hash": "0afc07c98a60384f9ebf0fb1b753ba2517e05f4b", "message": "\u589e\u52a0\u5355\u673a\u96c6\u4e2d\u5f0f\u4f7f\u7528\u652f\u6301", "file_num_lines": 242, "diff_parsed": {"added": [[41, "import org.apdplat.extractor.html.model.UrlPattern;"], [65, "     * @param extractRegular URL\u62bd\u53d6\u89c4\u5219"], [66, "     * @return"], [67, "     */"], [68, "    public static HtmlExtractor getInstance(ExtractRegular extractRegular) {"], [69, "        if (htmlExtractor != null) {"], [70, "            return htmlExtractor;"], [71, "        }"], [72, "        synchronized (HtmlExtractor.class) {"], [73, "            if (htmlExtractor == null) {"], [74, "                htmlExtractor = new HtmlExtractor();"], [75, "                htmlExtractor.extractRegular = extractRegular;"], [76, "            }"], [77, "        }"], [78, "        return htmlExtractor;"], [79, "    }"], [80, "    /**"], [81, "     * \u83b7\u53d6\u5b9e\u4f8b"], [280, "    private static void usage2(){"], [300, "    private static void usage1(){"], [301, "        //1\u3001\u6784\u9020\u62bd\u53d6\u89c4\u5219"], [302, "        List<UrlPattern> urlPatterns = new ArrayList<>();"], [303, "        //1.1\u3001\u6784\u9020URL\u6a21\u5f0f"], [304, "        UrlPattern urlPattern = new UrlPattern();"], [305, "        urlPattern.setUrlPattern(\"http://money.163.com/\\\\d{2}/\\\\d{4}/\\\\d{2}/[0-9A-Z]{16}.html\");"], [306, "        //1.2\u3001\u6784\u9020HTML\u6a21\u677f"], [307, "        HtmlTemplate htmlTemplate = new HtmlTemplate();"], [308, "        htmlTemplate.setTemplateName(\"\u7f51\u6613\u8d22\u7ecf\u9891\u9053\");"], [309, "        htmlTemplate.setTableName(\"finance\");"], [310, "        //1.3\u3001\u5c06URL\u6a21\u5f0f\u548cHTML\u6a21\u677f\u5efa\u7acb\u5173\u8054"], [311, "        urlPattern.addHtmlTemplate(htmlTemplate);"], [312, "        //1.4\u3001\u6784\u9020CSS\u8def\u5f84"], [313, "        CssPath cssPath = new CssPath();"], [314, "        cssPath.setCssPath(\"h1\");"], [315, "        cssPath.setFieldName(\"title\");"], [316, "        cssPath.setFieldDescription(\"\u6807\u9898\");"], [317, "        //1.5\u3001\u5c06CSS\u8def\u5f84\u548c\u6a21\u677f\u5efa\u7acb\u5173\u8054"], [318, "        htmlTemplate.addCssPath(cssPath);"], [319, "        //1.6\u3001\u6784\u9020CSS\u8def\u5f84"], [320, "        cssPath = new CssPath();"], [321, "        cssPath.setCssPath(\"div#endText\");"], [322, "        cssPath.setFieldName(\"content\");"], [323, "        cssPath.setFieldDescription(\"\u6b63\u6587\");"], [324, "        //1.6\u3001\u5c06CSS\u8def\u5f84\u548c\u6a21\u677f\u5efa\u7acb\u5173\u8054"], [325, "        htmlTemplate.addCssPath(cssPath);"], [326, "        //\u53ef\u8c61\u4e0a\u9762\u90a3\u6837\u6784\u9020\u591a\u4e2aURLURL\u6a21\u5f0f"], [327, "        urlPatterns.add(urlPattern);"], [328, "        //2\u3001\u83b7\u53d6\u62bd\u53d6\u89c4\u5219\u5bf9\u8c61"], [329, "        ExtractRegular extractRegular = ExtractRegular.getInstance(urlPatterns);"], [330, "        //\u6ce8\u610f\uff1a\u53ef\u901a\u8fc7\u5982\u4e0b3\u4e2a\u65b9\u6cd5\u52a8\u6001\u5730\u6539\u53d8\u62bd\u53d6\u89c4\u5219"], [331, "        //extractRegular.addUrlPatterns(urlPatterns);"], [332, "        //extractRegular.addUrlPattern(urlPattern);"], [333, "        //extractRegular.removeUrlPattern(urlPattern.getUrlPattern());"], [334, "        //3\u3001\u83b7\u53d6HTML\u62bd\u53d6\u5de5\u5177"], [335, "        HtmlExtractor htmlExtractor = HtmlExtractor.getInstance(extractRegular);"], [336, "        //4\u3001\u62bd\u53d6\u7f51\u9875"], [337, "        String url = \"http://money.163.com/08/1219/16/4THR2TMP002533QK.html\";"], [338, "        List<ExtractResult> extractResults = htmlExtractor.extract(url, \"gb2312\");"], [339, "        //5\u3001\u8f93\u51fa\u7ed3\u679c"], [340, "        int i = 1;"], [341, "        for (ExtractResult extractResult : extractResults) {"], [342, "            System.out.println((i++) + \"\u3001\u7f51\u9875 \" + extractResult.getUrl() + \" \u7684\u62bd\u53d6\u7ed3\u679c\");"], [343, "            for(ExtractResultItem extractResultItem : extractResult.getExtractResultItems()){"], [344, "                System.out.print(\"\\t\"+extractResultItem.getField()+\" = \"+extractResultItem.getValue());"], [345, "            }"], [346, "            System.out.println(\"\\tdescription = \"+extractResult.getDescription());"], [347, "            System.out.println(\"\\tkeywords = \"+extractResult.getKeywords());"], [348, "        }"], [349, "    }"], [350, "    /**"], [351, "     * @param args"], [352, "     */"], [353, "    public static void main(String[] args) {"], [354, "        usage1();"], [355, "        //usage2();"], [356, "    }"]], "deleted": [[262, ""], [263, "    /**"], [264, "     * @param args"], [265, "     */"], [266, "    public static void main(String[] args) {"]]}, "num_lines_added": 76, "num_lines_removed": 5}