{"hash": "d39ccbc6940079ec530d03b0fbd124c6ab717146", "message": "it looks like netty doesnt enforce the order of the queue and the write. going to wait until i am sure the write is on the wire before trying the next one.", "file_num_lines": 320, "diff_parsed": {"added": [[38, "import java.util.concurrent.Semaphore;"], [198, "  private final Semaphore writerLock = new Semaphore(1);"], [199, ""], [216, "      writerLock.acquireUninterruptibly();"], [217, "      queue.add(reply);"], [218, "      write = channel.write(command);"], [222, "          writerLock.release();"]], "deleted": [[213, "      synchronized (channel) {"], [214, "        queue.add(reply);"], [215, "        write = channel.write(command);"], [216, "      }"]]}, "num_lines_added": 7, "num_lines_removed": 4}