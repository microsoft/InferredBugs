{"hash": "2e0c7362144e5749508c7b113e8e3d8f7177a4c0", "message": "Remove code duplication from ParameterValue (#403)", "file_num_lines": 366, "diff_parsed": {"added": [[32, "import java.util.Collections;"], [243, "        List<String> list = toList();"], [244, "        if (list.isEmpty()) {"], [247, "        return new HashSet<>(list);"], [274, "        return toList(Collections.emptyList());"], [287, "            return StringUtils.getList(tmp, \"(,|\\\\|)\");"], [377, "            List<String> list = toList();"], [378, "            Object array = Array.newInstance(componentType, list.size());"], [380, "            for (int i = 0; i < list.size(); i++) {"], [381, "                String value = list.get(i);"], [382, "                parameterValue.values[0] = value;"], [383, "                Object object = parameterValue.toObject(componentType, pattern);"], [384, "                Array.set(array, i, object);"], [385, "            }"], [416, "            List<String> list = toList();"]], "deleted": [[242, "        if (isNull() || (values.length == 1 && StringUtils.isNullOrEmpty(values[0]))) {"], [245, ""], [246, "        if (values.length == 1) {"], [247, "            return new HashSet<>(Arrays.asList(values[0].split(\",\")));"], [248, "        }"], [249, ""], [250, "        return new HashSet<>(Arrays.asList(values));"], [277, "        return toList(new ArrayList<String>());"], [290, "            return Arrays.asList(tmp.split(\"(,|\\\\|)\"));"], [378, "            Object array;"], [381, "            if (values.length == 1) {"], [382, "                // split a single-value list into an array"], [383, "                String tmp = values[0];"], [384, "                tmp = StringUtils.removeStart(tmp, \"[\");"], [385, "                tmp = StringUtils.removeEnd(tmp, \"]\");"], [386, "                List<String> list = StringUtils.getList(tmp, \"(,|\\\\|)\");"], [387, "                array = Array.newInstance(componentType, list.size());"], [388, "                for (int i = 0; i < list.size(); i++) {"], [389, "                    String value = list.get(i);"], [390, "                    parameterValue.values[0] = value;"], [391, "                    Object object = parameterValue.toObject(componentType, pattern);"], [392, "                    Array.set(array, i, object);"], [393, "                }"], [394, "            } else {"], [395, "                array = Array.newInstance(componentType, values.length);"], [396, "                for (int i = 0; i < values.length; i++) {"], [397, "                    String value = values[i];"], [398, "                    parameterValue.values[0] = value;"], [399, "                    Object object = parameterValue.toObject(componentType, pattern);"], [400, "                    Array.set(array, i, object);"], [401, "                }"], [402, "            }"], [434, "            List<String> list;"], [435, "            if (values.length == 1) {"], [436, "                String tmp = values[0];"], [437, "                tmp = StringUtils.removeStart(tmp, \"[\");"], [438, "                tmp = StringUtils.removeEnd(tmp, \"]\");"], [439, "                list = StringUtils.getList(tmp, \"(,|\\\\|)\");"], [440, "            } else {"], [441, "                list = Arrays.asList(values);"], [442, "            }"]]}, "num_lines_added": 15, "num_lines_removed": 41}