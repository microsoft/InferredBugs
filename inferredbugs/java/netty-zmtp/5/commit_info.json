{"hash": "216456f4ce5d026ebea04416b011753ed6b4e9d4", "message": "remove ZMTPIncomingMessage", "file_num_lines": 45, "diff_parsed": {"added": [[53, "    final Object expected = ZMTPMessage.fromUTF8(ALLOC, \"hello\");"], [72, "    final Object expected = ZMTPMessage.fromUTF8(ALLOC, \"hello\", \"world\");"]], "deleted": [[32, "import static com.spotify.netty4.handler.codec.zmtp.ZMTPMessage.fromUTF8;"], [54, "    final Object expected = new ZMTPIncomingMessage(fromUTF8(ALLOC, \"hello\"), false, 5);"], [55, "    assertThat(out, hasSize(1));"], [56, "    assertThat(out, contains(expected));"], [57, "  }"], [58, ""], [59, "  @Test"], [60, "  public void testSingleFrameTruncated() throws Exception {"], [61, "    final ZMTPMessageDecoder decoder = new ZMTPMessageDecoder(2);"], [62, ""], [63, "    final ByteBuf content = Unpooled.copiedBuffer(\"hello\", UTF_8);"], [64, ""], [65, "    final List<Object> out = Lists.newArrayList();"], [66, "    decoder.header(content.readableBytes(), false, out);"], [67, "    decoder.content(content, out);"], [68, "    decoder.finish(out);"], [69, ""], [70, "    final Object expected = new ZMTPIncomingMessage(fromUTF8(ALLOC, \"he\"), true, 5);"], [89, "    final Object expected = new ZMTPIncomingMessage(fromUTF8(ALLOC, \"hello\", \"world\"), false, 10);"], [90, "    assertThat(out, hasSize(1));"], [91, "    assertThat(out, contains(expected));"], [92, "  }"], [93, ""], [94, ""], [95, "  @Test"], [96, "  public void testTwoFramesTruncated() throws Exception {"], [97, "    final ZMTPMessageDecoder decoder = new ZMTPMessageDecoder(7);"], [98, ""], [99, "    final ByteBuf f0 = Unpooled.copiedBuffer(\"hello\", UTF_8);"], [100, "    final ByteBuf f1 = Unpooled.copiedBuffer(\"world\", UTF_8);"], [101, ""], [102, "    final List<Object> out = Lists.newArrayList();"], [103, "    decoder.header(f0.readableBytes(), true, out);"], [104, "    decoder.content(f0, out);"], [105, "    decoder.header(f1.readableBytes(), false, out);"], [106, "    decoder.content(f1, out);"], [107, "    decoder.finish(out);"], [108, ""], [109, "    final Object expected = new ZMTPIncomingMessage(fromUTF8(ALLOC, \"hello\", \"wo\"), true, 10);"]]}, "num_lines_added": 2, "num_lines_removed": 39}