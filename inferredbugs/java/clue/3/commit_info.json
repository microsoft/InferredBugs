{"hash": "731ce708fe00d54d101e31132b4ff61eb1826ae8", "message": "added readonly support", "file_num_lines": 84, "diff_parsed": {"added": [[30, "    ctx = new ClueContext(dir, new IndexReaderFactory(dir), writerConfig, interactiveMode);"], [60, "      if (\"readonly\".equalsIgnoreCase(cmd)) {"], [61, "        if (args.length > 2) {"], [62, "          cmd = args[2];"], [63, "          app = new ClueApplication(idxLocation, false);"], [64, "          String[] cmdArgs;"], [65, "          cmdArgs = new String[args.length - 3];"], [66, "          System.arraycopy(args, 3, cmdArgs, 0, cmdArgs.length);"], [67, "          app.ctx.setReadOnlyMode(true);"], [71, "      else {"], [72, "        app = new ClueApplication(idxLocation, false);"], [73, "        String[] cmdArgs;"], [74, "        cmdArgs = new String[args.length - 2];"], [75, "        System.arraycopy(args, 2, cmdArgs, 0, cmdArgs.length);"], [76, "        app.handleCommand(cmd, cmdArgs, System.out);"], [77, "      }"], [78, "      return;"], [79, "    }"], [80, "    app = new ClueApplication(idxLocation, true);"], [81, "    BufferedReader inReader = new BufferedReader(new InputStreamReader(System.in));"], [82, "    while(true){"], [83, "      System.out.print(\"> \");"], [84, "      String line = inReader.readLine().trim();"], [85, "      if (line.isEmpty()) continue;"], [86, "      String[] parts = line.split(\"\\\\s\");"], [87, "      if (parts.length > 0){"], [88, "        String cmd = parts[0];"], [89, "        String[] cmdArgs = new String[parts.length - 1];"], [90, "        System.arraycopy(parts, 1, cmdArgs, 0, cmdArgs.length);"], [91, "        app.handleCommand(cmd, cmdArgs, System.out);"], [92, "      }"], [93, "    }"], [94, ""]], "deleted": [[11, "import org.apache.lucene.index.IndexWriter;"], [31, "    ctx = new ClueContext(new IndexReaderFactory(dir), new IndexWriter(dir, writerConfig), interactiveMode);"], [60, "      app = new ClueApplication(idxLocation, false);"], [62, "      String[] cmdArgs;"], [63, "      cmdArgs = new String[args.length - 2];"], [64, "      System.arraycopy(args, 2, cmdArgs, 0, cmdArgs.length);"], [65, "      app.handleCommand(cmd, cmdArgs, System.out);"], [66, "    }"], [67, "    else{"], [68, "      app = new ClueApplication(idxLocation, true);"], [69, "      BufferedReader inReader = new BufferedReader(new InputStreamReader(System.in));"], [70, "      while(true){"], [71, "        System.out.print(\"> \");"], [72, "        String line = inReader.readLine().trim();"], [73, "        if (line.isEmpty()) continue;"], [74, "        String[] parts = line.split(\"\\\\s\");"], [75, "        if (parts.length > 0){"], [76, "          String cmd = parts[0];"], [77, "          String[] cmdArgs = new String[parts.length - 1];"], [78, "          System.arraycopy(parts, 1, cmdArgs, 0, cmdArgs.length);"], [82, "    }"]]}, "num_lines_added": 33, "num_lines_removed": 21}