{"hash": "3a2fdc683eb7c8881e4ce9608bb1d7c3548e27d4", "message": "BOOKKEEPER-224: Fix findbugs in bookkeeper-server component (ivank)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1336645 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 456, "diff_parsed": {"added": [[76, "    public static final int MAX_FRAME_LENGTH = 2 * 1024 * 1024; // 2M"], [177, "        synchronized (this) {"], [178, "            if (channel != null && state == ConnectionState.CONNECTED) {"], [179, "                doOpNow = true;"], [180, "            } else {"], [181, "                // if reached here, channel is either null (first connection"], [182, "                // attempt),"], [183, "                // or the channel is disconnected"], [184, "                doOpNow = false;"], [185, ""], [186, "                // connection attempt is still in progress, queue up this"], [187, "                // op. Op will be executed when connection attempt either"], [188, "                // fails"], [189, "                // or"], [190, "                // succeeds"], [191, "                pendingOps.add(op);"], [192, ""], [193, "                connect();"], [441, "        synchronized (this) {"], [442, "            state = ConnectionState.DISCONNECTED;"], [443, "        }"]], "deleted": [[76, "    public static int MAX_FRAME_LENGTH = 2 * 1024 * 1024; // 2M"], [177, "        // common case without lock first"], [178, "        if (channel != null && state == ConnectionState.CONNECTED) {"], [179, "            doOpNow = true;"], [180, "        } else {"], [181, ""], [182, "            synchronized (this) {"], [183, "                // check again under lock"], [184, "                if (channel != null && state == ConnectionState.CONNECTED) {"], [185, "                    doOpNow = true;"], [186, "                } else {"], [187, ""], [188, "                    // if reached here, channel is either null (first connection"], [189, "                    // attempt),"], [190, "                    // or the channel is disconnected"], [191, "                    doOpNow = false;"], [192, ""], [193, "                    // connection attempt is still in progress, queue up this"], [194, "                    // op. Op will be executed when connection attempt either"], [195, "                    // fails"], [196, "                    // or"], [197, "                    // succeeds"], [198, "                    pendingOps.add(op);"], [199, ""], [200, "                    connect();"], [201, "                }"], [208, ""], [450, "        state = ConnectionState.DISCONNECTED;"]]}, "num_lines_added": 21, "num_lines_removed": 28}