{"hash": "a3da8c74c4226b7d92e9d0eba9591334351afa45", "message": "BOOKKEEPER-520: BookieFailureTest hangs on precommit build (ivank via sijie)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1424335 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 261, "diff_parsed": {"added": [[75, "        boolean failureOccurred;"], [76, "        Enumeration<LedgerEntry> ls;"], [81, "            failureOccurred = false;"], [82, "            ls = null;"], [156, "        SyncObj sync = new SyncObj();"], [182, "                    sync.wait(10000);"], [183, "                    assertFalse(\"Failure occurred during write\", sync.failureOccurred);"], [208, "                    assertFalse(\"Failure occurred during read\", sync.failureOccurred);"], [217, "            while (sync.ls.hasMoreElements()) {"], [220, "                byte[] entry = sync.ls.nextElement().getEntry();"], [250, "        if (rc != 0) {"], [251, "            LOG.error(\"Failure during add {} {}\", entryId, rc);"], [252, "            x.failureOccurred = true;"], [253, "        }"], [262, "        SyncObj x = (SyncObj) ctx;"], [263, "        if (rc != 0) {"], [264, "            LOG.error(\"Failure during add {}\", rc);"], [265, "            x.failureOccurred = true;"], [266, "        }"], [267, "        synchronized (x) {"], [268, "            x.value = true;"], [269, "            x.ls = seq;"], [270, "            x.notify();"]], "deleted": [[63, "    Enumeration<LedgerEntry> ls;"], [73, "    // Synchronization"], [74, "    SyncObj sync;"], [75, "    Set<Object> syncObjs;"], [76, ""], [154, ""], [155, ""], [184, "                    sync.wait();"], [217, "            while (ls.hasMoreElements()) {"], [220, "                byte[] entry = ls.nextElement().getEntry();"], [249, "        if (rc != 0)"], [250, "            fail(\"Failed to write entry: \" + entryId);"], [260, "        if (rc != 0)"], [261, "            fail(\"Failed to write entry\");"], [262, "        ls = seq;"], [263, "        synchronized (sync) {"], [264, "            sync.value = true;"], [265, "            sync.notify();"], [267, ""], [279, "        sync = new SyncObj(); // initialize the synchronization data structure"]]}, "num_lines_added": 23, "num_lines_removed": 20}