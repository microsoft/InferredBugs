{"hash": "3902ae5a6056ba6348f71c873d23f74ac32cebef", "message": "BOOKKEEPER-556: BookieServerMXBean#getServerState makes no sense (ivank via sijie)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1444340 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 68, "diff_parsed": {"added": [], "deleted": [[28, "    public interface Provider {"], [29, "        public long getOutstandingRequests();"], [30, ""], [31, "        public long getLastProcessedZxid();"], [32, "    }"], [33, ""], [34, "    private Provider provider = null;"], [35, "    private Object mutex = new Object();"], [36, ""], [41, "    static public void registerAsConcrete() {"], [42, "        setInstance(new ServerStats());"], [43, "    }"], [44, ""], [45, "    static synchronized public void unregister() {"], [46, "        instance = null;"], [47, "    }"], [48, ""], [49, "    static synchronized protected void setInstance(ServerStats newInstance) {"], [50, "        assert instance == null;"], [51, "        instance = newInstance;"], [52, "    }"], [53, ""], [72, "    public long getOutstandingRequests() {"], [73, "        synchronized (mutex) {"], [74, "            return (provider != null) ? provider.getOutstandingRequests() : -1;"], [75, "        }"], [76, "    }"], [77, ""], [78, "    public long getLastProcessedZxid() {"], [79, "        synchronized (mutex) {"], [80, "            return (provider != null) ? provider.getLastProcessedZxid() : -1;"], [81, "        }"], [82, "    }"], [92, "    public String getServerState() {"], [93, "        return \"standalone\";"], [94, "    }"], [95, ""], [102, "        if (provider != null) {"], [103, "            sb.append(\"Outstanding: \" + getOutstandingRequests() + \"\\n\");"], [104, "            sb.append(\"Zxid: 0x\" + Long.toHexString(getLastProcessedZxid()) + \"\\n\");"], [105, "        }"], [106, "        sb.append(\"Mode: \" + getServerState() + \"\\n\");"], [110, "    // mutators"], [111, "    public void setStatsProvider(Provider zk) {"], [112, "        synchronized (mutex) {"], [113, "            provider = zk;"], [114, "        }"], [115, "    }"], [116, ""]]}, "num_lines_added": 0, "num_lines_removed": 49}