{"hash": "e8c47b0299788bcc08621953ced4d4846957ff7b", "message": "op", "file_num_lines": 234, "diff_parsed": {"added": [[41, "import org.dromara.hmily.core.repository.HmilyRepositoryStorage;"], [76, "        HmilyRepositoryStorage.createHmilyTransaction(hmilyTransaction);"], [78, "        HmilyRepositoryStorage.createHmilyParticipant(hmilyParticipant);"], [103, "        HmilyTransactionHolder.getInstance().cacheHmilyParticipant(hmilyParticipant);"], [104, "        HmilyRepositoryStorage.createHmilyParticipant(hmilyParticipant);"], [126, "        HmilyRepositoryStorage.updateHmilyTransactionStatus(currentTransaction);"], [132, "                    HmilyRepositoryStorage.removeHmilyParticipant(hmilyParticipant);"], [154, "                    HmilyRepositoryStorage.removeHmilyParticipant(hmilyParticipant);"], [181, "        HmilyRepositoryStorage.updateHmilyTransactionStatus(currentTransaction);"], [187, "                    HmilyRepositoryStorage.removeHmilyParticipant(hmilyParticipant);"], [209, "            HmilyRepositoryStorage.updateHmilyParticipantStatus(selfHmilyParticipant);"], [217, "                    HmilyRepositoryStorage.removeHmilyParticipant(hmilyParticipant);"], [238, "        HmilyRepositoryStorage.updateHmilyTransactionStatus(hmilyTransaction);"], [242, "            HmilyRepositoryStorage.updateHmilyParticipantStatus(hmilyParticipant);"]], "deleted": [[24, "import java.util.Optional;"], [29, "import org.dromara.hmily.common.enums.EventTypeEnum;"], [41, "import org.dromara.hmily.core.disruptor.publisher.HmilyRepositoryEventPublisher;"], [50, ""], [62, "    private static final HmilyRepositoryEventPublisher PUBLISHER = HmilyRepositoryEventPublisher.getInstance();"], [63, ""], [81, "        PUBLISHER.publishEvent(hmilyTransaction, EventTypeEnum.CREATE_HMILY_TRANSACTION.getCode());"], [83, "        Optional.ofNullable(hmilyParticipant).ifPresent(h -> PUBLISHER.publishEvent(h, EventTypeEnum.CREATE_HMILY_PARTICIPANT.getCode()));"], [108, "        //cache by guava"], [109, "        if (Objects.nonNull(hmilyParticipant)) {"], [110, "            HmilyParticipantCacheManager.getInstance().cacheHmilyParticipant(hmilyParticipant);"], [111, "            PUBLISHER.publishEvent(hmilyParticipant, EventTypeEnum.CREATE_HMILY_PARTICIPANT.getCode());"], [112, "        }"], [134, "        updateHmilyTransactionStatus(currentTransaction);"], [140, "                    removeHmilyParticipant(hmilyParticipant);"], [162, "                    removeHmilyParticipant(hmilyParticipant);"], [189, "        updateHmilyTransactionStatus(currentTransaction);"], [195, "                    removeHmilyParticipant(hmilyParticipant);"], [217, "            updateHmilyParticipantStatus(selfHmilyParticipant);"], [225, "                    removeHmilyParticipant(hmilyParticipant);"], [246, "        updateHmilyTransactionStatus(hmilyTransaction);"], [250, "            updateHmilyParticipantStatus(hmilyParticipant);"], [251, "        }"], [252, "    }"], [253, ""], [254, "    public void updateHmilyTransactionStatus(final HmilyTransaction hmilyTransaction) {"], [255, "        if (Objects.nonNull(hmilyTransaction)) {"], [256, "            PUBLISHER.publishEvent(hmilyTransaction, EventTypeEnum.UPDATE_HMILY_TRANSACTION_STATUS.getCode());"], [257, "        }"], [258, "    }"], [259, ""], [260, "    public void updateHmilyParticipantStatus(final HmilyParticipant hmilyParticipant) {"], [261, "        if (Objects.nonNull(hmilyParticipant)) {"], [262, "            PUBLISHER.publishEvent(hmilyParticipant, EventTypeEnum.UPDATE_HMILY_PARTICIPANT_STATUS.getCode());"], [263, "        }"], [264, "    }"], [265, ""], [266, "    public void removeHmilyParticipant(final HmilyParticipant hmilyParticipant) {"], [267, "        if (null != hmilyParticipant) {"], [268, "            PUBLISHER.publishEvent(hmilyParticipant, EventTypeEnum.REMOVE_HMILY_PARTICIPANT.getCode());"]]}, "num_lines_added": 14, "num_lines_removed": 40}