{"hash": "1c3b8d5e031814da04c5a0050ca1e6a1c0faf52c", "message": "use EntityInputStream to check if stream is empty\n\nSigned-off-by: Maxim Nesen <maxim.nesen@oracle.com>", "file_num_lines": 95, "diff_parsed": {"added": [[43, "import org.glassfish.jersey.message.internal.EntityInputStream;"], [75, "        final EntityInputStream entityInputStream =  new EntityInputStream(entityStream);"], [76, "        entityStream = entityInputStream;"], [77, "        if (entityInputStream.isEmpty()) {"], [78, "            throw new NoContentException(LocalizationMessages.ERROR_JSONB_EMPTYSTREAM());"]], "deleted": [[22, "import java.io.PushbackInputStream;"], [75, "        if (entityStream.markSupported()) {"], [76, "            entityStream.mark(1);"], [77, "            if (entityStream.read() == -1) {"], [78, "                throw new NoContentException(LocalizationMessages.ERROR_JSONB_EMPTYSTREAM());"], [79, "            }"], [80, "            entityStream.reset();"], [81, "        } else {"], [82, "            final PushbackInputStream buffer = new PushbackInputStream(entityStream);"], [83, "            final int firstByte = buffer.read();"], [84, "            if (firstByte == -1) {"], [85, "                throw new NoContentException(LocalizationMessages.ERROR_JSONB_EMPTYSTREAM());"], [86, "            }"], [87, "            buffer.unread(firstByte);"], [88, "            entityStream = buffer;"]]}, "num_lines_added": 5, "num_lines_removed": 15}