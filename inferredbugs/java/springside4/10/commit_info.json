{"hash": "eb120980ace26212380aff348c5ff9090da2dc61", "message": "[metrics module] \u4e00\u7cfb\u5217\u6539\u8fdb\uff0c\u5305\u62ec\u4e00\u4e9b\u91cd\u547d\u540d\uff0cJMXExporter\u66f4\u5b8c\u5584\uff0c\u9501\u7684\u6539\u8fdb\uff0c\u6392\u5e8f\u7684\u6539\u8fdb\u7b49", "file_num_lines": 62, "diff_parsed": {"added": [[15, " * \u62a5\u544aReport\u95f4\u9694\u65f6\u95f4\u5185s\u6570\u503c\u7684\u6700\u5c0f/\u6700\u5927\uff0c\u5e73\u5747\u503c\uff0c\u4ee5\u53ca\u67d0\u4e9b\u767e\u5206\u6bd4\u7684\u8bf7\u6c42\u6570\u5c0f\u4e8e\u7684\u503c\u3002"], [21, "\tpublic HistogramMetric latestMetric = new HistogramMetric();"], [31, "\t\tmeasurements.add(value);"], [36, "\t\tList<Long> snapshotList = measurements;"], [38, "\t\tmeasurements = new LinkedList();"], [63, "\t\tlatestMetric = metric;"]], "deleted": [[15, " * \u62a5\u544aReport\u95f4\u9694\u65f6\u95f4\u5185Latency\u6700\u5c0f/\u6700\u5927\uff0c\u5e73\u5747\u503c\uff0c\u4ee5\u53ca\u67d0\u4e9b\u767e\u5206\u6bd4\u7684\u8bf7\u6c42Latency\u5c0f\u4e8e\u7684\u503c\u3002"], [21, "\tpublic HistogramMetric snapshot = new HistogramMetric();"], [25, "\tprivate Object lock = new Object();"], [32, "\t\tsynchronized (lock) {"], [33, "\t\t\tmeasurements.add(value);"], [34, "\t\t}"], [39, "\t\tList<Long> snapshotList = null;"], [41, "\t\tsynchronized (lock) {"], [42, "\t\t\tsnapshotList = measurements;"], [43, "\t\t\tmeasurements = new LinkedList();"], [44, "\t\t}"], [69, "\t\tsnapshot = metric;"]]}, "num_lines_added": 6, "num_lines_removed": 12}