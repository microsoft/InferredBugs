{"hash": "216dfc55093677d113397dcbc2bd409e3e158e45", "message": "update account ledger service", "file_num_lines": 614, "diff_parsed": {"added": [[102, "    private Lock saveLock = new ReentrantLock();"], [116, "        saveLock.lock();"], [117, "        try {"], [118, "            ValidateResult result1 = tx.verify();"], [119, "            if (result1.isFailed()) {"], [120, "                return result1;"], [121, "            }"], [122, "            result1 = this.ledgerService.verifyCoinData(tx, this.getAllUnconfirmedTransaction().getData());"], [123, "            if (result1.isFailed()) {"], [124, "                return result1;"], [125, "            }"], [126, "            return saveTransaction(tx, TransactionInfo.UNCONFIRMED);"], [127, "        } finally {"], [128, "            saveLock.unlock();"], [129, "        }"], [691, "                if (sourceTx == null) {"], [692, "                    return Result.getFailed(AccountLedgerErrorCode.SOURCE_TX_NOT_EXSITS);"]], "deleted": [[115, "        return saveTransaction(tx, TransactionInfo.UNCONFIRMED);"], [207, "            for(Coin coin : rawCoinList){"], [208, "                byte[] ownerBytes = coin.getOwner();"], [209, "                byte[] hashBytes = new byte[34];"], [210, "                System.arraycopy(ownerBytes,0,hashBytes,0,34);"], [211, "                VarInt index = new VarInt(ownerBytes,+34);"], [212, "                Log.info(\"Coin_owner: \"+Hex.encode(coin.getOwner())+\" hash_index: \"+ Hex.encode(hashBytes)+\"_\"+index.value+\" Coin_Na: \"+coin.getNa().toString());"], [213, "            }"], [214, ""], [354, "            ValidateResult result1 = tx.verify();"], [355, "            if (result1.isFailed()) {"], [356, "                return result1;"], [357, "            }"], [358, "            result1 = this.ledgerService.verifyCoinData(tx, this.getAllUnconfirmedTransaction().getData());"], [359, "            if (result1.isFailed()) {"], [360, "                return result1;"], [361, "            }"], [690, "                    if (sourceTx == null) {"], [691, "                        sourceTx = getUnconfirmedTransaction(NulsDigestData.fromDigestHex(Hex.encode(fromSource))).getData();"], [692, "                    }"], [696, "                if(sourceTx == null){"], [697, "                    return Result.getFailed();"], [699, ""]]}, "num_lines_added": 17, "num_lines_removed": 23}