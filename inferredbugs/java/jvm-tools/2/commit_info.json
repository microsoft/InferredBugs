{"hash": "0f9fcb920848423cb0103f2e015002adf0908a59", "message": "Support for Java 10 strings", "file_num_lines": 391, "diff_parsed": {"added": [[268, "\t\tif (obj == null) return null;"], [269, ""], [270, "\t\tif (!\"java.lang.String\".equals(obj.getJavaClass().getName()))"], [271, "\t\t\tthrow new IllegalArgumentException(\"Is not a string: \" + obj.getInstanceId() + \" (\" + obj.getJavaClass().getName() + \")\");"], [272, ""], [273, "\t\tBoolean COMPACT_STRINGS = (Boolean) obj.getJavaClass().getValueOfStaticField(\"COMPACT_STRINGS\");"], [274, "\t\tif (COMPACT_STRINGS == null)"], [275, "\t\t\treturn stringValue_java8(obj); // We're pre Java 9"], [276, ""], [277, "\t\tObject valueInstance = obj.getValueOfField(\"value\");"], [278, "\t\tPrimitiveArrayInstance chars = (PrimitiveArrayInstance) valueInstance;"], [279, ""], [280, "\t\tbyte UTF16 = 1;"], [281, "\t\tbyte coder = COMPACT_STRINGS ? (Byte) obj.getValueOfField(\"coder\") : UTF16;"], [282, "\t\tint len = chars.getLength() >> coder;"], [283, "\t\tchar[] text = new char[len];"], [284, ""], [285, "\t\tList<String> values = (List) chars.getValues();"], [286, "\t\tif (coder == UTF16)"], [287, "\t\t\tfor (int i = 0; i < text.length; i++) {"], [288, "\t\t\t\ttext[i] = (char)"], [289, "\t\t\t\t    ((Integer.parseInt(values.get(i*2+1)) << 8)"], [290, "\t\t\t\t   | (Integer.parseInt(values.get(i*2)) & 0xFF));"], [291, "\t\t\t}"], [292, "\t\telse"], [293, "\t\t\tfor (int i = 0; i < text.length; i++)"], [294, "\t\t\t\ttext[i] = (char) Integer.parseInt(values.get(i));"], [295, ""], [296, "\t\treturn new String(text);"], [297, "\t}"], [298, ""], [299, "    static String stringValue_java8(Instance obj) {"], [504, "}"]], "deleted": [[472, "}"]]}, "num_lines_added": 33, "num_lines_removed": 1}