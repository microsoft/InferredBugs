{"hash": "5aed863cd7b939ebf012f9b7a44371f23cee3230", "message": "multi windows working, but needs refactoring.", "file_num_lines": 239, "diff_parsed": {"added": [[27, "import org.uiautomation.ios.mobileSafari.message.WebkitPage;"], [57, "  private List<WebkitPage> windowHandles;"], [58, "  private String windowHandle;"], [167, "        // TODO freynaud check for alert while page loads."], [291, "  @Override"], [292, "  public void setWindowHandles(List<WebkitPage> handles) {"], [293, "    this.windowHandles = handles;"], [294, ""], [295, "    for (WebkitPage page : handles) {"], [296, "      if (page.getConnection() != null) {"], [297, "        windowHandle = \"\" + page.getPageId();"], [298, "        return;"], [299, "      }"], [300, "    }"], [301, "    windowHandle = null;"], [302, "  }"], [303, ""], [304, "  public List<WebkitPage> getWindowHandles() {"], [305, "    return windowHandles;"], [306, "  }"], [307, ""], [308, "  public String getWindowHandle() {"], [309, "    if (windowHandle == null) {"], [310, "      throw new WebDriverException(\"don't know the current window.\");"], [311, "    }"], [312, "    return windowHandle;"], [313, "  }"], [314, ""], [315, "  public void setWindow(String pageId) throws Exception {"], [316, "    newContext();"], [317, "    session.getWebInspector().getProtocol().switchTo(pageId);"], [318, "    session.getWebInspector().enablePageEvent();"], [319, "  }"]], "deleted": [[155, "    System.err.println(\"new page loaded\");"], [158, "    try {"], [159, "      Thread.sleep(5000);"], [160, "      System.out.println("], [161, "          \"on page load:\" + session.getWebInspector().getProtocol().sendCommand(DOM.getDocument())"], [162, "              .optJSONObject(\"root\").optString(\"documentURL\"));"], [163, "    } catch (Exception e) {"], [164, "      e.printStackTrace();"], [165, "    }"], [184, ""]]}, "num_lines_added": 33, "num_lines_removed": 10}