{"hash": "e6cecc4a6d4978e2e49c1b63294508e6691403de", "message": "Remove deprecations due for 1.6 release (#115)\n\n- Removed EncodingUtil#readTillNullChar(BASE64DecoderStream) since\n  GreenMail now uses JDK 8\n- Refactored SASL message parsing for POP3/SMTP into SaslMessage", "file_num_lines": 94, "diff_parsed": {"added": [[18, "import com.icegreen.greenmail.util.SaslMessage;"], [100, "        final SaslMessage saslMessage;"], [101, "        try {"], [102, "            saslMessage = SaslMessage.parse(EncodingUtil.decodeBase64(initialResponse));"], [103, "        } catch(IllegalArgumentException ex) { // Invalid Base64"], [104, "            log.error(\"Expected base64 encoding but got <\"+initialResponse+\">\", ex); /* GreenMail is just a test server */"], [105, "            conn.println(\"-ERR Authentication failed, expected base64 encoding : \" + ex.getMessage() );"], [106, "            return;"], [107, "        }"], [111, "            user = state.getUser(saslMessage.getAuthcid());"], [114, "            log.error(\"Can not get user <\" + saslMessage.getAuthcid() + \">\", e);"], [120, "            state.authenticate(saslMessage.getPasswd());"]], "deleted": [[9, "import java.io.ByteArrayInputStream;"], [11, "import java.nio.charset.StandardCharsets;"], [20, "import com.sun.mail.util.BASE64DecoderStream;"], [102, "        final BASE64DecoderStream stream = new BASE64DecoderStream("], [103, "                new ByteArrayInputStream(initialResponse.getBytes(StandardCharsets.UTF_8)));"], [104, "        readTillNullChar(stream); // authorizationId Not used"], [105, "        String authenticationId = readTillNullChar(stream);"], [109, "            user = state.getUser(authenticationId);"], [112, "            log.error(\"Can not get user <\" + authenticationId + \">\", e);"], [118, "            state.authenticate(readTillNullChar(stream));"], [128, ""], [129, ""], [130, "    @Deprecated // Remove once JDK baseline is 1.8"], [131, "    private String readTillNullChar(BASE64DecoderStream stream) {"], [132, "        try {"], [133, "            return EncodingUtil.readTillNullChar(stream);"], [134, "        } catch (IOException e) {"], [135, "            log.error(\"Can not decode\", e);"], [136, "            return null;"], [137, "        }"], [138, "    }"]]}, "num_lines_added": 12, "num_lines_removed": 21}