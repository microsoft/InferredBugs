{"hash": "5de9b475299c1c3ee0650b575d69db63aa2b7a8b", "message": "Issue #251 : Append Message is so slow\n\n- Optimized SimpleMessageAttributes.parseMimePart to avoid invoking costly\n  GreenMailUtil.getBody twice\n- Improved getLineCount", "file_num_lines": 256, "diff_parsed": {"added": [[7, "import java.io.*;"], [8, "import java.util.Date;"], [9, "import java.util.Properties;"], [10, "import java.util.Random;"], [17, ""], [18, "import com.icegreen.greenmail.user.GreenMailUser;"], [19, "import org.slf4j.Logger;"], [20, "import org.slf4j.LoggerFactory;"], [107, "     * Counts the number of lines."], [108, "     *"], [109, "     * @param str the input string"], [110, "     * @return Returns the number of lines terminated by '\\n' in string"], [113, "        if (null == str || str.isEmpty()) {"], [114, "            return 0;"], [115, "        }"], [116, "        int count = 1;"], [117, "        for (char c : str.toCharArray()) {"], [118, "            if ('\\n' == c) {"], [119, "                count++;"], [122, "        return count;"]], "deleted": [[7, "import com.icegreen.greenmail.user.GreenMailUser;"], [8, "import org.slf4j.Logger;"], [9, "import org.slf4j.LoggerFactory;"], [10, ""], [17, "import java.io.*;"], [18, "import java.util.Date;"], [19, "import java.util.Properties;"], [20, "import java.util.Random;"], [107, "     * @return Returns the number of lines in any string"], [110, "        LineNumberReader reader = new LineNumberReader(new StringReader(str));"], [111, "        try {"], [112, "            reader.skip(Long.MAX_VALUE);"], [113, "            return reader.getLineNumber();"], [114, "        } catch (IOException e) {"], [115, "            throw new IllegalStateException(e);"], [116, "        } finally {"], [117, "            try {"], [118, "                reader.close();"], [119, "            } catch (IOException e) {"], [120, "                // Ignore but warn"], [121, "                log.warn(\"Can not close reader\", e);"]]}, "num_lines_added": 20, "num_lines_removed": 21}