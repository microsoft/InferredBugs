{"hash": "7ef0a62a48fbecf38e95f74065b2dbe28b5354fa", "message": "Fix Save on Dataset Page\n\n..and first pass at placing fields on the page.", "file_num_lines": 245, "diff_parsed": {"added": [[59, "    private List<DatasetFieldValue> citationValues = new ArrayList();"], [60, ""], [61, "    public List<DatasetFieldValue> getCitationValues() {"], [62, "        return citationValues;"], [63, "    }"], [64, ""], [65, "    public void setCitationValues(List<DatasetFieldValue> citationValues) {"], [66, "        this.citationValues = citationValues;"], [67, "    }"], [68, "    private List<DatasetFieldValue> otherMetadataValues = new ArrayList();"], [69, "    private List<DatasetFieldValue> editValues = new ArrayList();"], [70, ""], [71, ""], [72, "    public List<DatasetFieldValue> getOtherMetadataValues() {"], [73, "        return otherMetadataValues;"], [74, "    }"], [75, ""], [76, "    public void setOtherMetadataValues(List<DatasetFieldValue> otherMetadataValues) {"], [77, "        this.otherMetadataValues = otherMetadataValues;"], [78, "    }"], [83, ""], [84, "    public List<DatasetFieldValue> getEditValues() {"], [85, "        return editValues;"], [86, "    }"], [138, "            editVersion.setVersionNumber(new Long(1));"], [139, "            editValues = editVersion.getDatasetFieldValues();"], [140, "            citationValues = extractValues(editValues, true);"], [141, "            otherMetadataValues = extractValues(editValues, false);"], [142, "            dataset.getVersions().add(editVersion);"], [160, "            editVersion.setDatasetFieldValues(editVersion.initDatasetFieldValues());"], [161, "            editVersion.setVersionNumber(new Long(1));"], [162, "            editValues = editVersion.getDatasetFieldValues();"], [163, "            citationValues = extractValues(editValues, true);"], [164, "            otherMetadataValues = extractValues(editValues, false);"], [259, "        for (DatasetFieldValue dsfv : editVersion.getDatasetFieldValues()){"], [263, "                row[1] = getValuesDataModel(dsfv);"], [272, "    private DataModel getValuesDataModel(DatasetFieldValue datasetFieldValue) {"], [275, "                row[0] = datasetFieldValue;"], [276, "                row[1] = datasetFieldValue.getDatasetField().getDatasetFieldValues(); // used by the remove method"], [301, "    private List<DatasetFieldValue> extractValues(List<DatasetFieldValue> inList, boolean citation){"], [302, "        List retList = new ArrayList();"], [303, "        for (DatasetFieldValue dsfv : inList){"], [304, "            if (citation && dsfv.getDatasetField().getMetadataBlock().isShowOnCreate()) {"], [305, "                  retList.add(dsfv);"], [306, "            } else if (!citation && !dsfv.getDatasetField().getMetadataBlock().isShowOnCreate()) {"], [307, "                  retList.add(dsfv);"], [308, "            }"], [309, "        }"], [310, "        return retList;"], [311, "    }"]], "deleted": [[109, "            dataset.getVersions().add(editVersion);"], [115, "            editVersion.setVersionNumber(new Long(1));"], [144, "        for (DatasetFieldValue dsfv : editVersion.getDatasetFieldValues() ){"], [145, "             System.out.print(\"Value in edit version \" + dsfv.getDatasetField().getTitle() + \" \" + dsfv.getStrValue());"], [146, "        }"], [147, ""], [148, "        dataset.getVersions().get(0).getDatasetFieldValues().get(1).setStrValue(\"Update in code\");"], [150, "        dataset.getVersions().set(0, editVersion);"], [233, "        for (DatasetFieldValue dsfv : dataset.getEditVersion().getDatasetFieldValues()){"], [237, "                row[1] = getValuesDataModel(datasetField);"], [246, "    private DataModel getValuesDataModel(DatasetField datasetField) {"], [248, "        for (DatasetFieldValue dsfv : datasetField.getDatasetFieldValues()) {"], [249, "            if (dsfv.getDatasetVersion().equals(this.editVersion)) {"], [251, "                row[0] = dsfv;"], [252, "                row[1] = datasetField.getDatasetFieldValues(); // used by the remove method"], [254, "            }"], [255, "        }"], [279, ""]]}, "num_lines_added": 50, "num_lines_removed": 18}