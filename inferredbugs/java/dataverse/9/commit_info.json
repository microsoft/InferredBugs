{"hash": "6f479480d5790808a65248b898fde134f7b890c1", "message": "new async-enabled dataset page.", "file_num_lines": 345, "diff_parsed": {"added": [[29, "import javax.faces.event.ActionEvent;"], [240, "    public void refresh(ActionEvent e) {"], [241, "        int i = 0;"], [242, "        // Go through the list of the files on the page..."], [243, "        for (DataFile dataFile : dataset.getFiles()) {"], [244, "            // and see if any are marked as \"ingest-in-progress\":"], [245, "            if (dataFile.isIngestInProgress()) {"], [246, "                Logger.getLogger(DatasetPage.class.getName()).log(Level.INFO, \"Refreshing the status of the file \" + dataFile.getName() + \"...\");"], [247, "                // and if so, reload the file object from the database..."], [248, "                dataFile = datafileService.find(dataFile.getId());"], [249, "                if (!dataFile.isIngestInProgress()) {"], [250, "                    Logger.getLogger(DatasetPage.class.getName()).log(Level.INFO, \"File \" + dataFile.getName() + \" finished ingesting.\");"], [251, "                    // and, if the status has changed - i.e., if the ingest has"], [252, "                    // completed, or failed, update the object in the list of"], [253, "                    // files visible to the page:"], [254, "                    dataset.getFiles().set(i, dataFile);"], [255, "                }"], [256, "            }"], [257, "            i++;"], [258, "        }"], [259, "    }"], [260, ""], [318, "                        /*"], [326, "                        */"], [327, "                        dFile.SetIngestScheduled();"], [388, ""], [389, "        // Queue the ingest jobs for asynchronous execution:"], [390, ""], [391, "        for (DataFile dataFile : dataset.getFiles()) {"], [392, "            if (dataFile.isIngestScheduled()) {"], [393, "                dataFile.SetIngestInProgress();"], [394, "                Logger.getLogger(DatasetPage.class.getName()).log(Level.INFO, \"Attempting to queue the file \" + dataFile.getName() + \" for ingest.\");"], [395, "                ingestService.asyncIngestAsTabular(dataFile);"], [396, "            }"], [397, "        }"]], "deleted": [[296, ""]]}, "num_lines_added": 35, "num_lines_removed": 1}