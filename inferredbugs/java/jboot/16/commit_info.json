{"hash": "4b4e199616300fc5b5e69227e42f07caf6394f39", "message": "fixed: \u4f18\u5316Jboot\u4ee3\u7801\u751f\u6210\u903b\u8f91\uff0c\u4f7f\u4e4b\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u3002", "file_num_lines": 37, "diff_parsed": {"added": [[21, "import io.jboot.codegen.CodeGenHelpler;"], [23, "import javax.sql.DataSource;"], [62, "        DataSource dataSource = CodeGenHelpler.getDatasource();"], [64, "        CodeGenHelpler.excludeTables(tableMetaList, excludeTables);"]], "deleted": [[20, "import com.zaxxer.hikari.HikariConfig;"], [21, "import com.zaxxer.hikari.HikariDataSource;"], [23, "import io.jboot.config.JbootProperties;"], [24, "import io.jboot.db.datasource.DatasourceConfig;"], [25, "import io.jboot.utils.StringUtils;"], [27, "import java.util.ArrayList;"], [29, "import java.util.Set;"], [67, "        DatasourceConfig datasourceConfig = JbootProperties.get(\"jboot.datasource\", DatasourceConfig.class);"], [68, ""], [69, "        HikariConfig config = new HikariConfig();"], [70, "        config.setJdbcUrl(datasourceConfig.getUrl());"], [71, "        config.setUsername(datasourceConfig.getUser());"], [72, "        config.setPassword(datasourceConfig.getPassword());"], [73, "        config.addDataSourceProperty(\"cachePrepStmts\", \"true\");"], [74, "        config.addDataSourceProperty(\"prepStmtCacheSize\", \"250\");"], [75, "        config.addDataSourceProperty(\"prepStmtCacheSqlLimit\", \"2048\");"], [76, "        config.setDriverClassName(\"com.mysql.jdbc.Driver\");"], [77, ""], [78, "        HikariDataSource dataSource = new HikariDataSource(config);"], [79, ""], [81, ""], [82, "        if (StringUtils.isNotBlank(excludeTables)) {"], [83, "            List<TableMeta> newTableMetaList = new ArrayList<>();"], [84, "            Set<String> excludeTableSet = StringUtils.splitToSet(excludeTables.toLowerCase(), \",\");"], [85, "            for (TableMeta tableMeta : tableMetaList) {"], [86, "                if (excludeTableSet.contains(tableMeta.name.toLowerCase())) {"], [87, "                    System.out.println(\"exclude table : \" + tableMeta.name);"], [88, "                    continue;"], [89, "                }"], [90, "                newTableMetaList.add(tableMeta);"], [91, "            }"], [92, "            tableMetaList = newTableMetaList;"], [93, "        }"]]}, "num_lines_added": 4, "num_lines_removed": 33}