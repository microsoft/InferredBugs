{"hash": "5ca115ff1d6da9d5c2cad63cf733ff018b301b02", "message": "remove mq component dependency from ehredis cache", "file_num_lines": 164, "diff_parsed": {"added": [[20, "import io.jboot.component.redis.JbootRedis;"], [24, "import io.jboot.core.serializer.ISerializer;"], [26, "import redis.clients.jedis.BinaryJedisPubSub;"], [34, "public class JbootEhredisCacheImpl extends JbootCacheBase {"], [40, "    private JbootRedis redis;"], [41, "    private ISerializer serializer;"], [51, "        this.serializer = Jboot.me().getSerializer();"], [53, "        this.redis = redisCacheImpl.getRedis();"], [54, "        this.redis.subscribe(new BinaryJedisPubSub() {"], [55, "            @Override"], [56, "            public void onMessage(byte[] channel, byte[] message) {"], [57, "                JbootEhredisCacheImpl.this.onMessage((String) serializer.deserialize(channel), serializer.deserialize(message));"], [58, "            }"], [59, "        }, serializer.serialize(channel));"], [174, ""], [184, "        JbootEhredisMessage message = new JbootEhredisMessage(clientId, action, cacheName, key);"], [185, "        redis.publish(serializer.serialize(channel), serializer.serialize(message));"]], "deleted": [[23, "import io.jboot.core.mq.JbootmqMessageListener;"], [32, "public class JbootEhredisCacheImpl extends JbootCacheBase implements JbootmqMessageListener {"], [48, "        Jboot.me().getMq().addMessageListener(this, channel);"], [163, ""], [173, "        Jboot.me().getMq().publish(new JbootEhredisMessage(clientId, action, cacheName, key), channel);"], [176, "    @Override"]]}, "num_lines_added": 17, "num_lines_removed": 6}