{"hash": "4b4e199616300fc5b5e69227e42f07caf6394f39", "message": "fixed: \u4f18\u5316Jboot\u4ee3\u7801\u751f\u6210\u903b\u8f91\uff0c\u4f7f\u4e4b\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u3002", "file_num_lines": 64, "diff_parsed": {"added": [[23, "import io.jboot.codegen.CodeGenHelpler;"], [25, "import javax.sql.DataSource;"], [77, "        DataSource dataSource = CodeGenHelpler.getDatasource();"], [79, "        CodeGenHelpler.excludeTables(tableMetaList, excludeTables);"]], "deleted": [[22, "import com.zaxxer.hikari.HikariConfig;"], [23, "import com.zaxxer.hikari.HikariDataSource;"], [25, "import io.jboot.config.JbootProperties;"], [26, "import io.jboot.db.datasource.DatasourceConfig;"], [27, "import io.jboot.utils.StringUtils;"], [32, "import java.util.ArrayList;"], [34, "import java.util.Set;"], [82, "        DatasourceConfig datasourceConfig = JbootProperties.get(\"jboot.datasource\", DatasourceConfig.class);"], [83, ""], [84, "        HikariConfig config = new HikariConfig();"], [85, "        config.setJdbcUrl(datasourceConfig.getUrl());"], [86, "        config.setUsername(datasourceConfig.getUser());"], [87, "        config.setPassword(datasourceConfig.getPassword());"], [88, "        config.addDataSourceProperty(\"cachePrepStmts\", \"true\");"], [89, "        config.addDataSourceProperty(\"prepStmtCacheSize\", \"250\");"], [90, "        config.addDataSourceProperty(\"prepStmtCacheSqlLimit\", \"2048\");"], [91, "        config.setDriverClassName(\"com.mysql.jdbc.Driver\");"], [92, ""], [93, "        HikariDataSource dataSource = new HikariDataSource(config);"], [94, ""], [96, ""], [97, "        if (StringUtils.isNotBlank(excludeTables)) {"], [98, "            List<TableMeta> newTableMetaList = new ArrayList<>();"], [99, "            Set<String> excludeTableSet = StringUtils.splitToSet(excludeTables.toLowerCase(), \",\");"], [100, "            for (TableMeta tableMeta : tableMetaList) {"], [101, "                if (excludeTableSet.contains(tableMeta.name.toLowerCase())) {"], [102, "                    System.out.println(\"exclude table : \" + tableMeta.name);"], [103, "                    continue;"], [104, "                }"], [105, "                newTableMetaList.add(tableMeta);"], [106, "            }"], [107, "            tableMetaList = newTableMetaList;"], [108, "        }"]]}, "num_lines_added": 4, "num_lines_removed": 33}