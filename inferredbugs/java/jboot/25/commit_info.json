{"hash": "8c6282cc51058f7148aad7e35ea2c4daac9233a2", "message": "add okhttp client for jboot http component", "file_num_lines": 198, "diff_parsed": {"added": [[18, "import com.jfinal.log.Log;"], [19, "import io.jboot.Jboot;"], [20, "import io.jboot.core.http.JbootHttpBase;"], [23, "import io.jboot.exception.JbootException;"], [37, "public class JbootHttpImpl extends JbootHttpBase {"], [38, ""], [39, "    private static final Log LOG = Log.getLog(JbootHttpImpl.class);"], [63, "                if (Jboot.me().isDevMode()) {"], [64, "                    LOG.debug(\"do get request:\" + request.getRequestUrl());"], [65, "                }"], [80, "                if (Jboot.me().isDevMode()) {"], [81, "                    LOG.debug(\"do post request:\" + request.getRequestUrl());"], [82, "                }"], [83, ""], [145, "            LOG.warn(ex.toString(), ex);"], [193, "            if (request.isGetRquest()) {"], [194, "                buildGetUrlWithParams(request);"], [195, "            }"], [217, ""], [220, ""], [221, "            KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());"], [222, "            keyManagerFactory.init(clientStore, request.getCertPass().toCharArray());"], [223, "            KeyManager[] keyManagers = keyManagerFactory.getKeyManagers();"], [224, ""], [225, ""], [226, "            TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());"], [227, "            trustManagerFactory.init(clientStore);"], [228, ""], [230, "            sslContext.init(keyManagers, trustManagerFactory.getTrustManagers(), new SecureRandom());"], [231, ""], [238, "                TrustManager[] tm = {trustAnyTrustManager};"], [247, "    private static X509TrustManager trustAnyTrustManager = new X509TrustManager() {"]], "deleted": [[18, "import io.jboot.exception.JbootException;"], [21, "import io.jboot.core.http.JbootHttp;"], [29, "import java.net.URLEncoder;"], [36, "public class JbootHttpImpl implements JbootHttp {"], [163, "    public static String buildParams(JbootHttpRequest request) throws UnsupportedEncodingException {"], [164, "        Map<String, Object> params = request.getParams();"], [165, "        if (params == null || params.isEmpty()) {"], [166, "            return null;"], [167, "        }"], [168, ""], [169, "        StringBuilder builder = new StringBuilder();"], [170, "        for (Map.Entry<String, Object> entry : params.entrySet()) {"], [171, "            if (entry.getKey() != null && StringUtils.isNotBlank(entry.getValue()))"], [172, "                builder.append(entry.getKey().trim()).append(\"=\")"], [173, "                        .append(URLEncoder.encode(entry.getValue().toString(), request.getCharset())).append(\"&\");"], [174, "        }"], [175, ""], [176, "        if (builder.charAt(builder.length() - 1) == '&') {"], [177, "            builder.deleteCharAt(builder.length() - 1);"], [178, "        }"], [179, ""], [180, "        return builder.toString();"], [181, "    }"], [182, ""], [183, ""], [226, "            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());"], [227, "            kmf.init(clientStore, request.getCertPass().toCharArray());"], [228, "            KeyManager[] kms = kmf.getKeyManagers();"], [230, "            sslContext.init(kms, null, new SecureRandom());"], [237, "                TrustManager[] tm = {xtm};"], [246, "    private static X509TrustManager xtm = new X509TrustManager() {"]]}, "num_lines_added": 32, "num_lines_removed": 31}