{"hash": "6f70812035457999705c0bd763eb573fc468fd2b", "message": "Manifold core perf\n- wire up JCTree parents more efficiently\n- add some simple tools to measure dynamic type manifold compilation perf\n- minor cleanup", "file_num_lines": 286, "diff_parsed": {"added": [[39, "  private ParentMap _parents;"], [60, ""], [61, "    _parents = new ParentMap();"], [127, "    return _parents.getParent( node );"], [344, "  private class ParentMap"], [345, "  {"], [346, "    private Map<CompilationUnitTree, Map<Tree, Tree>> _parents;"], [347, ""], [348, "    private ParentMap()"], [349, "    {"], [350, "      _parents = new HashMap<>();"], [351, "    }"], [352, ""], [353, "    private Tree getParent( Tree child )"], [354, "    {"], [355, "      Map<Tree, Tree> parents = _parents.computeIfAbsent( _compilationUnit, cu -> {"], [356, "        Map<Tree, Tree> map = new HashMap<>();"], [357, "        new ParentTreePathScanner( map ).scan( cu, null );"], [358, "        return map;"], [359, "      } );"], [360, "      return parents.get( child );"], [361, "    }"], [362, "  }"], [363, ""]], "deleted": [[122, "  public TreePath2 getPath( Tree node )"], [123, "  {"], [124, "    return TreePath2.getPath( getCompilationUnit(), node );"], [125, "  }"], [126, ""], [129, "    TreePath2 path = TreePath2.getPath( getCompilationUnit(), node );"], [130, "    if( path == null )"], [131, "    {"], [132, "      // null is indiciative of Generation phase where trees are no longer attached to symobls so the comp unit is detached"], [133, "      // use the root tree instead, which is mostly ok, mostly"], [134, "      path = TreePath2.getPath( _tree, node );"], [135, "    }"], [136, "    TreePath2 parentPath = path.getParentPath();"], [137, "    return parentPath == null ? null : parentPath.getLeaf();"]]}, "num_lines_added": 24, "num_lines_removed": 14}