{"hash": "a8fe7257b3f922552a698ec092b8529a41f0e1ff", "message": "fixed a problem with transformed picking\n Changes to be committed:\n\tmodified:   jung-visualization/src/main/java/edu/uci/ics/jung/visualization/picking/ShapePickSupport.java\n\tmodified:   jung-visualization/src/main/java/edu/uci/ics/jung/visualization/picking/ViewLensShapePickSupport.java", "file_num_lines": 349, "diff_parsed": {"added": [[223, ""], [224, "    // move the x,y to layout coordinates"], [225, "    Point2D pickPointInView = new Point2D.Double(x, y);"], [226, "    Point2D pickPointInLayout ="], [227, "        vv.getRenderContext()"], [228, "            .getMultiLayerTransformer()"], [229, "            .inverseTransform(Layer.LAYOUT, pickPointInView);"], [230, "    if (log.isTraceEnabled()) {"], [231, "      log.trace(\"pickPoint in view {} layout {}\", pickPointInView, pickPointInLayout);"], [232, "    }"], [233, ""], [234, "    double lx = pickPointInLayout.getX();"], [235, "    double ly = pickPointInLayout.getY();"], [236, ""], [237, "    SpatialQuadTree<V> leaf = spatial.getContainingQuadTreeLeaf(lx, ly);"], [238, "    if (log.isTraceEnabled()) {"], [239, "      log.trace(\"leaf for {},{} is {}\", lx, ly, leaf);"], [240, "    }"], [241, "    if (leaf == null) return null;"], [247, "    Ellipse2D target = new Ellipse2D.Double(lx - radius, ly - radius, diameter, diameter);"], [248, "    if (log.isTraceEnabled()) {"], [249, "      log.trace(\"target is {}\", target);"], [250, "    }"], [340, ""], [341, "    // translate the shape to layout coordinates"], [342, "    Shape layoutShape ="], [343, "        vv.getRenderContext().getMultiLayerTransformer().inverseTransform(Layer.LAYOUT, shape);"], [344, ""], [345, "    Collection<V> visible = spatial.getVisibleNodes(layoutShape);"]], "deleted": [[223, "    SpatialQuadTree<V> leaf = spatial.getContainingQuadTreeLeaf(x, y);"], [229, "    Ellipse2D target = new Ellipse2D.Double(x - radius, y - radius, diameter, diameter);"], [319, "    Collection<V> visible = spatial.getVisibleNodes(shape);"]]}, "num_lines_added": 29, "num_lines_removed": 3}