{"hash": "38fc86e0237721349fa7f72e5d4a4a4cbf403376", "message": "[update] refactor the code to Java 8 Stream API,especially file\nprocessing", "file_num_lines": 75, "diff_parsed": {"added": [[8, "import com.brianway.webporter.util.FileHelper;"], [20, "import java.util.ArrayList;"], [27, " * \u4ece\u539f\u59cb\u4e0b\u8f7d\u6570\u636e\u63d0\u53d6 url_token,\u7528\u4e8e\u751f\u6210\u7528\u6237url"], [34, "    private final static String URL_TOKEN_FILENAME = \"url_tokens\";"], [36, "    private final static String DEFAULT_PATH = new ZhihuConfiguration().getFolloweePath() + URL_TOKEN_FILENAME;"], [44, "            tokens.forEach(urlTokens::add);"], [50, "        BaseAssembler.create(new FileRawInput(folder), this).thread(10).run();"], [65, "            urlTokens.forEach(printWriter::println);"], [74, "        List<String> tokens = FileHelper.processFile(path, br -> {"], [75, "            List<String> ts = new ArrayList<>();"], [77, "            while ((s = br.readLine()) != null) {"], [78, "                ts.add(s);"], [81, "            return ts;"], [82, "        }).orElse(new ArrayList<>());"], [84, "        return new HashSet<>(tokens);"]], "deleted": [[14, "import java.io.BufferedReader;"], [17, "import java.io.FileReader;"], [27, " * Created by brian on 16/12/18."], [34, "    public final static String URL_TOKEN_FILENAME = \"url_tokens\";"], [36, "    public final static String DEFAULT_PATH = new ZhihuConfiguration().getFolloweePath()"], [37, "            + URL_TOKEN_FILENAME;"], [45, "            for (String token : tokens) {"], [46, "                urlTokens.add(token);"], [47, "            }"], [53, "        BaseAssembler.create(new FileRawInput(folder), this)"], [54, "                .thread(10)"], [55, "                .run();"], [70, ""], [71, "            for (String token : urlTokens) {"], [72, "                printWriter.println(token);"], [73, "            }"], [74, ""], [83, "        Set<String> urlTokens = new HashSet<>();"], [84, "        BufferedReader in;"], [85, "        try {"], [86, "            in = new BufferedReader("], [87, "                    new FileReader(new File(path))"], [88, "            );"], [89, ""], [91, "            while ((s = in.readLine()) != null) {"], [92, "                urlTokens.add(s);"], [95, "            in.close();"], [96, "            return urlTokens;"], [97, "        } catch (IOException e) {"], [98, "            logger.error(\"IOException when readFollowees user data from file : {}\", e);"], [99, "            return null;"], [100, "        }"]]}, "num_lines_added": 15, "num_lines_removed": 32}