{"hash": "38fc86e0237721349fa7f72e5d4a4a4cbf403376", "message": "[update] refactor the code to Java 8 Stream API,especially file\nprocessing", "file_num_lines": 64, "diff_parsed": {"added": [[10, "import java.nio.file.Files;"], [11, "import java.nio.file.Paths;"], [13, "import java.util.Optional;"], [14, "import java.util.stream.Collectors;"], [46, "        String path = inItem.getPath();"], [47, "        return readFileAsLines(path);"], [48, "    }"], [49, ""], [50, "    public static List<String> readFileAsLines(String filePath) {"], [51, "        List<String> lines = null;"], [53, "            lines = Files.lines(Paths.get(filePath)).collect(Collectors.toList());"], [57, "        return lines;"], [60, "    public static Optional<List<String>> processFile(String filePath, BufferdReaderProcessor p) {"], [62, "            return Optional.ofNullable(p.process(br));"], [63, "        } catch (IOException e) {"], [64, "            logger.error(\"IOException when process file : {}\", e);"], [66, "        return Optional.empty();"], [69, "    public static Optional<List<String>> processFile(File file, BufferdReaderProcessor p) {"], [70, "        return processFile(file.getPath(), p);"]], "deleted": [[10, "import java.util.ArrayList;"], [43, "        BufferedReader in = null;"], [44, "        List<String> lines = new ArrayList<>();"], [46, "            in = new BufferedReader("], [47, "                    new FileReader(inItem)"], [48, "            );"], [49, "            String s = in.readLine();"], [50, "            while (s != null) {"], [51, "                lines.add(s);"], [52, "                s = in.readLine();"], [53, "            }"], [54, "            in.close();"], [55, "            return lines;"], [58, "            return null;"], [62, "    public static List<String> readFileAsLines(String filePath) {"], [63, "        File file = new File(filePath);"], [64, "        return readFileAsLines(file);"], [65, "    }"], [66, ""], [67, "    public static List<String> processFile(String filePath, BufferdReaderProcessor p) throws IOException {"], [69, "            return p.process(br);"], [73, "    public static List<String> processFile(File file, BufferdReaderProcessor p) throws IOException {"], [74, "        try (BufferedReader br = new BufferedReader(new FileReader(file))) {"], [75, "            return p.process(br);"], [76, "        }"]]}, "num_lines_added": 19, "num_lines_removed": 25}