{"hash": "b129117ee922bc2b3e1f90808f1bc7101b3cc6dd", "message": "#254 Fix NPE reading TIFF Metadata when BitsPerSample not set", "file_num_lines": 1008, "diff_parsed": {"added": [[327, "        int numChannelsValue = getSamplesPerPixelWithFallback();"], [417, "    private int getSamplesPerPixelWithFallback() {"], [418, "        // SamplePerPixel defaults to 1, but we'll check BitsPerSample to be sure"], [419, "        Entry samplesPerPixelTag = ifd.getEntryById(TIFF.TAG_SAMPLES_PER_PIXEL);"], [420, "        Entry bitsPerSampleTag = ifd.getEntryById(TIFF.TAG_BITS_PER_SAMPLE);"], [421, ""], [422, "        return samplesPerPixelTag != null"], [423, "                               ? getValueAsInt(samplesPerPixelTag)"], [424, "                               : bitsPerSampleTag != null ? bitsPerSampleTag.valueCount() : 1;"], [425, "    }"], [426, ""], [594, "        String bitsPerSampleValue = bitsPerSampleTag == null"], [602, "        int numChannelsValue = getSamplesPerPixelWithFallback();"]], "deleted": [[327, ""], [328, "        Entry samplesPerPixelTag = ifd.getEntryById(TIFF.TAG_SAMPLES_PER_PIXEL);"], [329, "        Entry bitsPerSampleTag = ifd.getEntryById(TIFF.TAG_BITS_PER_SAMPLE);"], [330, "        int numChannelsValue = samplesPerPixelTag != null"], [331, "                               ? getValueAsInt(samplesPerPixelTag)"], [332, "                               : bitsPerSampleTag.valueCount();"], [589, "        String bitsPerSampleValue = bitsPerSampleTag == null &&"], [590, "                                            (photometricInterpretationValue == TIFFBaseline.PHOTOMETRIC_WHITE_IS_ZERO ||"], [591, "                                                    photometricInterpretationValue == TIFFBaseline.PHOTOMETRIC_BLACK_IS_ZERO)"], [599, "        Entry samplesPerPixelTag = ifd.getEntryById(TIFF.TAG_SAMPLES_PER_PIXEL);"], [600, "        int numChannelsValue = samplesPerPixelTag != null"], [601, "                               ? getValueAsInt(samplesPerPixelTag)"], [602, "                               : bitsPerSampleTag.valueCount();"]]}, "num_lines_added": 13, "num_lines_removed": 13}