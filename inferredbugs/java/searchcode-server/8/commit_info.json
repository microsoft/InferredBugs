{"hash": "c7188f5048cbef6f59af45f1a7ceba14b926fe4a", "message": "Refactor for readability", "file_num_lines": 116, "diff_parsed": {"added": [[38, "        String value = this.getDataByName(key);"], [51, "        Connection connection = null;"], [52, "        PreparedStatement preparedStatement = null;"], [53, "        ResultSet resultSet = null;"], [56, "            connection = this.dbConfig.getConnection();"], [57, "            preparedStatement = connection.prepareStatement(\"select key,value from \\\"data\\\" where key = ?;\");"], [58, "            preparedStatement.setString(1, key);"], [60, "            resultSet = preparedStatement.executeQuery();"], [62, "            while (resultSet.next()) {"], [63, "                value = resultSet.getString(\"value\");"], [67, "            Singleton.getLogger().severe(\" caught a \" + ex.getClass() + \"\\n with message: \" + ex.getMessage() + \" while trying to get \" + key);"], [70, "            Helpers.closeQuietly(resultSet);"], [71, "            Helpers.closeQuietly(preparedStatement);"], [72, "            Helpers.closeQuietly(connection);"], [86, "        Connection connection = null;"], [87, "        PreparedStatement preparedStatement = null;"], [89, "        try {"], [90, "            connection = this.dbConfig.getConnection();"], [92, "            if (existing != null) {"], [93, "                preparedStatement = connection.prepareStatement(\"UPDATE \\\"data\\\" SET \\\"key\\\" = ?, \\\"value\\\" = ? WHERE  \\\"key\\\" = ?\");"], [94, "                preparedStatement.setString(1, key);"], [95, "                preparedStatement.setString(2, value);"], [96, "                preparedStatement.setString(3, key);"], [98, "            else {"], [99, "                isNew = true;"], [100, "                preparedStatement = connection.prepareStatement(\"INSERT INTO data(\\\"key\\\",\\\"value\\\") VALUES (?,?)\");"], [101, "                preparedStatement.setString(1, key);"], [102, "                preparedStatement.setString(2, value);"], [105, "            preparedStatement.execute();"], [106, "        }"], [107, "        catch(SQLException ex) {"], [108, "            Singleton.getLogger().severe(\" caught a \" + ex.getClass() + \"\\n with message: \" + ex.getMessage());"], [109, "        }"], [110, "        finally {"], [111, "            Helpers.closeQuietly(preparedStatement);"], [112, "            Helpers.closeQuietly(connection);"], [129, "        Connection connection = null;"], [130, "        PreparedStatement preparedStatement = null;"], [131, "        ResultSet resultSet = null;"], [134, "            connection = this.dbConfig.getConnection();"], [135, "            preparedStatement = connection.prepareStatement(\"SELECT name FROM sqlite_master WHERE type='table' AND name='data';\");"], [137, "            resultSet = preparedStatement.executeQuery();"], [139, "            while (resultSet.next()) {"], [140, "                value = resultSet.getString(\"name\");"], [144, "                preparedStatement = connection.prepareStatement(\"CREATE TABLE \\\"data\\\" (\\\"key\\\" VARCHAR PRIMARY KEY  NOT NULL , \\\"value\\\" VARCHAR);\");"], [145, "                preparedStatement.execute();"], [149, "            Singleton.getLogger().severe(\" caught a \" + ex.getClass() + \"\\n with message: \" + ex.getMessage());"], [152, "            Helpers.closeQuietly(resultSet);"], [153, "            Helpers.closeQuietly(preparedStatement);"], [154, "            Helpers.closeQuietly(connection);"]], "deleted": [[30, ""], [31, "    private static final LoggerWrapper LOGGER = Singleton.getLogger();"], [32, ""], [34, ""], [42, "        String value = getDataByName(key);"], [55, "        Connection conn = null;"], [56, "        PreparedStatement stmt = null;"], [57, "        ResultSet rs = null;"], [60, "            conn = this.dbConfig.getConnection();"], [61, "            stmt = conn.prepareStatement(\"select key,value from \\\"data\\\" where key = ?;\");"], [62, "            stmt.setString(1, key);"], [64, "            rs = stmt.executeQuery();"], [66, "            while (rs.next()) {"], [67, "                value = rs.getString(\"value\");"], [71, "            LOGGER.severe(\" caught a \" + ex.getClass() + \"\\n with message: \" + ex.getMessage() + \" while trying to get \" + key);"], [74, "            Helpers.closeQuietly(rs);"], [75, "            Helpers.closeQuietly(stmt);"], [76, "            Helpers.closeQuietly(conn);"], [88, ""], [91, "        Connection conn = null;"], [92, "        PreparedStatement stmt = null;"], [93, "        ResultSet rs = null;"], [94, ""], [95, "        if (existing != null) {"], [96, "            try {"], [97, "                conn = this.dbConfig.getConnection();"], [98, "                stmt = conn.prepareStatement(\"UPDATE \\\"data\\\" SET \\\"key\\\" = ?, \\\"value\\\" = ? WHERE  \\\"key\\\" = ?\");"], [100, "                stmt.setString(1, key);"], [101, "                stmt.setString(2, value);"], [102, "                stmt.setString(3, key);"], [104, "                stmt.execute();"], [105, "            }"], [106, "            catch(SQLException ex) {"], [107, "                LOGGER.severe(\" caught a \" + ex.getClass() + \"\\n with message: \" + ex.getMessage());"], [109, "            finally {"], [110, "                Helpers.closeQuietly(rs);"], [111, "                Helpers.closeQuietly(stmt);"], [112, "                Helpers.closeQuietly(conn);"], [114, "        }"], [115, "        else {"], [116, "            isNew = true;"], [117, "            try {"], [118, "                conn = this.dbConfig.getConnection();"], [119, "                stmt = conn.prepareStatement(\"INSERT INTO data(\\\"key\\\",\\\"value\\\") VALUES (?,?)\");"], [121, "                stmt.setString(1, key);"], [122, "                stmt.setString(2, value);"], [123, ""], [124, "                stmt.execute();"], [125, "            }"], [126, "            catch(SQLException ex) {"], [127, "                LOGGER.severe(\" caught a \" + ex.getClass() + \"\\n with message: \" + ex.getMessage());"], [128, "            }"], [129, "            finally {"], [130, "                Helpers.closeQuietly(rs);"], [131, "                Helpers.closeQuietly(stmt);"], [132, "                Helpers.closeQuietly(conn);"], [133, "            }"], [150, "        Connection conn = null;"], [151, "        PreparedStatement stmt = null;"], [152, "        ResultSet rs = null;"], [155, "            conn = this.dbConfig.getConnection();"], [156, "            stmt = conn.prepareStatement(\"SELECT name FROM sqlite_master WHERE type='table' AND name='data';\");"], [158, "            rs = stmt.executeQuery();"], [160, "            while (rs.next()) {"], [161, "                value = rs.getString(\"name\");"], [165, "                stmt = conn.prepareStatement(\"CREATE TABLE \\\"data\\\" (\\\"key\\\" VARCHAR PRIMARY KEY  NOT NULL , \\\"value\\\" VARCHAR);\");"], [166, "                stmt.execute();"], [170, "            LOGGER.severe(\" caught a \" + ex.getClass() + \"\\n with message: \" + ex.getMessage());"], [173, "            Helpers.closeQuietly(rs);"], [174, "            Helpers.closeQuietly(stmt);"], [175, "            Helpers.closeQuietly(conn);"]]}, "num_lines_added": 50, "num_lines_removed": 71}