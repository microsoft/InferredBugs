{"hash": "52a6d2dba0dc0e5e90804fc99381a7cc49a91a47", "message": "Clean up closing", "file_num_lines": 280, "diff_parsed": {"added": [[15, "import com.searchcode.app.dto.ConnStmtRs;"], [56, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [59, "            connStmtRs.conn = this.dbConfig.getConnection();"], [60, "            connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo order by rowid desc;\");"], [61, ""], [62, "            connStmtRs.rs = connStmtRs.stmt.executeQuery();"], [63, ""], [64, "            while (connStmtRs.rs.next()) {"], [65, "                int rowId = connStmtRs.rs.getInt(\"rowid\");"], [66, "                String repoName = connStmtRs.rs.getString(\"name\");"], [67, "                String repoScm = connStmtRs.rs.getString(\"scm\");"], [68, "                String repoUrl = connStmtRs.rs.getString(\"url\");"], [69, "                String repoUsername = connStmtRs.rs.getString(\"username\");"], [70, "                String repoPassword = connStmtRs.rs.getString(\"password\");"], [71, "                String repoSource = connStmtRs.rs.getString(\"source\");"], [72, "                String repoBranch = connStmtRs.rs.getString(\"branch\");"], [73, "                String repoData = connStmtRs.rs.getString(\"data\");"], [89, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"], [122, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [125, "            connStmtRs.conn = this.dbConfig.getConnection();"], [126, "            connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo order by rowid desc limit ?, ?;\");"], [128, "            connStmtRs.stmt.setInt(1, offset);"], [129, "            connStmtRs.stmt.setInt(2, pageSize);"], [131, "            connStmtRs.rs = connStmtRs.stmt.executeQuery();"], [133, "            while (connStmtRs.rs.next()) {"], [134, "                int rowId = connStmtRs.rs.getInt(\"rowid\");"], [135, "                String repoName = connStmtRs.rs.getString(\"name\");"], [136, "                String repoScm = connStmtRs.rs.getString(\"scm\");"], [137, "                String repoUrl = connStmtRs.rs.getString(\"url\");"], [138, "                String repoUsername = connStmtRs.rs.getString(\"username\");"], [139, "                String repoPassword = connStmtRs.rs.getString(\"password\");"], [140, "                String repoSource = connStmtRs.rs.getString(\"source\");"], [141, "                String repoBranch = connStmtRs.rs.getString(\"branch\");"], [142, "                String repoData = connStmtRs.rs.getString(\"data\");"], [158, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"], [166, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [169, "            connStmtRs.conn = this.dbConfig.getConnection();"], [170, "            connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"select count(rowid) as totalcount from repo;\");"], [172, "            connStmtRs.rs = connStmtRs.stmt.executeQuery();"], [174, "            while (connStmtRs.rs.next()) {"], [175, "                totalCount = connStmtRs.rs.getInt(\"totalcount\");"], [180, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"], [192, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [195, "            connStmtRs.conn = this.dbConfig.getConnection();"], [196, "            connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo where name=?;\");"], [197, ""], [198, "            connStmtRs.stmt.setString(1, repositoryName);"], [199, "            connStmtRs.rs = connStmtRs.stmt.executeQuery();"], [200, ""], [201, "            while (connStmtRs.rs.next()) {"], [202, "                int rowId = connStmtRs.rs.getInt(\"rowid\");"], [203, "                String repoName = connStmtRs.rs.getString(\"name\");"], [204, "                String repoScm = connStmtRs.rs.getString(\"scm\");"], [205, "                String repoUrl = connStmtRs.rs.getString(\"url\");"], [206, "                String repoUsername = connStmtRs.rs.getString(\"username\");"], [207, "                String repoPassword = connStmtRs.rs.getString(\"password\");"], [208, "                String repoSource = connStmtRs.rs.getString(\"source\");"], [209, "                String repoBranch = connStmtRs.rs.getString(\"branch\");"], [210, "                String repoData = connStmtRs.rs.getString(\"data\");"], [228, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"], [240, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [243, "            connStmtRs.conn = this.dbConfig.getConnection();"], [244, "            connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo where url=?;\");"], [245, "            connStmtRs.stmt.setString(1, repositoryUrl);"], [246, "            connStmtRs.rs = connStmtRs.stmt.executeQuery();"], [247, ""], [248, "            while (connStmtRs.rs.next()) {"], [249, "                int rowId = connStmtRs.rs.getInt(\"rowid\");"], [250, "                String repoName = connStmtRs.rs.getString(\"name\");"], [251, "                String repoScm = connStmtRs.rs.getString(\"scm\");"], [252, "                String repoUrl = connStmtRs.rs.getString(\"url\");"], [253, "                String repoUsername = connStmtRs.rs.getString(\"username\");"], [254, "                String repoPassword = connStmtRs.rs.getString(\"password\");"], [255, "                String repoSource = connStmtRs.rs.getString(\"source\");"], [256, "                String repoBranch = connStmtRs.rs.getString(\"branch\");"], [257, "                String repoData = connStmtRs.rs.getString(\"data\");"], [275, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"], [282, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [285, "            connStmtRs.conn = this.dbConfig.getConnection();"], [286, "            connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"delete from repo where name=?;\");"], [287, "            connStmtRs.stmt.setString(1, repositoryName);"], [288, "            connStmtRs.stmt.execute();"], [292, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"], [298, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [303, "            connStmtRs.conn = this.dbConfig.getConnection();"], [305, "                connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"UPDATE \\\"repo\\\" SET \\\"name\\\" = ?, \\\"scm\\\" = ?, \\\"url\\\" = ?, \\\"username\\\" = ?, \\\"password\\\" = ?, \\\"source\\\" = ?, \\\"branch\\\" = ?, \\\"data\\\" = ? WHERE  \\\"name\\\" = ?\");"], [306, "                connStmtRs.stmt.setString(9, repoResult.getName());"], [309, "                connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"INSERT INTO repo(\\\"name\\\",\\\"scm\\\",\\\"url\\\", \\\"username\\\", \\\"password\\\",\\\"source\\\",\\\"branch\\\",\\\"data\\\") VALUES (?,?,?,?,?,?,?,?)\");"], [312, "            connStmtRs.stmt.setString(1, repoResult.getName());"], [313, "            connStmtRs.stmt.setString(2, repoResult.getScm());"], [314, "            connStmtRs.stmt.setString(3, repoResult.getUrl());"], [315, "            connStmtRs.stmt.setString(4, repoResult.getUsername());"], [316, "            connStmtRs.stmt.setString(5, repoResult.getPassword());"], [317, "            connStmtRs.stmt.setString(6, repoResult.getSource());"], [318, "            connStmtRs.stmt.setString(7, repoResult.getBranch());"], [319, "            connStmtRs.stmt.setString(8, repoResult.getDataAsJson());"], [321, "            connStmtRs.stmt.execute();"], [325, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"], [332, "        ConnStmtRs connStmtRs = new ConnStmtRs();"], [335, "            connStmtRs.conn = this.dbConfig.getConnection();"], [336, "            connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"SELECT name FROM sqlite_master WHERE type='table' AND name='repo';\");"], [338, "            connStmtRs.rs = connStmtRs.stmt.executeQuery();"], [340, "            while (connStmtRs.rs.next()) {"], [341, "                value = connStmtRs.rs.getString(\"name\");"], [345, "                connStmtRs.stmt = connStmtRs.conn.prepareStatement(\"CREATE TABLE IF NOT EXISTS \\\"repo\\\" (\\\"name\\\" VARCHAR PRIMARY KEY  NOT NULL ,\\\"scm\\\" VARCHAR,\\\"url\\\" VARCHAR,\\\"username\\\" VARCHAR,\\\"password\\\" VARCHAR, \\\"source\\\", \\\"branch\\\" VARCHAR, data text);\");"], [346, "                connStmtRs.stmt.execute();"], [351, "            this.helpers.closeQuietly(connStmtRs, this.dbConfig.closeConnection());"]], "deleted": [[55, ""], [56, "        Connection connection;"], [57, "        PreparedStatement preparedStatement = null;"], [58, "        ResultSet resultSet = null;"], [61, "            connection = this.dbConfig.getConnection();"], [62, "            preparedStatement = connection.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo order by rowid desc;\");"], [63, ""], [64, "            resultSet = preparedStatement.executeQuery();"], [65, ""], [66, "            while (resultSet.next()) {"], [67, "                int rowId = resultSet.getInt(\"rowid\");"], [68, "                String repoName = resultSet.getString(\"name\");"], [69, "                String repoScm = resultSet.getString(\"scm\");"], [70, "                String repoUrl = resultSet.getString(\"url\");"], [71, "                String repoUsername = resultSet.getString(\"username\");"], [72, "                String repoPassword = resultSet.getString(\"password\");"], [73, "                String repoSource = resultSet.getString(\"source\");"], [74, "                String repoBranch = resultSet.getString(\"branch\");"], [75, "                String repoData = resultSet.getString(\"data\");"], [91, "            this.helpers.closeQuietly(resultSet);"], [92, "            this.helpers.closeQuietly(preparedStatement);"], [125, ""], [126, "        Connection conn;"], [127, "        PreparedStatement stmt = null;"], [128, "        ResultSet rs = null;"], [131, "            conn = this.dbConfig.getConnection();"], [132, "            stmt = conn.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo order by rowid desc limit ?, ?;\");"], [134, "            stmt.setInt(1, offset);"], [135, "            stmt.setInt(2, pageSize);"], [137, "            rs = stmt.executeQuery();"], [139, "            while (rs.next()) {"], [140, "                int rowId = rs.getInt(\"rowid\");"], [141, "                String repoName = rs.getString(\"name\");"], [142, "                String repoScm = rs.getString(\"scm\");"], [143, "                String repoUrl = rs.getString(\"url\");"], [144, "                String repoUsername = rs.getString(\"username\");"], [145, "                String repoPassword = rs.getString(\"password\");"], [146, "                String repoSource = rs.getString(\"source\");"], [147, "                String repoBranch = rs.getString(\"branch\");"], [148, "                String repoData = rs.getString(\"data\");"], [164, "            this.helpers.closeQuietly(rs);"], [165, "            this.helpers.closeQuietly(stmt);"], [173, ""], [174, "        Connection connection;"], [175, "        PreparedStatement preparedStatement = null;"], [176, "        ResultSet resultSet = null;"], [179, "            connection = this.dbConfig.getConnection();"], [180, "            preparedStatement = connection.prepareStatement(\"select count(rowid) as totalcount from repo;\");"], [182, "            resultSet = preparedStatement.executeQuery();"], [184, "            while (resultSet.next()) {"], [185, "                totalCount = resultSet.getInt(\"totalcount\");"], [190, "            this.helpers.closeQuietly(resultSet);"], [191, "            this.helpers.closeQuietly(preparedStatement);"], [203, ""], [204, "        Connection connection;"], [205, "        PreparedStatement preparedStatement = null;"], [206, "        ResultSet resultSet = null;"], [209, "            connection = this.dbConfig.getConnection();"], [210, "            preparedStatement = connection.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo where name=?;\");"], [211, ""], [212, "            preparedStatement.setString(1, repositoryName);"], [213, "            resultSet = preparedStatement.executeQuery();"], [214, ""], [215, "            while (resultSet.next()) {"], [216, "                int rowId = resultSet.getInt(\"rowid\");"], [217, "                String repoName = resultSet.getString(\"name\");"], [218, "                String repoScm = resultSet.getString(\"scm\");"], [219, "                String repoUrl = resultSet.getString(\"url\");"], [220, "                String repoUsername = resultSet.getString(\"username\");"], [221, "                String repoPassword = resultSet.getString(\"password\");"], [222, "                String repoSource = resultSet.getString(\"source\");"], [223, "                String repoBranch = resultSet.getString(\"branch\");"], [224, "                String repoData = resultSet.getString(\"data\");"], [242, "            this.helpers.closeQuietly(resultSet);"], [243, "            this.helpers.closeQuietly(preparedStatement);"], [254, "        Connection connection;"], [255, "        PreparedStatement preparedStatement = null;"], [256, "        ResultSet resultSet = null;"], [257, ""], [261, "            connection = this.dbConfig.getConnection();"], [262, "            preparedStatement = connection.prepareStatement(\"select rowid,name,scm,url,username,password,source,branch,data from repo where url=?;\");"], [263, "            preparedStatement.setString(1, repositoryUrl);"], [264, "            resultSet = preparedStatement.executeQuery();"], [265, ""], [266, "            while (resultSet.next()) {"], [267, "                int rowId = resultSet.getInt(\"rowid\");"], [268, "                String repoName = resultSet.getString(\"name\");"], [269, "                String repoScm = resultSet.getString(\"scm\");"], [270, "                String repoUrl = resultSet.getString(\"url\");"], [271, "                String repoUsername = resultSet.getString(\"username\");"], [272, "                String repoPassword = resultSet.getString(\"password\");"], [273, "                String repoSource = resultSet.getString(\"source\");"], [274, "                String repoBranch = resultSet.getString(\"branch\");"], [275, "                String repoData = resultSet.getString(\"data\");"], [293, "            this.helpers.closeQuietly(resultSet);"], [294, "            this.helpers.closeQuietly(preparedStatement);"], [301, "        Connection connection;"], [302, "        PreparedStatement preparedStatement = null;"], [303, "        ResultSet resultSet = null;"], [306, "            connection = this.dbConfig.getConnection();"], [307, "            preparedStatement = connection.prepareStatement(\"delete from repo where name=?;\");"], [308, "            preparedStatement.setString(1, repositoryName);"], [309, "            preparedStatement.execute();"], [313, "            this.helpers.closeQuietly(resultSet);"], [314, "            this.helpers.closeQuietly(preparedStatement);"], [320, ""], [323, "        Connection connection;"], [324, "        PreparedStatement preparedStatement = null;"], [325, ""], [328, "            connection = this.dbConfig.getConnection();"], [330, "                preparedStatement = connection.prepareStatement(\"UPDATE \\\"repo\\\" SET \\\"name\\\" = ?, \\\"scm\\\" = ?, \\\"url\\\" = ?, \\\"username\\\" = ?, \\\"password\\\" = ?, \\\"source\\\" = ?, \\\"branch\\\" = ?, \\\"data\\\" = ? WHERE  \\\"name\\\" = ?\");"], [331, "                preparedStatement.setString(9, repoResult.getName());"], [334, "                preparedStatement = connection.prepareStatement(\"INSERT INTO repo(\\\"name\\\",\\\"scm\\\",\\\"url\\\", \\\"username\\\", \\\"password\\\",\\\"source\\\",\\\"branch\\\",\\\"data\\\") VALUES (?,?,?,?,?,?,?,?)\");"], [337, "            preparedStatement.setString(1, repoResult.getName());"], [338, "            preparedStatement.setString(2, repoResult.getScm());"], [339, "            preparedStatement.setString(3, repoResult.getUrl());"], [340, "            preparedStatement.setString(4, repoResult.getUsername());"], [341, "            preparedStatement.setString(5, repoResult.getPassword());"], [342, "            preparedStatement.setString(6, repoResult.getSource());"], [343, "            preparedStatement.setString(7, repoResult.getBranch());"], [344, "            preparedStatement.setString(8, repoResult.getDataAsJson());"], [346, "            preparedStatement.execute();"], [350, "            this.helpers.closeQuietly(preparedStatement);"], [357, "        Connection connection;"], [358, "        PreparedStatement preparedStatement = null;"], [359, "        ResultSet resultSet = null;"], [362, "            connection = this.dbConfig.getConnection();"], [363, "            preparedStatement = connection.prepareStatement(\"SELECT name FROM sqlite_master WHERE type='table' AND name='repo';\");"], [365, "            resultSet = preparedStatement.executeQuery();"], [367, "            while (resultSet.next()) {"], [368, "                value = resultSet.getString(\"name\");"], [372, "                preparedStatement = connection.prepareStatement(\"CREATE TABLE IF NOT EXISTS \\\"repo\\\" (\\\"name\\\" VARCHAR PRIMARY KEY  NOT NULL ,\\\"scm\\\" VARCHAR,\\\"url\\\" VARCHAR,\\\"username\\\" VARCHAR,\\\"password\\\" VARCHAR, \\\"source\\\", \\\"branch\\\" VARCHAR, data text);\");"], [373, "                preparedStatement.execute();"], [378, "            this.helpers.closeQuietly(resultSet);"], [379, "            this.helpers.closeQuietly(preparedStatement);"]]}, "num_lines_added": 107, "num_lines_removed": 135}