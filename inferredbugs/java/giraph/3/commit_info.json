{"hash": "7fc6783ee689472a614df5b354b9494559a93a36", "message": "[Bug 4697659] First user superstep now starts at 0 instead of 1 (bad).\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/giraph/trunk@1161935 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 1701, "diff_parsed": {"added": [[69, "import org.apache.giraph.bsp.ApplicationState;"], [72, "import org.apache.giraph.bsp.SuperstepState;"], [150, "    public void setJobState(ApplicationState state,"], [186, "        if (state == ApplicationState.FAILED) {"], [478, "            setJobState(ApplicationState.FAILED, -1, -1);"], [494, "            setJobState(ApplicationState.FAILED, -1, -1);"], [741, "        if (getRestartedSuperstep() != UNSET_SUPERSTEP) {"], [769, "                    ApplicationState.valueOf(jobState.getString(JSONOBJ_STATE_KEY)) =="], [770, "                        ApplicationState.FINISHED) {"], [820, "        // INPUT_SUPERSTEP is special since there is no computation, just get"], [823, "        if (superstep == INPUT_SUPERSTEP) {"], [951, "        if (superstep <= INPUT_SUPERSTEP) {"], [1237, "                        setJobState(ApplicationState.FAILED, -1, -1);"], [1268, "            getZkExt().createExt("], [1269, "                vertexRangeAssignmentsPath,"], [1270, "                vertexRangeAssignmentArray.toString().getBytes(),"], [1271, "                Ids.OPEN_ACL_UNSAFE,"], [1272, "                CreateMode.PERSISTENT,"], [1273, "                true);"], [1314, "        if (vertexRangeMap.isEmpty()) {"], [1315, "            throw new IllegalStateException("], [1316, "                \"balanceVertexRanges: Couldn't get the \" +"], [1317, "                \"previous vertex range map (superstep \" +"], [1318, "                (getSuperstep() - 1) + \")\");"], [1319, "        }"], [1353, "                \"balanceVertexRanges: Impossible there are no \" +"], [1354, "                \"vertex ranges on superstep \" + getSuperstep());"], [1363, "                \"balanceVertexRanges: Cannot get bytes from \" +"], [1525, "        setJobState(ApplicationState.START_SUPERSTEP,"], [1581, "            setJobState(ApplicationState.FAILED, -1, -1);"], [1614, "            if (getSuperstep() > INPUT_SUPERSTEP) {"], [1675, "            getContext().setStatus(getGraphMapper().getMapFunctions() + \" - \" +"], [1698, "        // Convert the input split stats to vertex ranges in INPUT_SUPERSTEP"], [1699, "        if (getSuperstep() == INPUT_SUPERSTEP) {"]], "deleted": [[148, "    public void setJobState(State state,"], [184, "        if (state == BspService.State.FAILED) {"], [476, "            setJobState(State.FAILED, -1, -1);"], [492, "            setJobState(State.FAILED, -1, -1);"], [739, "        if (getRestartedSuperstep() == -1) {"], [740, "            return;"], [741, "        }"], [742, "        else if (getRestartedSuperstep() < -1) {"], [743, "            LOG.fatal(\"setup: Impossible to restart superstep \" +"], [744, "                      getRestartedSuperstep());"], [745, "            setJobState(BspService.State.FAILED, -1, -1);"], [746, "        } else {"], [749, ""], [775, "                    State.valueOf(jobState.getString(JSONOBJ_STATE_KEY)) =="], [776, "                        State.FINISHED) {"], [826, "        // Superstep 0 is special since there is no computation, just get"], [829, "        if (superstep == 0) {"], [957, "        if (superstep <= 0) {"], [1243, "                        setJobState(State.FAILED, -1, -1);"], [1274, "            getZkExt().createExt(vertexRangeAssignmentsPath,"], [1275, "                                 vertexRangeAssignmentArray.toString().getBytes(),"], [1276, "                                 Ids.OPEN_ACL_UNSAFE,"], [1277, "                                 CreateMode.PERSISTENT,"], [1278, "                                 true);"], [1352, "                \"balanceVertexRanges: Impossible there are no vertex ranges \");"], [1361, "                \"balanceVertexranges: Cannot get bytes from \" +"], [1523, "        setJobState(BspService.State.START_SUPERSTEP,"], [1579, "            setJobState(State.FAILED, -1, -1);"], [1612, "            if (getSuperstep() > 0) {"], [1673, "            getContext().setStatus(getGraphMapper().getMapFunctions() + \" \" +"], [1696, "        // Convert the input split stats to vertex ranges in superstep 0"], [1697, "        if (getSuperstep() == 0) {"]]}, "num_lines_added": 34, "num_lines_removed": 32}