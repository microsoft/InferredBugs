{"hash": "7fc6783ee689472a614df5b354b9494559a93a36", "message": "[Bug 4697659] First user superstep now starts at 0 instead of 1 (bad).\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/giraph/trunk@1161935 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 1104, "diff_parsed": {"added": [[64, "import org.apache.giraph.bsp.ApplicationState;"], [65, ""], [489, "                getStorableVertexRangeMap().put(entry.getKey(),"], [490, "                                                entry.getValue());"], [499, "        // 1. Start superstep INPUT_SUPERSTEP (no computation)"], [503, "        if (getRestartedSuperstep() != UNSET_SUPERSTEP) {"], [511, "                if ((ApplicationState.valueOf(jobState.getString(JSONOBJ_STATE_KEY)) =="], [512, "                        ApplicationState.START_SUPERSTEP) &&"], [514, "                        getSuperstep()) {"], [515, "                    if (LOG.isInfoEnabled()) {"], [516, "                        LOG.info(\"setup: Restarting from an automated \" +"], [517, "                                 \"checkpointed superstep \" +"], [518, "                                 getSuperstep() + \", attempt \" +"], [519, "                                 getApplicationAttempt());"], [520, "                    }"], [539, "            } catch (KeeperException e) {"], [540, "                throw new IllegalStateException("], [541, "                    \"setup: KeeperException waiting on input splits\", e);"], [542, "            } catch (InterruptedException e) {"], [543, "                throw new IllegalStateException("], [544, "                    \"setup: InterrupteException waiting on input splits\", e);"], [564, "                getStorableVertexRangeMap().values()) {"], [581, "        if ((superstep == INPUT_SUPERSTEP) || (aggregatorInUse.size() == 0)) {"], [620, "     * @param superstep Superstep to get the aggregated values from"], [623, "        if (superstep <= (INPUT_SUPERSTEP + 1)) {"], [738, "        if (getSuperstep() > INPUT_SUPERSTEP) {"], [751, "            if (LOG.isInfoEnabled()) {"], [752, "                LOG.info(\"startSuperstep: Ready for computation on superstep \" +"], [753, "                         getSuperstep() + \" since worker \" +"], [754, "                         \"selection and vertex range assignments are done in \" +"], [755, "                         vertexRangeAssignmentsNode);"], [756, "            }"], [778, "        // 2. Report the statistiss (vertices, edges, messages, etc.)"], [852, "        return ((finishedVertices == totalVertices) && (sentMessages == 0));"], [1318, "                if ((ApplicationState.valueOf(jsonObj.getString(JSONOBJ_STATE_KEY)) =="], [1319, "                        ApplicationState.START_SUPERSTEP) &&"], [1321, "                        getApplicationAttempt()) {"]], "deleted": [[371, "                // TODO: Need to add checkpoints"], [488, "                getVertexRangeMap().put(entry.getKey(), entry.getValue());"], [497, "        // 1. Start superstep 0 (no computation)"], [501, "        if (getRestartedSuperstep() < -1) {"], [502, "            throw new IllegalArgumentException("], [503, "                \"setup: Invalid superstep to restart - \" +"], [504, "                getRestartedSuperstep());"], [505, "        }"], [506, "        else if (getRestartedSuperstep() > 0) {"], [514, "                if ((State.valueOf(jobState.getString(JSONOBJ_STATE_KEY)) =="], [515, "                        State.START_SUPERSTEP) &&"], [517, "                            getSuperstep()) {"], [518, "                    LOG.info(\"setup: Restarting from an automated \" +"], [519, "                             \"checkpointed superstep \" +"], [520, "                             getSuperstep() + \", attempt \" +"], [521, "                             getApplicationAttempt());"], [540, "            } catch (Exception e) {"], [541, "                throw new RuntimeException(e);"], [561, "                getVertexRangeMap().values()) {"], [578, "        if (superstep == 0 || aggregatorInUse.size() == 0) {"], [617, "     * @param superstep"], [620, "        if (superstep <= 1) {"], [735, "        if (getSuperstep() > 0) {"], [748, "        }"], [749, "        if (LOG.isInfoEnabled()) {"], [750, "            LOG.info(\"startSuperstep: Ready for computation since worker \" +"], [751, "                     \"selection and vertex range assignments are done in \" +"], [752, "                     vertexRangeAssignmentsNode);"], [774, "        // 2. Report the statistiscs (vertices, edges, messages, etc.)"], [848, "        return (finishedVertices == totalVertices) && (sentMessages == 0);"], [1314, "                if ((State.valueOf(jsonObj.getString(JSONOBJ_STATE_KEY)) =="], [1315, "                        State.START_SUPERSTEP) &&"], [1317, "                        getApplicationAttempt() &&"], [1318, "                        getSuperstep() > 0) {"]]}, "num_lines_added": 37, "num_lines_removed": 34}