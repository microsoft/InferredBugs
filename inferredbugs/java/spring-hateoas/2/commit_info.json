{"hash": "e74d1098ccffcd9e97b4728a475222fb8a13a4c6", "message": "#808 - Remove Forwarded handling.\n\nIn light of upgrading to Spring Framework 5.1, no longer need custom handling of Forwarded headers.\n\nOriginal pull request: #818.", "file_num_lines": 150, "diff_parsed": {"added": [[296, "\t\treturn ServletUriComponentsBuilder.fromServletMapping(getCurrentRequest());"]], "deleted": [[18, "import static org.springframework.hateoas.mvc.ForwardedHeader.*;"], [19, ""], [30, "import org.springframework.context.ApplicationContext;"], [299, "\t\tHttpServletRequest request = getCurrentRequest();"], [300, "\t\tServletUriComponentsBuilder builder = ServletUriComponentsBuilder.fromServletMapping(request);"], [301, ""], [302, "\t\t// Spring 5.1 can handle X-Forwarded-Ssl headers..."], [303, "\t\tif (isSpringAtLeast5_1()) {"], [304, "\t\t\treturn builder;"], [305, "\t\t} else {"], [306, "\t\t\treturn handleXForwardedSslHeader(request, builder);"], [307, "\t\t}"], [308, "\t}"], [309, ""], [310, "\t/**"], [311, "\t * Check if the current version of Spring Framework is 5.1 or higher."], [312, "\t *"], [313, "\t * @return"], [314, "\t */"], [315, "\tprivate static boolean isSpringAtLeast5_1() {"], [316, ""], [317, "\t\tString versionOfSpringFramework = ApplicationContext.class.getPackage().getImplementationVersion();"], [318, ""], [319, "\t\tString[] parts = versionOfSpringFramework.split(\"\\\\.\");"], [320, "\t\tint majorVersion = Integer.parseInt(parts[0]);"], [321, "\t\tint minorVersion = Integer.parseInt(parts[1]);"], [322, ""], [323, "\t\treturn majorVersion >= 5 && minorVersion >= 1 || majorVersion > 5;"]]}, "num_lines_added": 1, "num_lines_removed": 28}