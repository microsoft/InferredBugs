{"hash": "9c598a2c140ffdf324b92499a6f974ad245a016d", "message": "changed to load balancer helm chart for traefik", "file_num_lines": 666, "diff_parsed": {"added": [[47, "  private String loadBalancer = \"TRAEFIK\";"], [48, "  private int loadBalancerWebPort = 30305;"], [316, "      if (loadBalancer.equals(\"APACHE\")) {"], [451, ""], [452, "    // create domain using diff output dir but pv is same, it fails as the domain was already"], [453, "    // created on the pv dir"], [624, "    Map<String, Object> lbMap = new HashMap<String, Object>();"], [626, "    lbMap.put(\"name\", \"traefik-hostrouting-\" + domainUid);"], [628, "    lbMap.put(\"host\", domainUid + \".org\");"], [629, "    lbMap.put(\"domainUID\", domainUid);"], [630, "    lbMap.put(\"serviceName\", domainUid + \"-cluster-\" + domainMap.get(\"clusterName\"));"], [631, "    lbMap.put(\"loadBalancer\", domainMap.getOrDefault(\"loadBalancer\", loadBalancer));"], [636, "      /* lbMap.put(\"loadBalancerAppPrepath\", \"/weblogic\");"], [637, "      lbMap.put(\"loadBalancerExposeAdminPort\", new Boolean(true)); */"]], "deleted": [[47, "  private String loadBalancer;"], [48, "  private int loadBalancerWebPort;"], [49, "  private int loadBalancerDashboardPort;"], [317, "      if (domainMap.get(\"loadBalancer\") != null && domainMap.get(\"loadBalancer\").equals(\"APACHE\")) {"], [460, ""], [461, "    /*    StringBuffer cmd = new StringBuffer(\"cd \");"], [462, "    cmd.append(BaseTest.getProjectRoot())"], [463, "        .append(\" && helm install kubernetes/charts/weblogic-domain\");"], [464, "    cmd.append(\" --name \")"], [465, "        .append(domainMap.get(\"domainUID\"))"], [466, "        .append(\" --values \")"], [467, "        .append(generatedInputYamlFile)"], [468, "        .append(\" --namespace \")"], [469, "        .append(domainNS)"], [470, "        .append(\" --wait\");"], [471, "    logger.info(\"Running \" + cmd);"], [472, "    ExecResult result = ExecCommand.exec(cmd.toString());"], [473, "    if (result.exitValue() == 1) {"], [474, "      logger.info(\"[SUCCESS] create domain job failed, this is the expected behavior\");"], [475, "    } else {"], [476, "      throw new RuntimeException("], [477, "          \"FAIL: unexpected result, create domain job exit code: \" + result.exitValue());"], [478, "    } */"], [641, "    Yaml yaml = new Yaml();"], [642, "    InputStream lbIs ="], [643, "        new FileInputStream("], [644, "            new File("], [645, "                BaseTest.getProjectRoot()"], [646, "                    + \"/kubernetes/samples/scripts/create-weblogic-domain-load-balancer/create-load-balancer-inputs.yaml\"));"], [647, "    Map<String, Object> lbMap = yaml.load(lbIs);"], [648, "    lbIs.close();"], [650, "    lbMap.put(\"domainName\", domainMap.get(\"domainName\"));"], [651, "    lbMap.put(\"domainUID\", domainUid);"], [653, ""], [654, "    if (domainMap.get(\"loadBalancer\") != null) {"], [655, "      lbMap.put(\"loadBalancer\", domainMap.get(\"loadBalancer\"));"], [656, "    }"], [657, "    if (domainMap.get(\"loadBalancerWebPort\") != null) {"], [658, "      lbMap.put(\"loadBalancerWebPort\", domainMap.get(\"loadBalancerWebPort\"));"], [659, "    }"], [660, "    if (domainMap.get(\"loadBalancerDashboardPort\") != null) {"], [661, "      lbMap.put(\"loadBalancerDashboardPort\", domainMap.get(\"loadBalancerDashboardPort\"));"], [662, "    }"], [663, "    if (domainMap.get(\"loadBalancerVolumePath\") != null) {"], [664, "      lbMap.put(\"loadBalancerVolumePath\", domainMap.get(\"loadBalancerVolumePath\"));"], [665, "    }"], [668, "    loadBalancerWebPort = ((Integer) lbMap.get(\"loadBalancerWebPort\")).intValue();"], [669, "    loadBalancerDashboardPort = ((Integer) lbMap.get(\"loadBalancerDashboardPort\")).intValue();"], [672, "      lbMap.put(\"loadBalancerAppPrepath\", \"/weblogic\");"], [673, "      lbMap.put(\"loadBalancerExposeAdminPort\", new Boolean(true));"]]}, "num_lines_added": 14, "num_lines_removed": 50}