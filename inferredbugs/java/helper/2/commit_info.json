{"hash": "ed3b73b3350f1141451c8ee9a0abec9db6c2a6a0", "message": "serialization util changes", "file_num_lines": 33, "diff_parsed": {"added": [[32, "import me.lucko.helper.gson.JsonBuilder;"], [33, ""], [43, "        return JsonBuilder.primitiveNonNull(InventorySerialization.encodeItemStackToString(item));"], [48, "        return InventorySerialization.decodeItemStack(data.getAsString());"], [52, "        return JsonBuilder.primitiveNonNull(InventorySerialization.encodeItemStacksToString(items));"], [56, "        return JsonBuilder.primitiveNonNull(InventorySerialization.encodeInventoryToString(inventory));"], [61, "        return InventorySerialization.decodeItemStacks(data.getAsString());"], [66, "        return InventorySerialization.decodeInventory(data.getAsString(), title);"]], "deleted": [[32, "import org.bukkit.Bukkit;"], [35, "import org.bukkit.util.io.BukkitObjectInputStream;"], [36, "import org.bukkit.util.io.BukkitObjectOutputStream;"], [37, "import org.yaml.snakeyaml.external.biz.base64Coder.Base64Coder;"], [38, ""], [39, "import java.io.ByteArrayInputStream;"], [40, "import java.io.ByteArrayOutputStream;"], [41, "import java.io.IOException;"], [49, "        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {"], [50, "            try (BukkitObjectOutputStream dataOutput = new BukkitObjectOutputStream(outputStream)) {"], [51, "                dataOutput.writeObject(item);"], [52, "                return new JsonPrimitive(Base64Coder.encodeLines(outputStream.toByteArray()));"], [53, "            }"], [54, "        } catch (Exception e) {"], [55, "            throw new RuntimeException(e);"], [56, "        }"], [61, "        try (ByteArrayInputStream inputStream = new ByteArrayInputStream(Base64Coder.decodeLines(data.getAsString()))) {"], [62, "            try (BukkitObjectInputStream dataInput = new BukkitObjectInputStream(inputStream)) {"], [63, "                return (ItemStack) dataInput.readObject();"], [64, "            }"], [65, "        } catch (ClassNotFoundException | IOException e) {"], [66, "            throw new RuntimeException(e);"], [67, "        }"], [71, "        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {"], [72, "            try (BukkitObjectOutputStream dataOutput = new BukkitObjectOutputStream(outputStream)) {"], [73, "                dataOutput.writeInt(items.length);"], [74, ""], [75, "                for (ItemStack item : items) {"], [76, "                    dataOutput.writeObject(item);"], [77, "                }"], [78, ""], [79, "                return new JsonPrimitive(Base64Coder.encodeLines(outputStream.toByteArray()));"], [80, "            }"], [81, "        } catch (Exception e) {"], [82, "            throw new RuntimeException(e);"], [83, "        }"], [87, "        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {"], [88, "            try (BukkitObjectOutputStream dataOutput = new BukkitObjectOutputStream(outputStream)) {"], [89, "                dataOutput.writeInt(inventory.getSize());"], [90, ""], [91, "                for (int i = 0; i < inventory.getSize(); i++) {"], [92, "                    dataOutput.writeObject(inventory.getItem(i));"], [93, "                }"], [94, ""], [95, "                return new JsonPrimitive(Base64Coder.encodeLines(outputStream.toByteArray()));"], [96, "            }"], [97, "        } catch (Exception e) {"], [98, "            throw new RuntimeException(e);"], [99, "        }"], [104, "        try (ByteArrayInputStream inputStream = new ByteArrayInputStream(Base64Coder.decodeLines(data.getAsString()))) {"], [105, "            try (BukkitObjectInputStream dataInput = new BukkitObjectInputStream(inputStream)) {"], [106, "                ItemStack[] items = new ItemStack[dataInput.readInt()];"], [107, ""], [108, "                for (int i = 0; i < items.length; i++) {"], [109, "                    items[i] = (ItemStack) dataInput.readObject();"], [110, "                }"], [111, ""], [112, "                return items;"], [113, "            }"], [114, "        } catch (ClassNotFoundException | IOException e) {"], [115, "            throw new RuntimeException(e);"], [116, "        }"], [121, "        try (ByteArrayInputStream inputStream = new ByteArrayInputStream(Base64Coder.decodeLines(data.getAsString()))) {"], [122, "            try (BukkitObjectInputStream dataInput = new BukkitObjectInputStream(inputStream)) {"], [123, "                Inventory inventory = Bukkit.getServer().createInventory(null, dataInput.readInt(), title);"], [124, ""], [125, "                for (int i = 0; i < inventory.getSize(); i++) {"], [126, "                    inventory.setItem(i, (ItemStack) dataInput.readObject());"], [127, "                }"], [128, ""], [129, "                return inventory;"], [130, "            }"], [131, "        } catch (ClassNotFoundException | IOException e) {"], [132, "            throw new RuntimeException(e);"], [133, "        }"]]}, "num_lines_added": 8, "num_lines_removed": 75}