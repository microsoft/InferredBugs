{"hash": "34eb7769cd91964555cfdda89a8494d0e2e2ce79", "message": "\u6dfb\u52a0basedao", "file_num_lines": 74, "diff_parsed": {"added": [[3, "import org.hibernate.annotations.common.util.impl.LoggerFactory;"], [4, "import org.jboss.logging.Logger;"], [18, ""], [27, "    private Logger logger = LoggerFactory.logger(this.getClass());"], [30, "    public void uploadGoodsPhoto(CommonsMultipartFile file, long goodsId) throws IOException {"], [42, "    private String uploadGoodsPhoto(CommonsMultipartFile file) throws IOException {"], [45, "        FileOutputStream fos = null;"], [46, "        InputStream is = null;"], [53, "            fos = new FileOutputStream(path);"], [54, "            is = file.getInputStream();"], [55, "            int b;"], [61, "            logger.error(\"error message is:\", e);"], [63, "        } finally {"], [64, "            if (fos!=null){"], [65, "                fos.close();"], [66, "            }"], [67, "            if (is!=null){"], [68, "                is.close();"], [69, "            }"], [70, ""], [74, ""], [75, "    @Override"], [76, "    public void addGoods(Goods goods, CommonsMultipartFile file) {"], [77, "        String path = null;"], [78, "        try {"], [79, "            path = uploadGoodsPhoto(file);"], [80, "        } catch (IOException e) {"], [81, "            logger.info(e.getMessage(),e);"], [82, "            throw new HengException(\"\u4e0a\u4f20\u6587\u4ef6\u65b9\u6cd5\u51fa\u73b0\u9519\u8bef\");"], [83, "        }"], [84, "        goods.setPhotoUrl(path);"], [85, "        goodsDao.insert(goods);"], [86, "    }"]], "deleted": [[26, "    public void uploadGoodsPhoto(CommonsMultipartFile file, long goodsId) {"], [37, "    @Override"], [38, "    public void addGoods(Goods goods,CommonsMultipartFile file) {"], [39, "        String path = uploadGoodsPhoto(file);"], [40, "        goods.setPhotoUrl(path);"], [41, "        goodsDao.insert(goods);"], [42, "    }"], [44, "    private String uploadGoodsPhoto(CommonsMultipartFile file) {"], [53, "            FileOutputStream fos = new FileOutputStream(path);"], [54, "            InputStream is = file.getInputStream();"], [55, "            int b = 0;"], [60, "            fos.close();"], [61, "            is.close();"]]}, "num_lines_added": 33, "num_lines_removed": 13}