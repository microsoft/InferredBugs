{"hash": "0403af6a3a520c484298bd6da27fcd6da67f3a4d", "message": "implementation of new extended FileData object\n\nissue #465", "file_num_lines": 684, "diff_parsed": {"added": [[555, "\t@Deprecated"], [556, "\tpublic void testCloningByteArraysDeprecated() {"], [601, ""], [602, ""], [603, ""], [604, "\t/**"], [605, "\t * This method verifies the clone interface in conjunction with byte arrays as"], [606, "\t * used in the $file field"], [607, "\t */"], [608, "\t@Test"], [609, "\tpublic void testCloningByteArraysWithFileData() {"], [610, ""], [611, "\t\tItemCollection itemCol1 = new ItemCollection();"], [612, "\t\titemCol1.replaceItemValue(\"a\", 1);"], [613, "\t\titemCol1.replaceItemValue(\"b\", \"hello\");"], [614, "\t\titemCol1.replaceItemValue(\"c\", \"world\");"], [615, "\t\tbyte[] empty = { 0 };"], [616, "\t\t// add a dummy file"], [617, "\t\titemCol1.addFileData(new FileData( \"test1.txt\",empty, \"application/xml\",null));"], [618, ""], [619, "\t\tItemCollection itemCol2 = (ItemCollection) itemCol1.clone();"], [620, ""], [621, "\t\tAssert.assertNotNull(itemCol2);"], [622, ""], [623, "\t\t// test values of clone"], [624, "\t\tAssert.assertEquals(1, itemCol2.getItemValueInteger(\"a\"));"], [625, "\t\tAssert.assertEquals(\"hello\", itemCol2.getItemValueString(\"b\"));"], [626, "\t\t// test the byte content of itemcol2"], [627, "\t\t//Map<String, List<Object>> conedFilesTest = itemCol2.getFiles();"], [628, ""], [629, ""], [630, "\t\tbyte[] file1DataTest = itemCol2.getFileData(\"test1.txt\").getContent();"], [631, ""], [632, "\t\tAssert.assertArrayEquals(empty, file1DataTest);"], [633, ""], [634, "\t\t// -------------------"], [635, "\t\t// Now we change file content in itemcol1"], [636, "\t\tbyte[] dummy = { 1, 2, 3 };"], [637, "\t\titemCol1.removeFile(\"test1.txt\");"], [638, "\t\titemCol1.addFileData( new FileData(\"test1.txt\", dummy,\"application/xml\",null));"], [639, ""], [640, "\t\t// test the byte content of itemCol1"], [641, "\t\tbyte[] file1Data1 =  itemCol1.getFileData(\"test1.txt\").getContent();"], [642, "\t\t// we expect the new dummy array { 1, 2, 3 }"], [643, "\t\tAssert.assertArrayEquals(dummy, file1Data1);"], [644, ""], [645, "\t\t// test the clone"], [646, "\t\tbyte[] file1Data2 = itemCol2.getFileData(\"test1.txt\").getContent();"], [647, "\t\t// we expect still the empty array"], [648, "\t\tAssert.assertArrayEquals(empty, file1Data2);"], [649, ""], [650, "\t}"], [773, "\t@Deprecated"], [774, "\tpublic void testFileDataDeprecated() {"], [805, ""], [806, "\t@Test"], [807, "\t@Category(org.imixs.workflow.ItemCollection.class)"], [808, "\tpublic void testFileData() {"], [809, "\t\tItemCollection itemColSource = new ItemCollection();"], [810, ""], [811, "\t\t// add a dummy file"], [812, "\t\tbyte[] empty = { 0 };"], [813, "\t\titemColSource.addFileData(new FileData( \"test1.txt\", empty,\"application/xml\",null));"], [814, ""], [815, "\t\tItemCollection itemColTarget = new ItemCollection();"], [816, ""], [817, "\t\titemColTarget.addFileData(itemColSource.getFileData(\"test1.txt\"));"], [818, ""], [819, "\t\tFileData filedata = itemColTarget.getFileData(\"test1.txt\");"], [820, "\t\tAssert.assertNotNull(filedata);"], [821, "\t\tAssert.assertEquals(\"test1.txt\", filedata.getName());"], [822, "\t\tAssert.assertEquals(\"application/xml\", filedata.getContentType());"], [823, ""], [824, "\t\t// test the byte content of itemColSource"], [825, "\t\tbyte[] file1Data1 =itemColSource.getFileData(\"test1.txt\").getContent();"], [826, "\t\t// we expect the new dummy array { 1, 2, 3 }"], [827, "\t\tAssert.assertArrayEquals(empty, file1Data1);"], [828, ""], [829, "\t\t// test the byte content of itemColTarget"], [830, "\t\tfile1Data1 = itemColTarget.getFileData(\"test1.txt\").getContent();"], [831, "\t\t// we expect the new dummy array { 1, 2, 3 }"], [832, "\t\tAssert.assertArrayEquals(empty, file1Data1);"], [833, ""], [834, "\t}"]], "deleted": [[555, "\tpublic void testCloningByteArrays() {"], [722, "\tpublic void testFileData() {"]]}, "num_lines_added": 84, "num_lines_removed": 2}