{"hash": "d27e0fba6a4f4d0cc8980638c7da55adf9f429c3", "message": "Modified SearchEngine2 servlet to be a singleton in order to combat\n\"too many files\" open error.", "file_num_lines": 109, "diff_parsed": {"added": [[20, "\tprivate static SearchEngine2 _instance = null;"], [21, ""], [23, "\t\tSearchEngine2 engine = SearchEngine2.getInstance();"], [71, "\tprivate SearchEngine2() {"], [78, "\tpublic static synchronized SearchEngine2 getInstance ()"], [79, "\t{"], [80, ""], [81, "\t\tif (_instance == null)"], [82, "\t\t{"], [83, "\t\t\t_instance = new SearchEngine2();"], [84, "\t\t}"], [85, ""], [86, "\t\treturn _instance;"], [87, ""], [88, "\t}"], [89, ""], [90, ""], [127, "    \tif (result == null)"], [128, "    \t{"], [129, "    \t\tresponse.addMetadataByKey(\"totalresults\", 0 );"], [131, "    \telse"], [132, "    \t{"], [133, ""], [135, "\t    \tresponse.addMetadataByKey(\"totalresults\", result.total );"], [136, ""], [137, "\t    \tfor (Document doc : result.results) {"], [138, ""], [139, "\t    \t\tString lastModified = doc.get(\"modified\");"], [140, "\t    \t\tif (lastModified == null || lastModified.length() == 0)"], [141, "\t    \t\t\tlastModified = new Date().getTime()+\"\";"], [142, ""], [143, "\t    \t\tresponse.addResult(new Result(doc.get(\"otype\"),doc.get(data), doc.get(\"oid\"), Long.parseLong(lastModified)));"], [144, "\t    \t}"], [145, "    \t}"], [146, ""]], "deleted": [[21, "\t\tSearchEngine2 engine = new SearchEngine2();"], [69, "\tpublic SearchEngine2() {"], [111, "    \tresponse.addMetadataByKey(\"totalresults\", result.total );"], [113, "    \tfor (Document doc : result.results) {"], [114, ""], [115, "    \t\tString lastModified = doc.get(\"when\");"], [116, "    \t\tif (lastModified == null || lastModified.length() == 0)"], [117, "    \t\t\tlastModified = new Date().getTime()+\"\";"], [118, ""], [119, "    \t\tresponse.addResult(new Result(doc.get(\"otype\"),doc.get(data), doc.get(\"oid\"), Long.parseLong(lastModified)));"]]}, "num_lines_added": 35, "num_lines_removed": 10}