{"hash": "4246bf704cd4d1c2de838f752db4625a43f19564", "message": "- configured district json loading to work with latin1 encoding for special characters", "file_num_lines": 143, "diff_parsed": {"added": [[4, "import java.io.FileInputStream;"], [5, "import java.io.FileReader;"], [10, "import java.io.PrintWriter;"], [11, "import java.io.Reader;"], [12, "import java.net.URL;"], [76, "\t\tresponse.setCharacterEncoding(\"UTF-8\");"], [79, "\t\t    PrintWriter out = new PrintWriter(new OutputStreamWriter(response.getOutputStream(),\"UTF-8\"));"], [115, "\t\tString rootPath = this.getServletContext().getRealPath(\"/\");"], [116, "\t\tString encoding = \"latin1\";//\"UTF-8\";"], [117, ""], [127, "\t\t\t\tURL jsonUrl = getServletContext().getResource(jsonPath);"], [128, "\t\t\t\t//jsonPath = rootPath + '/' + jsonPath;"], [130, "\t\t\t\tStringBuilder jsonb = new StringBuilder();"], [131, ""], [132, "\t\t\t\tBufferedReader reader = new BufferedReader(new InputStreamReader(jsonUrl.openStream(),encoding));"], [133, "\t\t\t\t//BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(jsonPath), encoding));"], [135, "\t\t\t\tchar[] buf = new char[1024];"], [136, "\t\t        int numRead=0;"], [137, "\t\t        while((numRead=reader.read(buf)) != -1){"], [138, "\t\t            jsonb.append(buf, 0, numRead);"], [139, "\t\t            buf = new char[1024];"], [140, "\t\t        }"], [141, "\t\t        reader.close();"]], "deleted": [[4, "import java.io.BufferedWriter;"], [5, "import java.io.DataOutputStream;"], [9, "import java.io.OutputStream;"], [22, "import org.json.JSONArray;"], [75, ""], [78, "\t\t    ServletOutputStream out = response.getOutputStream();"], [114, ""], [123, "\t\t\t\tlogger.info(\"loading: \" + jsonPath);"], [125, "\t\t\t\tInputStream is = getServletContext().getResourceAsStream(jsonPath);"], [126, "\t\t\t//\tInputStream is = ClassLoader"], [127, "\t\t\t\t//.getSystemResourceAsStream(DISTRICT_JSON_FOLDER_PATH + \"sd\" + i + \".json\");"], [129, "\t\t\t\tBufferedReader reader = new BufferedReader(new InputStreamReader(is));"], [131, "\t\t\t\tString line = null;"], [132, "\t\t\t\tStringBuffer jsonb = new StringBuffer();"], [133, "\t\t\t\twhile ((line = reader.readLine())!=null)"], [134, "\t\t\t\t{"], [135, "\t\t\t\t\tjsonb.append(line);"], [136, ""], [137, "\t\t\t\t}"], [146, "\t\t\t\tsenatorName = senatorName.replace(\"\ufffd\",\"e\");"]]}, "num_lines_added": 23, "num_lines_removed": 20}