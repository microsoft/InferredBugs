{"hash": "7337999699792e383f528e9007afeee0523f5589", "message": "more changes to api workflow, committee meeting parser and various other fixes", "file_num_lines": 348, "diff_parsed": {"added": [[192, "\t\t\t\tif(type != null) {"], [193, "\t\t\t\t\tif(type.endsWith(\"s\")) {"], [194, "\t\t\t\t\t\tpageIdx = (key != null && !key.equals(\"\")) ? new Integer(key) : pageIdx;"], [195, "\t\t\t\t\t\tkey = \"\";"], [196, "\t\t\t\t\t}"], [197, "\t\t\t\t\telse if(type.matches(\"(sponsor|committee)\")) {"], [198, "\t\t\t\t\t\tif(st.hasMoreTokens()) {"], [199, "\t\t\t\t\t\t\tpageIdx = Integer.parseInt(st.nextToken());"], [200, "\t\t\t\t\t\t}"], [201, "\t\t\t\t\t}"], [202, "\t\t\t\t}"], [230, ""], [231, "\t\tString urlPath = \"/legislation/\" + type + \"/\" + ((key != null && !key.matches(\"\\\\s*\")) ? key + \"/\" :\"\");"], [232, ""], [233, "\t\tif (type.equalsIgnoreCase(\"sponsor\")) {"], [234, "\t\t\tString filter = req.getParameter(\"filter\");"], [235, "\t\t\tkey = \"sponsor:\\\"\" + key + \"\\\"\";"], [236, "\t\t\tif(filter != null) {"], [237, "\t\t\t\treq.setAttribute(\"filter\", filter);"], [238, "\t\t\t\tkey += (filter != null ? \" AND \" + filter : \"\");"], [239, "\t\t\t}"], [240, "\t\t\ttype = \"bills\";"], [241, "\t\t}"], [242, "\t\telse if (type.equalsIgnoreCase(\"committee\")) {"], [243, "\t\t\tkey = \"committee:\\\"\" + key + \"\\\"\";"], [244, "\t\t\ttype = \"bills\";"], [245, "\t\t}"], [246, ""], [247, "\t\tString originalType = type;"], [253, ""], [275, ""], [317, ""], [324, "\t\t\t\treq.setAttribute(\"urlPath\", urlPath);"], [325, "\t\t\t\tsearchString = ApiHelper.dateReplace(searchString)"], [326, "\t\t\t\t\t+ \" AND year:\" + SessionYear.getSessionYear()"], [327, "\t\t\t\t\t+ \" AND active:true\";"], [336, "\t\t\t\treq.setAttribute(\"urlPath\", urlPath);"], [337, "\t\t\t\tsearchString = ApiHelper.dateReplace(searchString)"], [338, "\t\t\t\t\t+ \" AND when:[\""], [339, "\t\t\t\t\t+ DATE_START"], [340, "\t\t\t\t\t+ \" TO \""], [341, "\t\t\t\t\t+ DATE_END + \"]\""], [342, "\t\t\t\t\t+ \" AND active:true\";"], [351, "\t\t\t\tsearchString = ApiHelper.dateReplace(searchString);"], [354, "\t\t\treq.setAttribute(\"sortField\", sortField);"], [355, "\t\t\treq.setAttribute(\"sortOrder\", Boolean.toString(sortOrder));"], [356, "\t\t\treq.setAttribute(\"type\", type);"], [357, "\t\t\treq.setAttribute(\"term\", searchString);"], [358, "\t\t\treq.setAttribute(\"format\", format);"], [359, "\t\t\treq.setAttribute(\"key\", key);"], [360, "\t\t\treq.setAttribute(PAGE_IDX,pageIdx+\"\");"], [361, "\t\t\treq.setAttribute(PAGE_SIZE,pageSize+\"\");"], [362, ""], [363, "\t\t\tsr = searchEngine.search(searchString,sFormat,start,pageSize,sortField,sortOrder);"], [364, ""]], "deleted": [[192, "\t\t\t\tif (key.length()==0 && req.getParameterNames().hasMoreElements())"], [193, "\t\t\t\t\tkey = req.getParameterNames().nextElement().toString();"], [196, "\t\t\t\t\tpageIdx = Integer.parseInt(st.nextToken());"], [197, ""], [198, "\t\t\t\t\tif (st.hasMoreTokens())"], [200, ""], [225, ""], [228, "\t\tString originalType = type;"], [246, ""], [247, "\t\tif (type.equalsIgnoreCase(\"sponsor\")) {"], [248, "\t\t\tString filter = req.getParameter(\"filter\");"], [249, "\t\t\tkey = \"sponsor:\\\"\" + key + (filter != null ? \" AND \" + filter : \"\");"], [250, "\t\t\ttype = \"bills\";"], [251, "\t\t}"], [252, "\t\telse if (type.equalsIgnoreCase(\"committee\")) {"], [253, "\t\t\tkey = \"committee:\\\"\" + key + \"\\\" AND oid:s*-\" + SessionYear.getSessionYear();"], [254, "\t\t\ttype = \"bills\";"], [255, "\t\t}"], [256, ""], [264, ""], [265, ""], [307, ""], [308, "\t\t\treq.setAttribute(\"sortField\", sortField);"], [309, "\t\t\treq.setAttribute(\"sortOrder\", Boolean.toString(sortOrder));"], [310, "\t\t\treq.setAttribute(\"type\", type);"], [311, "\t\t\treq.setAttribute(\"term\", searchString);"], [312, "\t\t\treq.setAttribute(\"format\", format);"], [313, "\t\t\treq.setAttribute(\"key\", key);"], [314, "\t\t\treq.setAttribute(PAGE_IDX,pageIdx+\"\");"], [315, "\t\t\treq.setAttribute(PAGE_SIZE,pageSize+\"\");"], [316, ""], [323, "\t\t\t\tsr = searchEngine.search(ApiHelper.dateReplace(searchString)"], [324, "\t\t\t\t\t\t+ \" AND year:\" + SessionYear.getSessionYear()"], [325, "\t\t\t\t\t\t+ \" AND active:true\","], [326, "\t\t\t\t\t\tsFormat,start,pageSize,sortField,sortOrder);"], [335, "\t\t\t\tsr = searchEngine.search(ApiHelper.dateReplace(searchString)"], [336, "\t\t\t\t\t\t+ \" AND when:[\""], [337, "\t\t\t\t\t\t+ DATE_START"], [338, "\t\t\t\t\t\t+ \" TO \""], [339, "\t\t\t\t\t\t+ DATE_END + \"]\""], [340, "\t\t\t\t\t\t+ \" AND active:true\","], [341, "\t\t\t\t\t\tsFormat,start,pageSize,sortField,sortOrder);"], [350, "\t\t\t\tsr = searchEngine.search(ApiHelper.dateReplace(searchString),sFormat,start,pageSize,sortField,sortOrder);"]]}, "num_lines_added": 55, "num_lines_removed": 43}