{"hash": "36564abc7e02759d076111f45ecf8a507a1158a1", "message": "bit of cleanup on the statsdwriter", "file_num_lines": 114, "diff_parsed": {"added": [[5, "import java.net.InetSocketAddress;"], [6, "import java.net.SocketAddress;"], [22, "import com.googlecode.jmxtrans.util.DatagramSocketFactory;"], [40, "\t/** bucketType defaults to c == counter */"], [41, "\tprivate String bucketType = \"c\";"], [43, "\tprivate SocketAddress address;"], [44, ""], [45, "\tprivate static final String BUCKET_TYPE = \"bucketType\";"], [50, ""], [60, "\t\t\tthis.pool = JmxUtils.getObjectPool(new DatagramSocketFactory());"], [103, "\t\tthis.address = new InetSocketAddress(host, port);"], [104, ""], [105, "\t\tif (this.getSettings().containsKey(BUCKET_TYPE))"], [106, "\t\t\tbucketType = (String) this.getSettings().get(BUCKET_TYPE);"], [113, "\t\tDatagramSocket socket = (DatagramSocket) pool.borrowObject(this.address);"], [131, "\t\t\t\t\t\t\tsb.append(bucketType);"], [132, "\t\t\t\t\t\t\tsb.append(\"\\n\");"], [135, "\t\t\t\t\t\t\tbyte[] sendData = line.getBytes();"], [141, "\t\t\t\t\t\t\tDatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length);"], [148, "\t\t\tpool.returnObject(address, socket);"]], "deleted": [[5, "import java.net.InetAddress;"], [6, "import java.net.UnknownHostException;"], [24, "import com.googlecode.jmxtrans.util.SocketFactory;"], [41, "\tprivate InetAddress ipAddress;"], [55, "\t\t\tthis.pool = JmxUtils.getObjectPool(new SocketFactory());"], [98, "\t\ttry {"], [99, "\t\t\tipAddress = InetAddress.getByName(host);"], [100, "\t\t} catch (UnknownHostException uhe) {"], [101, "\t\t\tlog.debug(\"Exception: \" + uhe.getMessage());"], [102, "\t\t}"], [109, "\t\tDatagramSocket socket = new DatagramSocket();"], [127, "\t\t\t\t\t\t\tsb.append(\"c\\n\");"], [130, "\t\t\t\t\t\t\tbyte[] sendData = sb.toString().trim().getBytes();"], [136, "\t\t\t\t\t\t\tDatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, ipAddress, port);"], [143, "\t\t\tif (socket != null && ! socket.isClosed()) {"], [144, "\t\t\t\tsocket.close();"], [145, "\t\t\t}"]]}, "num_lines_added": 20, "num_lines_removed": 17}