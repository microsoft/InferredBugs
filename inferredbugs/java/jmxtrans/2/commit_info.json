{"hash": "f3a68c6cd092477a37aa55ebd5ff53cf0dfa0876", "message": "fix an issue where ehcache puts an object into the mbeanserver that can't be accessed without changing the rmisecurity settings in the policy file. (stupid).", "file_num_lines": 294, "diff_parsed": {"added": [[6, "import java.rmi.UnmarshalException;"], [122, ""], [123, "            try {"], [124, "                if (query.getAttr() != null && query.getAttr().size() > 0) {"], [125, "                    log.debug(\"Started query: \" + query);"], [126, "                    AttributeList al = mbeanServer.getAttributes(queryName, query.getAttr().toArray(new String[query.getAttr().size()]));"], [127, "                    for (Attribute attribute : al.asList()) {"], [128, "                        getResult(resList, info, oi, (Attribute)attribute, query);"], [129, "                    }"], [130, "                    if (log.isDebugEnabled()) {"], [131, "                        log.debug(\"Finished query.\");"], [132, "                    }"], [133, ""], [134, "                    query.setResults(resList);"], [135, ""], [136, "                    // Now run the filters."], [137, "                    runFiltersForQuery(query);"], [138, ""], [139, "                    if (log.isDebugEnabled()) {"], [140, "                        log.debug(\"Finished running filters: \" + query);"], [141, "                    }"], [142, "                }"], [143, "            } catch (UnmarshalException ue) {"], [144, "                if (ue.getCause() != null && ue.getCause() instanceof ClassNotFoundException) {"], [145, "                    log.debug(\"Bad unmarshall, continuing. This is probably ok and due to something like this: \" +"], [146, "                    \t\t\"http://ehcache.org/xref/net/sf/ehcache/distribution/RMICacheManagerPeerListener.html#52\", ue.getMessage());"], [147, "                }"]], "deleted": [[121, "            AttributeList al = mbeanServer.getAttributes(queryName, query.getAttr().toArray(new String[query.getAttr().size()]));"], [122, "            for (Attribute attribute : al.asList()) {"], [123, "                getResult(resList, info, oi, (Attribute)attribute, query);"], [126, "        if (log.isDebugEnabled()) {"], [127, "            log.debug(\"Executed query: \" + query);"], [128, "        }"], [130, "        query.setResults(resList);"], [131, ""], [132, "        // Now run the filters."], [133, "        runFiltersForQuery(query);"], [134, ""], [135, "        if (log.isDebugEnabled()) {"], [136, "            log.debug(\"Finished running filters: \" + query);"], [137, "        }"]]}, "num_lines_added": 27, "num_lines_removed": 14}