{"hash": "3d540844d01aeb77a21fa7418a28ede277a23ce5", "message": "Fix bug in previous patch for avoiding notifying for initial data\n\nNow we will instead return a specially constructed empty set that\ncan be used to distinguish empty result from missing result.\n\nThere is a new method in ChangeNotifers that consumers can use to\ndetect this.\n\nI apologize for the hacky code, if the major version is ever\nbumped this should be revert so that the API can return an\nOptional<Set<T>> instead, or avoid firing in ChangeNotifier.setListener(listener, true)\nif no change has ever happened", "file_num_lines": 58, "diff_parsed": {"added": [[32, "  private volatile Set<T> records = ChangeNotifiers.initialEmptyDataInstance();"], [70, "    if (ChangeNotifiers.isNoLongerInitial(currentRecords, records) || !currentRecords.equals(records)) {"], [80, "    if (areAllInitial(changeNotifiers)) {"], [81, "      return ChangeNotifiers.initialEmptyDataInstance();"], [82, "    }"], [83, ""], [90, ""], [91, "  private boolean areAllInitial(List<ChangeNotifier<T>> changeNotifiers) {"], [92, "    for (final ChangeNotifier<T> changeNotifier : changeNotifiers) {"], [93, "      if (!ChangeNotifiers.isInitialEmptyData(changeNotifier.current())) {"], [94, "        return false;"], [95, "      }"], [96, "    }"], [97, "    return true;"], [98, "  }"]], "deleted": [[32, "  private volatile Set<T> records = ImmutableSet.of();"], [33, "  private volatile boolean waitingForFirstEvent = true;"], [71, "    if (waitingForFirstEvent || !currentRecords.equals(records)) {"], [72, "      waitingForFirstEvent = false;"]]}, "num_lines_added": 15, "num_lines_removed": 4}