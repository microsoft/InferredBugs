{"hash": "3f4a5586de4eb4907b42b10ecf0f9c2443f5ff9f", "message": "Fixed mem leak due to caching of object without hasCode (NettyChannelContext", "file_num_lines": 53, "diff_parsed": {"added": [[40, "//    private final Map<ChannelHandlerContext, NettyChannel> m_channelMapper = new HashMap<>();"], [57, "//                    NettyChannel channel;"], [58, "//                    synchronized(m_channelMapper) {"], [59, "//                        if (!m_channelMapper.containsKey(ctx)) {"], [60, "//                            m_channelMapper.put(ctx, new NettyChannel(ctx));"], [61, "//                        }"], [62, "//                        channel = m_channelMapper.get(ctx);"], [63, "//                    }"], [65, "                    m_messaging.handleProtocolMessage(new NettyChannel(ctx), msg);"], [79, "//        NettyChannel channel = m_channelMapper.get(ctx);"], [80, "//        String clientID = (String) channel.getAttribute(NettyChannel.ATTR_KEY_CLIENTID);"], [81, "        String clientID = (String) NettyUtils.getAttribute(ctx, NettyChannel.ATTR_KEY_CLIENTID);"], [82, "        m_messaging.lostConnection(clientID);"], [84, "//        synchronized(m_channelMapper) {"], [85, "//            m_channelMapper.remove(ctx);"], [86, "//        }"]], "deleted": [[40, "    private final Map<ChannelHandlerContext, NettyChannel> m_channelMapper = new HashMap<ChannelHandlerContext, NettyChannel>();"], [57, "                    NettyChannel channel;"], [58, "                    synchronized(m_channelMapper) {"], [59, "                        if (!m_channelMapper.containsKey(ctx)) {"], [60, "                            m_channelMapper.put(ctx, new NettyChannel(ctx));"], [61, "                        }"], [62, "                        channel = m_channelMapper.get(ctx);"], [63, "                    }"], [65, "                    m_messaging.handleProtocolMessage(channel, msg);"], [79, "        NettyChannel channel = m_channelMapper.get(ctx);"], [80, "        String clientID = (String) channel.getAttribute(NettyChannel.ATTR_KEY_CLIENTID);"], [81, "        m_messaging.lostConnection(channel, clientID);"], [83, "        synchronized(m_channelMapper) {"], [84, "            m_channelMapper.remove(ctx);"], [85, "        }"]]}, "num_lines_added": 16, "num_lines_removed": 15}