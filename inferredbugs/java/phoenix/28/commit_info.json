{"hash": "cd49ba7eef11bc748be3619ad3d6c1dd0f0699ea", "message": "PHOENIX-3898 Empty result set after split with local index on multi-tenant table(Rajeshbabu)", "file_num_lines": 1527, "diff_parsed": {"added": [[784, "        assert (isLocalIndex);"], [785, "        ImmutableBytesPtr ptr ="], [786, "                new ImmutableBytesPtr(indexRowKeyPtr.get(),( indexRowKeyPtr.getOffset()"], [787, "                        + (nIndexSaltBuckets > 0 ? 1 : 0)), viewIndexId.length);"], [788, "        return ptr.copyBytesIfNecessary();"]], "deleted": [[784, "        assert(isLocalIndex);"], [785, "        RowKeySchema indexRowKeySchema = getIndexRowKeySchema();"], [786, "        // TODO add logic to skip region start key as well because we cannot find the region startkey in indexhalfstorefilereader."], [787, "        ImmutableBytesWritable ptr = new ImmutableBytesWritable();"], [788, "        TrustedByteArrayOutputStream stream ="], [789, "                new TrustedByteArrayOutputStream(estimatedIndexRowKeyBytes);"], [790, "        DataOutput output = new DataOutputStream(stream);"], [791, "        try {"], [792, "            int indexPosOffset = (!isLocalIndex && nIndexSaltBuckets > 0 ? 1 : 0) + (isMultiTenant ? 1 : 0) + (viewIndexId == null ? 0 : 1);"], [793, "            Boolean hasValue ="], [794, "                    indexRowKeySchema.iterator(indexRowKeyPtr, ptr, indexPosOffset);"], [795, "            if (Boolean.TRUE.equals(hasValue)) {"], [796, "                    output.write(ptr.get(), ptr.getOffset(), ptr.getLength());"], [797, "            }"], [798, "            int length = stream.size();"], [799, "            byte[] dataRowKey = stream.getBuffer();"], [800, "            return dataRowKey.length == length ? dataRowKey : Arrays.copyOf(dataRowKey, length);"], [801, "        } catch (IOException e) {"], [802, "            throw new RuntimeException(e); // Impossible"], [803, "        } finally {"], [804, "            try {"], [805, "                stream.close();"], [806, "            } catch (IOException e) {"], [807, "                throw new RuntimeException(e); // Impossible"], [808, "            }"], [809, "        }"]]}, "num_lines_added": 5, "num_lines_removed": 26}