{"hash": "8eba8e2e975b073ee9afed99e3d1a2da9d89a772", "message": "PHOENIX-2901 If namespaces are enabled, check for existence of schema when sequence created", "file_num_lines": 160, "diff_parsed": {"added": [[40, "import org.apache.phoenix.schema.PNameFactory;"], [125, "        String viewName = schemaName + \".\" + VIEW_NAME;"], [126, "        conn1.createStatement().execute(\"CREATE VIEW \" + viewName + \" AS SELECT * FROM \" + tableName);"], [127, "        conn1.createStatement().execute(\"CREATE INDEX \" + indexName + \" ON \" + viewName + \" (v1)\");"], [129, "        String query = \"SELECT sequence_schema, sequence_name, current_value, increment_by FROM SYSTEM.\\\"SEQUENCE\\\" WHERE sequence_schema like '%\""], [130, "                + schemaName + \"%'\";"], [131, "        ResultSet rs = conn1.prepareStatement(query).executeQuery();"], [132, "        assertTrue(rs.next());"], [133, "        assertEquals(MetaDataUtil.getViewIndexSequenceSchemaName(PNameFactory.newName(tableName), isNamespaceMapped),"], [134, "                rs.getString(\"sequence_schema\"));"], [135, "        assertEquals(MetaDataUtil.getViewIndexSequenceName(PNameFactory.newName(tableName), null, isNamespaceMapped),"], [136, "                rs.getString(\"sequence_name\"));"], [137, "        assertEquals(-32767, rs.getInt(\"current_value\"));"], [138, "        assertEquals(1, rs.getInt(\"increment_by\"));"], [139, "        assertFalse(rs.next());"], [141, "        conn1.createStatement().execute(\"DROP VIEW \" + viewName);"], [145, "        rs = conn2.createStatement().executeQuery(\"SELECT \""]], "deleted": [[119, ""], [125, "        conn1.createStatement().execute(\"CREATE VIEW \" + VIEW_NAME + \" AS SELECT * FROM \" + tableName);"], [126, "        conn1.createStatement().execute(\"CREATE INDEX \" + indexName + \" ON \" + VIEW_NAME + \" (v1)\");"], [129, "        conn1.createStatement().execute(\"DROP VIEW \" + VIEW_NAME);"], [133, "        ResultSet rs = conn2.createStatement().executeQuery(\"SELECT \""]]}, "num_lines_added": 17, "num_lines_removed": 5}