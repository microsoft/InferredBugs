{"hash": "bcdd593348aef99e0a44e70aa78c0ef1b5c3c761", "message": "Implement download to temporary file\n\nInstead of directly downloading into the target file, download to a\ntemporary file and move it to its final location/name when the download\nis complete. This avoids leaving a partially downloaded file in its\nfinal requested location and name.\n\nAlso provides a wait for waiting for the client to complete its\noperation after stopping is requested.\n\nBump to version 1.0.4.\n\nSigned-off-by: Maxime Petazzoni <mpetazzoni@turn.com>", "file_num_lines": 503, "diff_parsed": {"added": [[224, "\tpublic void stop() {"], [225, "\t\tthis.stop(true);"], [226, "\t}"], [227, ""], [228, "\t/** Immediately but gracefully stop this client."], [229, "\t *"], [230, "\t * @param wait Whether to wait for the client execution thread to complete"], [231, "\t * or not. This allows for the client's state to be settled down in one of"], [232, "\t * the <tt>DONE</tt> or <tt>ERROR</tt> states when this method returns."], [233, "\t */"], [234, "\tpublic void stop(boolean wait) {"], [239, "\t\t\tif (wait) {"], [240, "\t\t\t\ttry {"], [241, "\t\t\t\t\tthis.thread.join();"], [242, "\t\t\t\t} catch (InterruptedException ie) {"], [243, "\t\t\t\t\t// Ignore"], [244, "\t\t\t\t}"], [245, "\t\t\t}"], [336, "\t\tthis.torrent.close();"], [337, ""]], "deleted": [[224, "\tpublic synchronized void stop() {"]]}, "num_lines_added": 20, "num_lines_removed": 1}