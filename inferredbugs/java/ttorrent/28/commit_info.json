{"hash": "6c617e5147081fcce6758cfae098f9529ddc4302", "message": "added set main peer activity listener to new peers", "file_num_lines": 102, "diff_parsed": {"added": [[5, "import com.turn.ttorrent.client.peer.PeerActivityListener;"], [29, "  private final PeerActivityListener myPeerActivityListener;"], [31, "  public HandshakeReceiver(String uid,"], [32, "                           PeersStorageFactory peersStorageFactory,"], [33, "                           TorrentsStorageFactory torrentsStorageFactory,"], [34, "                           PeerActivityListener myPeerActivityListener) {"], [38, "    this.myPeerActivityListener = myPeerActivityListener;"], [90, "    logger.debug(\"get handshake {} from {}\", Arrays.toString(messageBytes.array()), socketChannel);"], [92, "    ByteBuffer wrap = ByteBuffer.wrap(hs.getPeerId());"], [93, "    wrap.rewind();"], [94, "    peer.setPeerId(wrap);"], [96, "    logger.trace(\"set peer id to peer \" + peer);"], [101, "    sharingPeer.register(myPeerActivityListener);"], [103, "    SharingPeer old = peersStorageFactory.getPeersStorage().tryAddSharingPeer(peer, sharingPeer);"], [104, "    if (old != null) {"], [105, "      logger.debug(\"$$$ already connected to \" + peer);"], [106, "      return new ShutdownProcessor(uid, peersStorageFactory);"], [107, "    }"]], "deleted": [[29, "  public HandshakeReceiver(String uid, PeersStorageFactory peersStorageFactory, TorrentsStorageFactory torrentsStorageFactory) {"], [85, "    logger.trace(\"set peer id to peer \" + peer);"], [86, "    peer.setPeerId(ByteBuffer.wrap(hs.getPeerId()));"], [93, "    peersStorageFactory.getPeersStorage().addSharingPeer(peer, sharingPeer);"]]}, "num_lines_added": 18, "num_lines_removed": 4}