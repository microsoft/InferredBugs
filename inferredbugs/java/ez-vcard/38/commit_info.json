{"hash": "e92db9e3790b576fdfa03f909424e4415e01ce37", "message": "Fixed thread safety issue in \"CaseClasses\".", "file_num_lines": 76, "diff_parsed": {"added": [[47, "\tprotected volatile Collection<T> preDefined = null;"], [80, "\t\tcheckInit();"], [81, ""], [82, "\t\tfor (T obj : preDefined) {"], [83, "\t\t\tif (matches(obj, value)) {"], [84, "\t\t\t\treturn obj;"], [85, "\t\t\t}"], [86, "\t\t}"], [87, "\t\treturn null;"], [97, "\t\tT found = find(value);"], [98, "\t\tif (found != null) {"], [99, "\t\t\treturn found;"], [102, "\t\tsynchronized (runtimeDefined) {"], [103, "\t\t\tfor (T obj : runtimeDefined) {"], [104, "\t\t\t\tif (matches(obj, value)) {"], [105, "\t\t\t\t\treturn obj;"], [108, ""], [109, "\t\t\tT created = create(value);"], [110, "\t\t\truntimeDefined.add(created);"], [111, "\t\t\treturn created;"], [127, "\t\t\t\t//\"double check idiom\" (Bloch p.283)"], [128, "\t\t\t\tif (preDefined == null) {"]], "deleted": [[47, "\tprotected Collection<T> preDefined = null;"], [80, "\t\treturn find(value, false, false);"], [90, "\t\treturn find(value, true, true);"], [91, "\t}"], [92, ""], [93, "\t/**"], [94, "\t * Searches for a case object by value."], [95, "\t * @param value the value"], [96, "\t * @param createIfNotFound true to create a new instance of the object if it"], [97, "\t * can't be found, false to return \"null\" if not found"], [98, "\t * @param searchRuntimeDefined true to include the runtime-defined objects"], [99, "\t * in the search, false not to"], [100, "\t * @return the object"], [101, "\t */"], [102, "\tprotected T find(V value, boolean createIfNotFound, boolean searchRuntimeDefined) {"], [103, "\t\tcheckInit();"], [104, ""], [105, "\t\tfor (T obj : preDefined) {"], [106, "\t\t\tif (matches(obj, value)) {"], [107, "\t\t\t\treturn obj;"], [108, "\t\t\t}"], [111, "\t\tif (searchRuntimeDefined) {"], [112, "\t\t\tsynchronized (this) {"], [113, "\t\t\t\tfor (T obj : runtimeDefined) {"], [114, "\t\t\t\t\tif (matches(obj, value)) {"], [115, "\t\t\t\t\t\treturn obj;"], [116, "\t\t\t\t\t}"], [117, "\t\t\t\t}"], [118, "\t\t\t\tif (createIfNotFound) {"], [119, "\t\t\t\t\tT created = create(value);"], [120, "\t\t\t\t\truntimeDefined.add(created);"], [121, "\t\t\t\t\treturn created;"], [125, "\t\treturn null;"], [140, "\t\t\t\tif (preDefined == null) { //duplicate if condition needed for concurrency purposes"]]}, "num_lines_added": 22, "num_lines_removed": 34}