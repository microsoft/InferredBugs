{"hash": "b838c4e4331326e38e7c30c56d39be9d71fc930a", "message": "#34 Close reader in FileCacheQueueScheduler", "file_num_lines": 135, "diff_parsed": {"added": [[3, "import org.apache.commons.io.IOUtils;"], [98, "        } catch (FileNotFoundException e) {"], [99, "            //init"], [100, "            logger.info(\"init cache file \" + getFileName(fileUrlAllName));"], [108, "        BufferedReader fileUrlReader = null;"], [109, "        try {"], [110, "            fileUrlReader = new BufferedReader(new FileReader(getFileName(fileUrlAllName)));"], [111, "            int lineReaded = 0;"], [112, "            while ((line = fileUrlReader.readLine()) != null) {"], [113, "                urls.add(line.trim());"], [114, "                lineReaded++;"], [115, "                if (lineReaded > cursor.get()) {"], [116, "                    queue.add(new Request(line));"], [117, "                }"], [118, "            }"], [119, "        } finally {"], [120, "            if (fileUrlReader != null) {"], [121, "                IOUtils.closeQuietly(fileUrlReader);"], [127, "        BufferedReader fileCursorReader = null;"], [128, "        try {"], [129, "            new BufferedReader(new FileReader(getFileName(fileCursor)));"], [130, "            String line;"], [131, "            //read the last number"], [132, "            while ((line = fileCursorReader.readLine()) != null) {"], [133, "                cursor = new AtomicInteger(NumberUtils.toInt(line));"], [134, "            }"], [135, "        } finally {"], [136, "            if (fileCursorReader != null) {"], [137, "                IOUtils.closeQuietly(fileCursorReader);"], [138, "            }"]], "deleted": [[104, "        BufferedReader fileUrlReader = new BufferedReader(new FileReader(getFileName(fileUrlAllName)));"], [105, "        int lineReaded = 0;"], [106, "        while ((line = fileUrlReader.readLine()) != null) {"], [107, "            urls.add(line.trim());"], [108, "            lineReaded++;"], [109, "            if (lineReaded > cursor.get()) {"], [110, "                queue.add(new Request(line));"], [116, "        BufferedReader fileCursorReader = new BufferedReader(new FileReader(getFileName(fileCursor)));"], [117, "        String line;"], [118, "        //read the last number"], [119, "        while ((line = fileCursorReader.readLine()) != null) {"], [120, "            cursor = new AtomicInteger(NumberUtils.toInt(line));"]]}, "num_lines_added": 30, "num_lines_removed": 12}