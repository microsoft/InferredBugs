{"hash": "11086a0e385ed15ff49ae17fce744a1a635696d6", "message": "* Removed synchronization of the sessions sets as the sessions are added and removed from the session sets by the reactor thread only\n* Added test cases for HTTP/1.0 POSTs\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/httpcomponents/httpcore/trunk@503301 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 105, "diff_parsed": {"added": [[97, "        if (!this.bufferingSessions.isEmpty()) {"], [98, "            for (Iterator it = this.bufferingSessions.iterator(); it.hasNext(); ) {"], [99, "                IOSession session = (IOSession) it.next();"], [100, "                SessionBufferStatus bufStatus = session.getBufferStatus();"], [101, "                if (bufStatus != null) {"], [102, "                    if (!bufStatus.hasBufferedInput()) {"], [103, "                        it.remove();"], [104, "                        continue;"], [106, "                }"], [107, "                try {"], [108, "                    int ops = session.getEventMask();"], [109, "                    if ((ops & EventMask.READ) > 0) {"], [110, "                        this.eventDispatch.inputReady(session);"], [111, "                        if (bufStatus != null) {"], [112, "                            if (!bufStatus.hasBufferedInput()) {"], [113, "                                it.remove();"], [117, "                } catch (CancelledKeyException ex) {"], [118, "                    it.remove();"]], "deleted": [[97, "        synchronized (this.bufferingSessions) {"], [98, "            if (!this.bufferingSessions.isEmpty()) {"], [99, "                for (Iterator it = this.bufferingSessions.iterator(); it.hasNext(); ) {"], [100, "                    IOSession session = (IOSession) it.next();"], [101, "                    SessionBufferStatus bufStatus = session.getBufferStatus();"], [102, "                    if (bufStatus != null) {"], [103, "                        if (!bufStatus.hasBufferedInput()) {"], [104, "                            it.remove();"], [105, "                            continue;"], [106, "                        }"], [108, "                    try {"], [109, "                        int ops = session.getEventMask();"], [110, "                        if ((ops & EventMask.READ) > 0) {"], [111, "                            this.eventDispatch.inputReady(session);"], [112, "                            if (bufStatus != null) {"], [113, "                                if (!bufStatus.hasBufferedInput()) {"], [114, "                                    it.remove();"], [115, "                                }"], [118, "                    } catch (CancelledKeyException ex) {"], [119, "                        it.remove();"]]}, "num_lines_added": 18, "num_lines_removed": 20}