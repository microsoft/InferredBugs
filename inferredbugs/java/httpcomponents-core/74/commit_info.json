{"hash": "d0ba921e79018085b261e7fc0aa93319b4795226", "message": "HTTPCORE-309: Fixed regression causing HttpAsyncRequestExecutor to handle 204, 205, 304 responses incorrectly by returning a message with an enclosed content body\n\ngit-svn-id: https://svn.apache.org/repos/asf/httpcomponents/httpcore/trunk@1384141 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 57, "diff_parsed": {"added": [[67, "    protected void onEntityEnclosed("], [68, "            final HttpEntity entity, final ContentType contentType) throws IOException {"], [69, "        long len = entity.getContentLength();"], [70, "        if (len > Integer.MAX_VALUE) {"], [71, "            throw new ContentTooLongException(\"Entity content is too long: \" + len);"], [72, "        }"], [73, "        if (len < 0) {"], [74, "            len = 4096;"], [75, "        }"], [76, "        this.buf = new SimpleInputBuffer((int) len, new HeapByteBufferAllocator());"], [77, "        ((HttpEntityEnclosingRequest) this.request).setEntity("], [78, "                new ContentBufferEntity(entity, this.buf));"]], "deleted": [[64, "        if (request instanceof HttpEntityEnclosingRequest) {"], [65, "            HttpEntity entity = ((HttpEntityEnclosingRequest) this.request).getEntity();"], [66, "            if (entity != null) {"], [67, "                long len = entity.getContentLength();"], [68, "                if (len > Integer.MAX_VALUE) {"], [69, "                    throw new ContentTooLongException(\"Entity content is too long: \" + len);"], [70, "                }"], [71, "                if (len < 0) {"], [72, "                    len = 4096;"], [73, "                }"], [74, "                this.buf = new SimpleInputBuffer((int) len, HeapByteBufferAllocator.INSTANCE);"], [75, "                ((HttpEntityEnclosingRequest) this.request).setEntity("], [76, "                        new ContentBufferEntity(entity, this.buf));"], [77, "            }"], [78, "        }"], [82, "    protected void onEntityEnclosed(final HttpEntity entity, final ContentType contentType) {"]]}, "num_lines_added": 12, "num_lines_removed": 16}