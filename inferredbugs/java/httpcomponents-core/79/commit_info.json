{"hash": "d0ba921e79018085b261e7fc0aa93319b4795226", "message": "HTTPCORE-309: Fixed regression causing HttpAsyncRequestExecutor to handle 204, 205, 304 responses incorrectly by returning a message with an enclosed content body\n\ngit-svn-id: https://svn.apache.org/repos/asf/httpcomponents/httpcore/trunk@1384141 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 55, "diff_parsed": {"added": [[66, "    protected void onEntityEnclosed("], [67, "            final HttpEntity entity, final ContentType contentType) throws IOException {"], [68, "        long len = entity.getContentLength();"], [69, "        if (len > Integer.MAX_VALUE) {"], [70, "            throw new ContentTooLongException(\"Entity content is too long: \" + len);"], [71, "        }"], [72, "        if (len < 0) {"], [73, "            len = 4096;"], [74, "        }"], [75, "        this.buf = new SimpleInputBuffer((int) len, new HeapByteBufferAllocator());"], [76, "        this.response.setEntity(new ContentBufferEntity(entity, this.buf));"]], "deleted": [[63, "        HttpEntity entity = this.response.getEntity();"], [64, "        if (entity != null) {"], [65, "            long len = entity.getContentLength();"], [66, "            if (len > Integer.MAX_VALUE) {"], [67, "                throw new ContentTooLongException(\"Entity content is too long: \" + len);"], [68, "            }"], [69, "            if (len < 0) {"], [70, "                len = 4096;"], [71, "            }"], [72, "            this.buf = new SimpleInputBuffer((int) len, HeapByteBufferAllocator.INSTANCE);"], [73, "            response.setEntity(new ContentBufferEntity(entity, this.buf));"], [74, "        }"], [78, "    protected void onEntityEnclosed(final HttpEntity entity, final ContentType contentType) {"]]}, "num_lines_added": 11, "num_lines_removed": 13}