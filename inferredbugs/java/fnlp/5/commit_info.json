{"hash": "afd1063e70427e7b8981350022466c068c27c73b", "message": "ctb", "file_num_lines": 67, "diff_parsed": {"added": [[2, " *  This file is part of FNLP (formerly FudanNLP)."], [3, " *"], [4, " *  FNLP is free software: you can redistribute it and/or modify"], [5, " *  it under the terms of the GNU Lesser General Public License as published by"], [6, " *  the Free Software Foundation, either version 3 of the License, or"], [7, " *  (at your option) any later version."], [8, " *"], [9, " *  FNLP is distributed in the hope that it will be useful,"], [10, " *  but WITHOUT ANY WARRANTY; without even the implied warranty of"], [11, " *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the"], [12, " *  GNU Lesser General Public License for more details."], [13, " *"], [14, " *  You should have received a copy of the GNU General Public License"], [15, " *  along with FudanNLP.  If not, see <http://www.gnu.org/licenses/>."], [16, " *"], [17, " *  Copyright 2009-2014 www.fnlp.org. All rights reserved."], [18, " */"], [25, "import java.io.FileInputStream;"], [26, "import java.io.FileNotFoundException;"], [31, "import java.io.Writer;"], [32, "import java.nio.charset.Charset;"], [46, "//\t\t\tFile handle = new File(\"../tmp/ctb_v1/data\");"], [47, "\t\t\tFile handle = new File(\"../tmp/ctb_v6/data/bracketed\");"], [48, ""], [50, "\t\t\t\t\tnew FileOutputStream(\"../tmp/malt.train\"), \"UTF-8\"));"], [52, "\t\t\t\tString file = sub.getAbsolutePath();"], [53, "\t\t\t\tif(!file.endsWith(\".fid\"))"], [54, "\t\t\t\t\tcontinue;"], [55, "\t\t\t\tclean(file);"], [56, "\t\t\t\tprocess = Runtime.getRuntime().exec(\"cmd /c java -jar ../tmp/Penn2Malt.jar \"+file+\" ../tmp/headrules.txt 3 2 chtb\");"], [58, "\t\t\t\t\t\tnew InputStreamReader(process.getInputStream()));"], [62, "\t\t\t\t}"], [63, "\t\t\t\tbufferedReader = new BufferedReader("], [64, "\t\t\t\t\t\tnew InputStreamReader(process.getErrorStream()));"], [65, "\t\t\t\twhile ( (ls_1=bufferedReader.readLine()) != null)"], [66, "\t\t\t\t{"], [67, "\t\t\t\t\tSystem.out.println(ls_1);"], [75, "\t}"], [76, ""], [77, "\t/**"], [78, "\t * @param str"], [79, "\t * \u4e0b\u53485:12:24"], [80, "\t * @throws IOException"], [81, "\t */"], [82, "\tprivate static void clean(String file) throws IOException {"], [83, ""], [84, "\t\tStringBuffer sb = new StringBuffer();"], [85, "\t\tBufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(file),Charset.forName(\"utf8\")));"], [86, "\t\tString str;"], [87, "\t\twhile((str = br.readLine())!=null){"], [88, "\t\t\tif(str.length()!=0&&!str.trim().startsWith(\"<\")){"], [89, "\t\t\t\tif(str.equalsIgnoreCase(\"root\"))"], [90, "\t\t\t\t\tcontinue;"], [91, "\t\t\t\tif(str.contains(\"</HEADER> \")||str.contains(\"</HEADLINE>\"))"], [92, "\t\t\t\t\tcontinue;"], [93, "\t\t\t\tsb.append(str+\"\\n\");"], [94, ""], [95, "\t\t\t}"], [96, "\t\t}"], [97, ""], [98, "\t\tbr.close();"], [99, "\t\tWriter wr = new OutputStreamWriter(new FileOutputStream(new File(file)),Charset.forName(\"gbk\"));//\u8f93\u51fa\u76ee\u5f55"], [100, "\t\twr.write(sb.toString());"], [101, "\t\twr.close();"], [102, ""]], "deleted": [[2, "*  This file is part of FNLP (formerly FudanNLP)."], [3, "*"], [4, "*  FNLP is free software: you can redistribute it and/or modify"], [5, "*  it under the terms of the GNU Lesser General Public License as published by"], [6, "*  the Free Software Foundation, either version 3 of the License, or"], [7, "*  (at your option) any later version."], [8, "*"], [9, "*  FNLP is distributed in the hope that it will be useful,"], [10, "*  but WITHOUT ANY WARRANTY; without even the implied warranty of"], [11, "*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the"], [12, "*  GNU Lesser General Public License for more details."], [13, "*"], [14, "*  You should have received a copy of the GNU General Public License"], [15, "*  along with FudanNLP.  If not, see <http://www.gnu.org/licenses/>."], [16, "*"], [17, "*  Copyright 2009-2014 www.fnlp.org. All rights reserved."], [18, "*/"], [42, "\t\t\tFile handle = new File(\"./tmpdata/ctb/data3\");"], [44, "\t\t\t\t\tnew FileOutputStream(\"./tmpdata/malt.train\"), \"UTF-8\"));"], [46, "\t\t\t\tString str = sub.getAbsolutePath();"], [47, "\t\t\t\tprocess = Runtime.getRuntime().exec(\"cmd /c java -jar ./tmpdata/ctb/Penn2Malt.jar \"+str+\" ./tmpdata/ctb/headrules.txt 3 2 chtb\");"], [49, "\t\t\t\t\tnew InputStreamReader(process.getInputStream()));"]]}, "num_lines_added": 65, "num_lines_removed": 22}