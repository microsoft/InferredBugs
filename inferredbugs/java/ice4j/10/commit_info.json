{"hash": "0f86b8797fd4144fc13bf498869d08b8c4e33dab", "message": "feat: Handles pairs discovered late,\n\nafter the Agent has completed/terminated.", "file_num_lines": 1235, "diff_parsed": {"added": [[1545, "        LocalCandidate localCandidate = findLocalCandidate(localAddress);"], [1555, "        RemoteCandidate remoteCandidate"], [1556, "            = new RemoteCandidate("], [1579, "            if (state == IceProcessingState.WAITING)"], [1580, "            {"], [1581, "                logger.fine(\"Receive STUN checks before our ICE has started\");"], [1582, "                //we are not started yet so we'd better wait until we get the"], [1583, "                //remote candidates in case we are holding to a new PR one."], [1584, "                this.preDiscoveredPairsQueue.add(triggeredPair);"], [1585, "            }"], [1586, "            else if (state == IceProcessingState.FAILED)"], [1587, "            {"], [1588, "                // Failure is permanent, currently."], [1589, "            }"], [1590, "            else //Running, Connected or Terminated."], [1592, "                if (logger.isLoggable(Level.FINE))"], [1594, "                    logger.debug(\"Received check from \""], [1598, ""], [1599, "                // We have been started, and have not failed (yet). If this is"], [1600, "                // a new pair, handle it (even if we have already completed)."]], "deleted": [[1544, "        if (isOver())"], [1545, "        {"], [1546, "            //means we already completed ICE and are happily running media"], [1547, "            //the only reason we are called is most probably because the remote"], [1548, "            //party is still sending Binding Requests our way and making sure we"], [1549, "            //are still alive."], [1550, "            return;"], [1551, "        }"], [1552, ""], [1554, "        LocalCandidate localCandidate = null;"], [1555, ""], [1556, "        localCandidate = findLocalCandidate(localAddress);"], [1566, "        RemoteCandidate remoteCandidate = null;"], [1567, ""], [1568, "        remoteCandidate = new RemoteCandidate("], [1591, "            if (isStarted())"], [1593, "                //we are started, which means we have the remote candidates"], [1594, "                //so it's now safe to go and see whether this is a new PR cand."], [1595, "                if (triggeredPair.getParentComponent().getSelectedPair() == null)"], [1597, "                    logger.info(\"Received check from \""], [1603, "            else"], [1604, "            {"], [1605, "                logger.fine(\"Receive STUN checks before our ICE has started\");"], [1606, "                //we are not started yet so we'd better wait until we get the"], [1607, "                //remote candidates in case we are holding to a new PR one."], [1608, "                this.preDiscoveredPairsQueue.add(triggeredPair);"], [1609, "            }"]]}, "num_lines_added": 20, "num_lines_removed": 27}