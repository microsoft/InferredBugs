{"hash": "0a80fb022ccf6443c706fc2d211857cecdb7c224", "message": "Support binding of a whole core for hyper-threaded systems. AffinityLock.acquireCore()", "file_num_lines": 144, "diff_parsed": {"added": [[32, "    private final int sockets;"], [33, "    private final int coresPerSocket;"], [34, "    private final int threadsPerCore;"], [38, "        int sockets = 0, cores = 0, threads = 0;"], [39, "        for (CpuInfo cpuDetail : cpuDetails) {"], [40, "            if (sockets <= cpuDetail.socketId)"], [41, "                sockets = cpuDetail.socketId + 1;"], [42, "            if (cores <= cpuDetail.coreId)"], [43, "                cores = cpuDetail.coreId + 1;"], [44, "            if (threads <= cpuDetail.threadId)"], [45, "                threads = cpuDetail.threadId + 1;"], [46, "        }"], [47, "        assert cpuDetails.size() == sockets * cores * threads;"], [48, "        this.sockets = sockets;"], [49, "        this.coresPerSocket = cores;"], [50, "        this.threadsPerCore = threads;"], [54, "        return fromProperties(openFile(fileName));"], [81, "        return fromCpuInfo(openFile(filename));"], [82, "    }"], [83, ""], [84, "    private static InputStream openFile(String filename) throws FileNotFoundException {"], [85, "        try {"], [86, "            return new FileInputStream(filename);"], [87, "        } catch (FileNotFoundException e) {"], [88, "            InputStream is = Thread.currentThread().getContextClassLoader().getResourceAsStream(filename);"], [89, "            if (is == null)"], [90, "                throw e;"], [91, "            return is;"], [92, "        }"], [129, "    public int sockets() {"], [130, "        return sockets;"], [131, "    }"], [132, ""], [133, "    public int coresPerSocket() {"], [134, "        return coresPerSocket;"], [135, "    }"], [136, ""], [137, "    @Override"], [138, "    public int threadPerCore() {"], [139, "        return threadsPerCore;"], [140, "    }"], [141, ""]], "deleted": [[38, "        return fromProperties(new FileInputStream(fileName));"], [65, "        return fromCpuInfo(new FileInputStream(filename));"]]}, "num_lines_added": 42, "num_lines_removed": 2}