{"hash": "b40cf1889b68c6fb0343926df39cf642686d297f", "message": "Making BusinessIdentityTester thread safe.\nFixing IdentityFactoryRaceConditionTest to detect failures correctly and to reuse Validator.", "file_num_lines": 55, "diff_parsed": {"added": [[42, "    Object instance1 = ValidationHelper.getMostCompleteInstance(pojoClass);"], [43, "    Object instance2 = ValidationHelper.getMostCompleteInstance(pojoClass);"], [45, "    IdentityHandlerStub identityHandlerStub = new IdentityHandlerStub(instance1, instance2);"], [46, "    IdentityFactory.registerIdentityHandler(identityHandlerStub);"], [50, "    checkEquality(instance1, instance2, identityHandlerStub);"], [53, "    checkEquality(instance1, instance2, identityHandlerStub);"], [56, "    checkHashCode(instance1, identityHandlerStub);"], [59, "    checkHashCode(instance1, identityHandlerStub);"], [64, "  private void checkHashCode(Object firstPojoClassInstance, IdentityHandlerStub identityHandlerStub) {"], [69, "  private void checkEquality(Object instance1, Object instance2, IdentityHandlerStub identityHandlerStub) {"], [71, "        instance1.getClass()), identityHandlerStub.areEqualReturn == instance1.equals(instance2));"], [75, "    private Boolean areEqualReturn;"], [76, "    private Integer doGenerateReturn;"], [77, ""], [78, "    private Object instance1;"], [79, "    private Object instance2;"], [80, ""], [81, "    private IdentityHandlerStub(Object instance1, Object instance2) {"], [82, "      this.instance1 = instance1;"], [83, "      this.instance2 = instance2;"], [84, "    }"], [98, "      return object == instance1 || object == instance2;"]], "deleted": [[41, "  private Object firstPojoClassInstance;"], [42, "  private Object secondPojoClassInstance;"], [43, "  private final IdentityHandlerStub identityHandlerStub = new IdentityHandlerStub();"], [44, ""], [46, "    IdentityFactory.registerIdentityHandler(identityHandlerStub);"], [48, "    firstPojoClassInstance = ValidationHelper.getMostCompleteInstance(pojoClass);"], [49, "    secondPojoClassInstance = ValidationHelper.getMostCompleteInstance(pojoClass);"], [53, "    checkEquality();"], [56, "    checkEquality();"], [59, "    checkHashCode();"], [62, "    checkHashCode();"], [67, "  private void checkHashCode() {"], [72, "  private void checkEquality() {"], [74, "        firstPojoClassInstance.getClass()), identityHandlerStub.areEqualReturn == firstPojoClassInstance.equals(secondPojoClassInstance));"], [78, "    private boolean areEqualReturn;"], [79, "    private int doGenerateReturn;"], [93, "      return object == firstPojoClassInstance || object == secondPojoClassInstance;"]]}, "num_lines_added": 22, "num_lines_removed": 17}