{"hash": "5403bacb7d76f6abb281ae10442796da30077beb", "message": "fix:\n\u4fee\u590d\u963f\u91cc\u89c4\u7ea6\u7684\u95ee\u9898", "file_num_lines": 39, "diff_parsed": {"added": [[3, "import pro.tools.constant.StrConst;"], [4, ""], [12, " * \u5bf9\u5b57\u7b26\u4e32\u7684\u538b\u7f29\u53ca\u89e3\u538b"], [13, " *"], [14, " * @author SeanDragon"], [18, "    private ToolStrCompress() {"], [19, "        throw new UnsupportedOperationException(\"\u6211\u662f\u5de5\u5177\u7c7b\uff0c\u522b\u521d\u59cb\u5316\u6211\u3002\u3002\u3002\");"], [26, "     *"], [28, "     *"], [35, "        try ("], [36, "                // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 byte \u6570\u7ec4\u8f93\u51fa\u6d41"], [37, "                ByteArrayOutputStream out = new ByteArrayOutputStream();"], [38, "                // \u4f7f\u7528\u9ed8\u8ba4\u7f13\u51b2\u533a\u5927\u5c0f\u521b\u5efa\u65b0\u7684\u8f93\u51fa\u6d41"], [39, "                GZIPOutputStream gzip = new GZIPOutputStream(out);) {"], [40, "            // \u5c06 b.length \u4e2a\u5b57\u8282\u5199\u5165\u6b64\u8f93\u51fa\u6d41"], [41, "            gzip.write(str.getBytes());"], [42, "            // \u4f7f\u7528\u6307\u5b9a\u7684 charsetName\uff0c\u901a\u8fc7\u89e3\u7801\u5b57\u8282\u5c06\u7f13\u51b2\u533a\u5185\u5bb9\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32"], [43, "            return out.toString(StrConst.DEFAULT_CHARSET_NAME);"], [44, "        }"], [51, "     *"], [53, "     *"], [60, "        try ("], [61, "                // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 byte \u6570\u7ec4\u8f93\u51fa\u6d41"], [62, "                ByteArrayOutputStream out = new ByteArrayOutputStream();"], [63, "                // \u521b\u5efa\u4e00\u4e2a ByteArrayInputStream\uff0c\u4f7f\u7528 buf \u4f5c\u4e3a\u5176\u7f13\u51b2\u533a\u6570\u7ec4"], [64, "                ByteArrayInputStream in = new ByteArrayInputStream(str.getBytes(StrConst.DEFAULT_CHARSET_NAME));"], [65, "                // \u4f7f\u7528\u9ed8\u8ba4\u7f13\u51b2\u533a\u5927\u5c0f\u521b\u5efa\u65b0\u7684\u8f93\u5165\u6d41"], [66, "                GZIPInputStream gzip = new GZIPInputStream(in);) {"], [67, "            byte[] buffer = new byte[256];"], [68, "            int n = 0;"], [69, "            // \u5c06\u672a\u538b\u7f29\u6570\u636e\u8bfb\u5165\u5b57\u8282\u6570\u7ec4"], [70, "            while ((n = gzip.read(buffer)) >= 0) {"], [71, "                // \u5c06\u6307\u5b9a byte \u6570\u7ec4\u4e2d\u4ece\u504f\u79fb\u91cf off \u5f00\u59cb\u7684 len \u4e2a\u5b57\u8282\u5199\u5165\u6b64 byte\u6570\u7ec4\u8f93\u51fa\u6d41"], [72, "                out.write(buffer, 0, n);"], [73, "            }"], [74, "            // \u4f7f\u7528\u6307\u5b9a\u7684 charsetName\uff0c\u901a\u8fc7\u89e3\u7801\u5b57\u8282\u5c06\u7f13\u51b2\u533a\u5185\u5bb9\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32"], [75, "            return out.toString(StrConst.DEFAULT_CHARSET_NAME);"]], "deleted": [[10, " * Module:          ZipUtil.java"], [11, " * Description:    \u5bf9\u5b57\u7b26\u4e32\u7684\u538b\u7f29\u53ca\u89e3\u538b"], [12, " * Company:"], [13, " * Author:           pantp"], [14, " * Date:             May 6, 2012"], [18, "    public static void main(String[] args) throws IOException {"], [19, "        // \u5b57\u7b26\u4e32\u8d85\u8fc7\u4e00\u5b9a\u7684\u957f\u5ea6"], [20, "        String str = \"ABCdef123\u4e2d\u6587~!@#$%^&*()_+{};/1111111111111111111111111AAAAAAAAAAAJDLFJDLFJDLFJLDFFFFJEIIIIIIIIIIFJJJJJJJJJJJJALLLLLLLLLLLLLLLLLLLLLL\" +"], [21, "                \"LLppppppppppppppppppppppppppppppppppppppppp===========================------------------------------iiiiiiiiiiiiiiiiiiiiiii\";"], [22, "        str = \"\u7f8e\u56fd\u5b66\u8005 Dime \u548c Henman \u4e3a\u89e3\u51b3\u4fe1\u606f\u516c\u5f00\u4f20\u9001\u548c\u5bc6\u94a5\u7ba1\u7406\u95ee\u9898\uff0c\u63d0\u51fa\u4e00\u79cd\u65b0\u7684\u5bc6\u94a5\u4ea4\u6362\u534f\u8bae\uff0c\u5141\u8bb8\u5728\u4e0d\u5b89\u5168\u7684\u5a92\u4f53\u4e0a\u7684\u901a\u8baf\u53cc\u65b9\u4ea4\u6362\u4fe1\u606f\uff0c\u5b89\u5168\u5730\u8fbe\u6210\u4e00\u81f4\u7684\u5bc6\u94a5\uff0c\u8fd9\u5c31\u662f \u201c\u516c\u5f00\u5bc6\u94a5\u7cfb\u7edf\u201d\u3002\u4e0e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u4e0d\u540c\uff0c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u9700\u8981\u4e24\u4e2a\u5bc6\u94a5\uff1a\u516c\u5f00\u5bc6\u94a5\uff08publickey\uff09\u548c\u79c1\u6709\u5bc6\u94a5\uff08privatekey\uff09\u3002\u516c\u5f00\u5bc6\u94a5\u4e0e\u79c1\u6709\u5bc6\u94a5\u662f\u4e00\u5bf9\uff0c\u5982\u679c\u7528\u516c\u5f00\u5bc6\u94a5\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u53ea\u6709\u7528\u5bf9\u5e94\u7684\u79c1\u6709\u5bc6\u94a5\u624d\u80fd\u89e3\u5bc6\uff1b\u5982\u679c\u7528\u79c1\u6709\u5bc6\u94a5\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u90a3\u4e48\u53ea\u6709\u7528\u5bf9\u5e94\u7684\u516c\u5f00\u5bc6\u94a5\u624d\u80fd\u89e3\u5bc6\u3002\u56e0\u4e3a\u52a0\u5bc6\u548c\u89e3\u5bc6\u4f7f\u7528\u7684\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u5bc6\u94a5\uff0c\u6240\u4ee5\u8fd9\u79cd\u7b97\u6cd5\u53eb\u4f5c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u3002\u5de5\u4f5c\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7532\u4e59\u4e4b\u95f4\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u7684\u65b9\u5f0f\u5b8c\u6210\u4e86\u91cd\u8981\u4fe1\u606f\u7684\u5b89\u5168\u4f20\u8f93\u3002\u975e\u5bf9\u79f0\u52a0\u5bc6\u5de5\u4f5c\u8fc7\u7a0b\u7b80\u8981\u793a\u610f\u56fe\u975e\u5bf9\u79f0\u52a0\u5bc6\u5de5\u4f5c\u8fc7\u7a0b\u7b80\u8981\u793a\u610f\u56fe\u7f8e\u56fd\u5b66\u8005 Dime \u548c Henman \u4e3a\u89e3\u51b3\u4fe1\u606f\u516c\u5f00\u4f20\u9001\u548c\u5bc6\u94a5\u7ba1\u7406\u95ee\u9898\uff0c\u63d0\u51fa\u4e00\u79cd\u65b0\u7684\u5bc6\u94a5\u4ea4\u6362\u534f\u8bae\uff0c\u5141\u8bb8\u5728\u4e0d\u5b89\u5168\u7684\u5a92\u4f53\u4e0a\u7684\u901a\u8baf\u53cc\u65b9\u4ea4\u6362\u4fe1\u606f\uff0c\u5b89\u5168\u5730\u8fbe\u6210\u4e00\u81f4\u7684\u5bc6\u94a5\uff0c\u8fd9\u5c31\u662f \u201c\u516c\u5f00\u5bc6\u94a5\u7cfb\u7edf\u201d\u3002\u4e0e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u4e0d\u540c\uff0c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u9700\u8981\u4e24\u4e2a\u5bc6\u94a5\uff1a\u516c\u5f00\u5bc6\u94a5\uff08publickey\uff09\u548c\u79c1\u6709\u5bc6\u94a5\uff08privatekey\uff09\u3002\u516c\u5f00\u5bc6\u94a5\u4e0e\u79c1\u6709\u5bc6\u94a5\u662f\u4e00\u5bf9\uff0c\u5982\u679c\u7528\u516c\u5f00\u5bc6\u94a5\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u53ea\u6709\u7528\u5bf9\u5e94\u7684\u79c1\u6709\u5bc6\u94a5\u624d\u80fd\u89e3\u5bc6\uff1b\u5982\u679c\u7528\u79c1\u6709\u5bc6\u94a5\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u90a3\u4e48\u53ea\u6709\u7528\u5bf9\u5e94\u7684\u516c\u5f00\u5bc6\u94a5\u624d\u80fd\u89e3\u5bc6\u3002\u56e0\u4e3a\u52a0\u5bc6\u548c\u89e3\u5bc6\u4f7f\u7528\u7684\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u5bc6\u94a5\uff0c\u6240\u4ee5\u8fd9\u79cd\u7b97\u6cd5\u53eb\u4f5c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u3002\u5de5\u4f5c\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7532\u4e59\u4e4b\u95f4\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u7684\u65b9\u5f0f\u5b8c\u6210\u4e86\u91cd\u8981\u4fe1\u606f\u7684\u5b89\u5168\u4f20\u8f93\u3002\u975e\u5bf9\u79f0\u52a0\u5bc6\u5de5\u4f5c\u8fc7\u7a0b\u7b80\u8981\u793a\u610f\u56fe\u975e\u5bf9\u79f0\u52a0\u5bc6\u5de5\u4f5c\u8fc7\u7a0b\u7b80\u8981\u793a\u610f\u56fe\";"], [23, "//        str = \"1\";"], [24, ""], [25, "        System.out.println(\"\\n\u539f\u59cb\u7684\u5b57\u7b26\u4e32\u4e3a------->\" + str);"], [26, "        float len0 = str.length();"], [27, "        System.out.println(\"\u539f\u59cb\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a------->\" + len0);"], [28, ""], [29, "        String ys = compress(str);"], [30, "        System.out.println(\"\\n\u538b\u7f29\u540e\u7684\u5b57\u7b26\u4e32\u4e3a----->\" + ys);"], [31, "        float len1 = ys.length();"], [32, "        System.out.println(\"\u538b\u7f29\u540e\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a----->\" + len1);"], [33, ""], [34, "        String jy = unCompress(ys);"], [35, "        System.out.println(\"\\n\u89e3\u538b\u7f29\u540e\u7684\u5b57\u7b26\u4e32\u4e3a--->\" + jy);"], [36, "        System.out.println(\"\u89e3\u538b\u7f29\u540e\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a--->\" + jy.length());"], [37, ""], [38, "        System.out.println(\"\\n\u538b\u7f29\u6bd4\u4f8b\u4e3a\" + len1 / len0);"], [39, ""], [40, "        //\u5224\u65ad"], [41, "        if (str.equals(jy)) {"], [42, "            System.out.println(\"\u5148\u538b\u7f29\u518d\u89e3\u538b\u4ee5\u540e\u5b57\u7b26\u4e32\u548c\u539f\u6765\u7684\u662f\u4e00\u6a21\u4e00\u6837\u7684\");"], [43, "        }"], [57, "        // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 byte \u6570\u7ec4\u8f93\u51fa\u6d41"], [58, "        ByteArrayOutputStream out = new ByteArrayOutputStream();"], [59, "        // \u4f7f\u7528\u9ed8\u8ba4\u7f13\u51b2\u533a\u5927\u5c0f\u521b\u5efa\u65b0\u7684\u8f93\u51fa\u6d41"], [60, "        GZIPOutputStream gzip = new GZIPOutputStream(out);"], [61, "        // \u5c06 b.length \u4e2a\u5b57\u8282\u5199\u5165\u6b64\u8f93\u51fa\u6d41"], [62, "        gzip.write(str.getBytes());"], [63, "        gzip.close();"], [64, "        // \u4f7f\u7528\u6307\u5b9a\u7684 charsetName\uff0c\u901a\u8fc7\u89e3\u7801\u5b57\u8282\u5c06\u7f13\u51b2\u533a\u5185\u5bb9\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32"], [65, "        return out.toString(\"UTF-8\");"], [79, "        // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 byte \u6570\u7ec4\u8f93\u51fa\u6d41"], [80, "        ByteArrayOutputStream out = new ByteArrayOutputStream();"], [81, "        // \u521b\u5efa\u4e00\u4e2a ByteArrayInputStream\uff0c\u4f7f\u7528 buf \u4f5c\u4e3a\u5176\u7f13\u51b2\u533a\u6570\u7ec4"], [82, "        ByteArrayInputStream in = new ByteArrayInputStream(str"], [83, "                .getBytes(\"UTF-8\"));"], [84, "        // \u4f7f\u7528\u9ed8\u8ba4\u7f13\u51b2\u533a\u5927\u5c0f\u521b\u5efa\u65b0\u7684\u8f93\u5165\u6d41"], [85, "        GZIPInputStream gzip = new GZIPInputStream(in);"], [86, "        byte[] buffer = new byte[256];"], [87, "        int n = 0;"], [88, "        while ((n = gzip.read(buffer)) >= 0) {// \u5c06\u672a\u538b\u7f29\u6570\u636e\u8bfb\u5165\u5b57\u8282\u6570\u7ec4"], [89, "            // \u5c06\u6307\u5b9a byte \u6570\u7ec4\u4e2d\u4ece\u504f\u79fb\u91cf off \u5f00\u59cb\u7684 len \u4e2a\u5b57\u8282\u5199\u5165\u6b64 byte\u6570\u7ec4\u8f93\u51fa\u6d41"], [90, "            out.write(buffer, 0, n);"], [92, "        // \u4f7f\u7528\u6307\u5b9a\u7684 charsetName\uff0c\u901a\u8fc7\u89e3\u7801\u5b57\u8282\u5c06\u7f13\u51b2\u533a\u5185\u5bb9\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32"], [93, "        return out.toString(\"UTF-8\");"]]}, "num_lines_added": 37, "num_lines_removed": 54}