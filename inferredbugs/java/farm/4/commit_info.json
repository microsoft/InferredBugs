{"hash": "c9c4d3e6b1c59bf7526ce352880b63ec8e4242e0", "message": "#280: footprint.xsl", "file_num_lines": 47, "diff_parsed": {"added": [[23, "import com.zerocracy.farm.props.PropsFarm;"], [25, "import com.zerocracy.jstk.Farm;"], [29, "import com.zerocracy.pm.Footprint;"], [54, "        final Farm farm = new SyncFarm("], [55, "            new FtFarm(new PropsFarm(new S3Farm(bucket)))"], [56, "        );"], [57, "        final Project project = farm.find(\"@id='ABCZZFE03'\").iterator().next();"], [58, "        final Claims claims = new Claims(project);"], [59, "        final AtomicLong cid = new AtomicLong(1L);"], [60, "        final int threads = 10;"], [61, "        MatcherAssert.assertThat("], [62, "            inc -> {"], [63, "                final long num = cid.getAndIncrement();"], [64, "                new ClaimOut().cid(num).type(\"hello\").postTo(project);"], [65, "                claims.remove(num);"], [66, "                return true;"], [67, "            },"], [68, "            new RunsInThreads<>(new AtomicInteger(), threads)"], [69, "        );"], [70, "        MatcherAssert.assertThat("], [71, "            new Footprint(farm, project).collection().count(),"], [72, "            Matchers.equalTo((long) threads)"], [73, "        );"]], "deleted": [[51, "        try (final FakeMongo mongo = new FakeMongo().start()) {"], [52, "            final Project project = new SyncFarm("], [53, "                new FtFarm(new S3Farm(bucket), mongo.client())"], [54, "            ).find(\"@id='ABCZZFE03'\").iterator().next();"], [55, "            final Claims claims = new Claims(project);"], [56, "            final AtomicLong cid = new AtomicLong(1L);"], [57, "            final int threads = 10;"], [58, "            MatcherAssert.assertThat("], [59, "                inc -> {"], [60, "                    final long num = cid.getAndIncrement();"], [61, "                    new ClaimOut().cid(num).type(\"hello\").postTo(project);"], [62, "                    claims.remove(num);"], [63, "                    return true;"], [64, "                },"], [65, "                new RunsInThreads<>(new AtomicInteger(), threads)"], [66, "            );"], [67, "            MatcherAssert.assertThat("], [68, "                mongo.client().getDatabase(\"footprint\")"], [69, "                    .getCollection(\"claims\")"], [70, "                    .count(),"], [71, "                Matchers.equalTo((long) threads)"], [72, "            );"], [73, "        }"]]}, "num_lines_added": 23, "num_lines_removed": 23}