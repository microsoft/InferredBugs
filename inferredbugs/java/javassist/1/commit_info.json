{"hash": "fe122bdfe25febcb190a9e91a07eb3c3268d1e75", "message": "changed the behavior of CtClassType.setSuperclass().\n\n\ngit-svn-id: http://anonsvn.jboss.org/repos/javassist/trunk@35 30ef5769-5b8d-40dd-aea6-55b5d6557bb3", "file_num_lines": 291, "diff_parsed": {"added": [[174, "     * <p>This method modifies constructors so that they call"], [175, "     * constructors declared in the new super class."], [180, "        if (superclass == null)"], [181, "            superclass = \"java.lang.Object\";"], [183, "        try {"], [184, "            superClass = constPool.addClassInfo(superclass);"], [185, "            LinkedList list = methods;"], [186, "            int n = list.size();"], [187, "            for (int i = 0; i < n; ++i) {"], [188, "                MethodInfo minfo = (MethodInfo)list.get(i);"], [189, "                minfo.setSuperclass(superclass);"], [190, "            }"], [192, "        catch (BadBytecode e) {"], [193, "            throw new CannotCompileException(e);"]], "deleted": [[174, "     * <p>Unless the old super class is"], [175, "     * <code>java.lang.Object</code>, this method substitutes the new name"], [176, "     * for all occurrences of the old class name in the class file."], [177, "     * If the old super class is <code>java.lang.Object</code>,"], [178, "     * only the calls to a super constructor are modified."], [183, "        if (constPool.getClassInfo(superClass).equals(\"java.lang.Object\")) {"], [184, "            if (superclass != null)"], [185, "                try {"], [186, "                    superClass = constPool.addClassInfo(superclass);"], [187, "                    setSuperclass2(superclass);"], [188, "                }"], [189, "                catch (BadBytecode e) {"], [190, "                    throw new CannotCompileException(e);"], [191, "                }"], [192, "        }"], [193, "        else {"], [194, "            if (superclass == null)"], [195, "                superclass = \"java.lang.Object\";"], [197, "            renameClass(constPool.getClassInfo(superClass), superclass);"], [199, "    }"], [200, ""], [201, "    /* If the original super class is java.lang.Object, a special"], [202, "     * treatment is needed.  Some occurrences of java.lang.Object"], [203, "     * in the class file should not be changed into the new super"], [204, "     * class name.  For example, the call of Vector.addElement(Object)"], [205, "     * should not be changed into the call of Vector.addElement(X),"], [206, "     * where X is the new super class."], [207, "     */"], [208, "    private void setSuperclass2(String superclass) throws BadBytecode {"], [209, "        LinkedList list = methods;"], [210, "        int n = list.size();"], [211, "        for (int i = 0; i < n; ++i) {"], [212, "            MethodInfo minfo = (MethodInfo)list.get(i);"], [213, "            minfo.setSuperclass(superclass);"]]}, "num_lines_added": 14, "num_lines_removed": 34}