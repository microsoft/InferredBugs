{"hash": "40237df89cde8a9c778c5f427e1b3cde8282935a", "message": "Don't lazy-load in PermissibleBase. This'll be a performance hit, but it's causing subscription issues.", "file_num_lines": 194, "diff_parsed": {"added": [[29, "        recalculatePermissions();"], [152, "        clearPermissions();"], [153, "        Set<Permission> defaults = Bukkit.getServer().getPluginManager().getDefaultPermissions(isOp());"], [154, "        Bukkit.getServer().getPluginManager().subscribeToDefaultPerms(isOp(), parent);"], [156, "        for (Permission perm : defaults) {"], [157, "            String name = perm.getName().toLowerCase();"], [158, "            permissions.put(name, new PermissionAttachmentInfo(parent, name, null, true));"], [159, "            Bukkit.getServer().getPluginManager().subscribeToPermission(name, parent);"], [160, "            calculateChildPermissions(perm.getChildren(), false, null);"], [161, "        }"], [163, "        for (PermissionAttachment attachment : attachments) {"], [164, "            calculateChildPermissions(attachment.getPermissions(), false, attachment);"], [175, "        Bukkit.getServer().getPluginManager().unsubscribeFromDefaultPerms(false, parent);"], [176, "        Bukkit.getServer().getPluginManager().unsubscribeFromDefaultPerms(true, parent);"]], "deleted": [[21, "    private boolean dirtyPermissions = true;"], [30, "        calculatePermissions();"], [54, "        calculatePermissions();"], [55, ""], [72, "        calculatePermissions();"], [73, ""], [94, "        calculatePermissions();"], [95, ""], [159, "        dirtyPermissions = true;"], [160, "    }"], [162, "    public synchronized void calculatePermissions() {"], [163, "        if (dirtyPermissions) {"], [164, "            clearPermissions();"], [165, "            Set<Permission> defaults = Bukkit.getServer().getPluginManager().getDefaultPermissions(isOp());"], [166, "            Bukkit.getServer().getPluginManager().subscribeToDefaultPerms(isOp(), parent);"], [167, ""], [168, "            for (Permission perm : defaults) {"], [169, "                String name = perm.getName().toLowerCase();"], [170, "                permissions.put(name, new PermissionAttachmentInfo(parent, name, null, true));"], [171, "                Bukkit.getServer().getPluginManager().subscribeToPermission(name, parent);"], [172, "                calculateChildPermissions(perm.getChildren(), false, null);"], [173, "            }"], [174, ""], [175, "            for (PermissionAttachment attachment : attachments) {"], [176, "                calculateChildPermissions(attachment.getPermissions(), false, attachment);"], [177, "            }"], [179, "            dirtyPermissions = false;"], [190, "        Bukkit.getServer().getPluginManager().unsubscribeFromDefaultPerms(isOp(), parent);"], [249, "        calculatePermissions();"]]}, "num_lines_added": 14, "num_lines_removed": 29}