{"hash": "bd9b8ff55e634294ec7f7cc3e106dc02f3be5d50", "message": "Adding JOhm support for Array Persistence. Also including some minor performance tweaks and null safety checks.", "file_num_lines": 159, "diff_parsed": {"added": [[62, "        if (element != null) {"], [63, "            try {"], [64, "                Field byField = element.getClass()"], [65, "                        .getDeclaredField(byFieldName);"], [66, "                byField.setAccessible(true);"], [67, "                Object fieldValue = byField.get(element);"], [68, "                if (fieldValue == null) {"], [69, "                    fieldValue = 0f;"], [70, "                }"], [71, "                success = nest.cat(JOhmUtils.getId(owner)).cat(field.getName())"], [72, "                        .zadd(Float.class.cast(fieldValue),"], [73, "                                JOhmUtils.getId(element).toString()) > 0;"], [74, "                indexValue(element);"], [75, "            } catch (SecurityException e) {"], [76, "                throw new JOhmException(e);"], [77, "            } catch (IllegalArgumentException e) {"], [78, "                throw new JOhmException(e);"], [79, "            } catch (IllegalAccessException e) {"], [80, "                throw new JOhmException(e);"], [81, "            } catch (NoSuchFieldException e) {"], [82, "                throw new JOhmException(e);"], [89, "        boolean success = false;"], [90, "        if (element != null) {"], [91, "            success = nest.cat(JOhmUtils.getId(owner)).cat(field.getName())"], [92, "                    .srem(JOhmUtils.getId(element).toString()) > 0;"], [93, "            unindexValue(element);"], [94, "        }"]], "deleted": [[62, "        try {"], [63, "            Field byField = element.getClass().getDeclaredField(byFieldName);"], [64, "            byField.setAccessible(true);"], [65, "            Object fieldValue = byField.get(element);"], [66, "            if (fieldValue == null) {"], [67, "                fieldValue = 0f;"], [69, "            success = nest.cat(JOhmUtils.getId(owner)).cat(field.getName())"], [70, "                    .zadd(Float.class.cast(fieldValue),"], [71, "                            JOhmUtils.getId(element).toString()) > 0;"], [72, "            indexValue(element);"], [73, "        } catch (SecurityException e) {"], [74, "            throw new JOhmException(e);"], [75, "        } catch (IllegalArgumentException e) {"], [76, "            throw new JOhmException(e);"], [77, "        } catch (IllegalAccessException e) {"], [78, "            throw new JOhmException(e);"], [79, "        } catch (NoSuchFieldException e) {"], [80, "            throw new JOhmException(e);"], [86, "        boolean success = nest.cat(JOhmUtils.getId(owner)).cat(field.getName())"], [87, "                .srem(JOhmUtils.getId(element).toString()) > 0;"], [88, "        unindexValue(element);"]]}, "num_lines_added": 27, "num_lines_removed": 21}