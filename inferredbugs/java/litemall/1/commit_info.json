{"hash": "cd9470c74091d0f6e242e7bc4d0758dc0caed6fa", "message": "\u6dfb\u52a0\u9000\u6b3e\u901a\u77e5\u7528\u6237\uff0c\u9000\u6b3e\u7533\u8bf7\u901a\u77e5\u7ba1\u7406\u5458\uff0c\u53d1\u8d27\u901a\u77e5\u7528\u6237\n\u4fee\u590dAdminOrder\u53c2\u6570\u5904\u7406\u7c7b\u578b\u9519\u8bef", "file_num_lines": 193, "diff_parsed": {"added": [[6, "import org.linlinjava.litemall.core.notify.LitemallNotifyService;"], [7, "import org.linlinjava.litemall.core.notify.util.ConfigUtil;"], [48, "    @Autowired"], [49, "    private LitemallNotifyService litemallNotifyService;"], [50, ""], [53, "                       Integer userId, String orderSn, @RequestParam(required = false, value = \"orderStatusArray[]\") List<Short> orderStatusArray,"], [56, "                       String sort, String order) {"], [57, "        if (adminId == null) {"], [60, "        List<LitemallOrder> orderList = orderService.querySelective(userId, orderSn, orderStatusArray, page, limit, sort, order);"], [72, "        if (adminId == null) {"], [94, "     * @param body    \u8ba2\u5355\u4fe1\u606f\uff0c{ orderId\uff1axxx }"], [105, "        String refundMoney = JacksonUtil.parseString(body, \"refundMoney\");"], [115, "        if (order.getActualPrice().compareTo(new BigDecimal(refundMoney)) != 0) {"], [147, ""], [148, "        //TODO \u53d1\u9001\u90ae\u4ef6\u548c\u77ed\u4fe1\u901a\u77e5\uff0c\u8fd9\u91cc\u91c7\u7528\u5f02\u6b65\u53d1\u9001"], [149, "        // \u9000\u6b3e\u6210\u529f\u901a\u77e5\u7528\u6237"], [150, "        /**"], [151, "         *"], [152, "         * \u60a8\u7533\u8bf7\u7684\u8ba2\u5355\u9000\u6b3e [ \u5355\u53f7:{1} ] \u5df2\u6210\u529f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5230\u8d26\u3002"], [153, "         * \u6ce8\u610f\u8ba2\u5355\u53f7\u53ea\u53d1\u540e6\u4f4d"], [154, "         *"], [155, "         */"], [156, "        litemallNotifyService.notifySMSTemplate(order.getMobile(), ConfigUtil.NotifyType.REFUND, new String[]{order.getOrderSn().substring(8, 14)});"], [157, ""], [158, ""], [170, "     * @param body    \u8ba2\u5355\u4fe1\u606f\uff0c{ orderId\uff1axxx, shipSn: xxx, shipChannel: xxx }"], [203, "        //TODO \u53d1\u9001\u90ae\u4ef6\u548c\u77ed\u4fe1\u901a\u77e5\uff0c\u8fd9\u91cc\u91c7\u7528\u5f02\u6b65\u53d1\u9001"], [204, "        // \u53d1\u8d27\u4f1a\u53d1\u9001\u901a\u77e5\u77ed\u4fe1\u7ed9\u7528\u6237"], [205, "        /**"], [206, "         *"], [207, "         * \u60a8\u7684\u8ba2\u5355\u5df2\u7ecf\u53d1\u8d27\uff0c\u5feb\u9012\u516c\u53f8 {1}\uff0c\u5feb\u9012\u5355 {2} \uff0c\u8bf7\u6ce8\u610f\u67e5\u6536"], [208, "         *"], [209, "         */"], [210, "        litemallNotifyService.notifySMSTemplate(order.getMobile(), ConfigUtil.NotifyType.SHIP, new String[]{shipChannel, shipSn});"], [211, ""], [217, "     * <p>"], [220, "     * <p>"], [225, "    @Scheduled(fixedDelay = 30 * 60 * 1000)"], [230, "        for (LitemallOrder order : orderList) {"], [234, "            if (expired.isAfter(now)) {"], [268, "     * <p>"], [271, "     * <p>"], [276, "     * <p>"], [288, "        for (LitemallOrder order : orderList) {"], [292, "            if (expired.isAfter(now)) {"]], "deleted": [[48, "                       Integer userId, String orderSn, @RequestParam(required = false, value = \"orderStatusArray[]\")List<Short> orderStatusArray,"], [51, "                       String sort, String order){"], [52, "        if(adminId == null){"], [55, "        List<LitemallOrder> orderList = orderService.querySelective(userId, orderSn,orderStatusArray, page, limit, sort, order);"], [67, "        if(adminId == null){"], [89, "     * @param body   \u8ba2\u5355\u4fe1\u606f\uff0c{ orderId\uff1axxx }"], [100, "        Integer refundMoney = JacksonUtil.parseInteger(body, \"refundMoney\");"], [110, "        if(order.getActualPrice().compareTo(new BigDecimal(refundMoney)) != 0){"], [153, "     * @param body   \u8ba2\u5355\u4fe1\u606f\uff0c{ orderId\uff1axxx, shipSn: xxx, shipChannel: xxx }"], [191, "     *"], [194, "     *"], [199, "    @Scheduled(fixedDelay = 30*60*1000)"], [204, "        for(LitemallOrder order : orderList){"], [208, "            if(expired.isAfter(now)){"], [242, "     *"], [245, "     *"], [250, "     *"], [262, "        for(LitemallOrder order : orderList){"], [266, "            if(expired.isAfter(now)){"]]}, "num_lines_added": 45, "num_lines_removed": 19}