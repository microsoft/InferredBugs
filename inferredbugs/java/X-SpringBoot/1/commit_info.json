{"hash": "e6d49788f782ee7f03c01dc24de7ab1af78df7b9", "message": "fix bug", "file_num_lines": 45, "diff_parsed": {"added": [[6, "import com.suke.czx.authentication.detail.CustomUserDetailsUser;"], [41, "        Long userId = 0l;"], [45, "            userId = userDetailsUser.getUserId();"], [49, "        redisTemplate.opsForValue().set(Constant.AUTHENTICATION_TOKEN + token,token,Constant.TOKEN_EXPIRE, TimeUnit.SECONDS);"], [50, "        redisTemplate.opsForValue().set(token,userId,Constant.TOKEN_EXPIRE, TimeUnit.SECONDS);"]], "deleted": [[8, "import com.suke.czx.authentication.detail.CustomUserDetailsUser;"], [9, "import com.suke.czx.common.serialization.RedisTokenStoreSerializationStrategy;"], [13, "import org.springframework.data.redis.connection.RedisConnection;"], [37, "    @Autowired"], [38, "    private RedisTokenStoreSerializationStrategy redisTokenStoreSerializationStrategy;"], [39, ""], [52, "        redisTemplate.opsForValue().set(Constant.AUTHENTICATION_TOKEN,token,Constant.TOKEN_EXPIRE, TimeUnit.SECONDS);"], [53, "        byte[] authenticationKey = redisTokenStoreSerializationStrategy.serialize(token);"], [54, "        byte[] authenticationValue = redisTokenStoreSerializationStrategy.serialize(authentication);"], [55, "        RedisConnection conn = redisTemplate.getConnectionFactory().getConnection();"], [56, "        try{"], [57, "            conn.openPipeline();"], [58, "            conn.set(authenticationKey, authenticationValue);"], [59, "            conn.closePipeline();"], [60, "        }finally {"], [61, "            conn.close();"], [62, "        }"]]}, "num_lines_added": 5, "num_lines_removed": 17}