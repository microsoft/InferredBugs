{"hash": "7e207879bec97472777bce1fb1bcfced72c607c8", "message": "Add support of link and symlink in Maven", "file_num_lines": 396, "diff_parsed": {"added": [[43, "import org.apache.commons.compress.archivers.tar.TarArchiveEntry;"], [44, "import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;"], [306, "        final TarArchiveOutputStream outputStream = new TarArchiveOutputStream(new GZIPOutputStream(new FileOutputStream(pOutput)));"], [307, "        outputStream.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);"], [329, "            final TarArchiveEntry entry = new TarArchiveEntry(file);"], [384, "                outputStream.putArchiveEntry(entry);"], [386, "                outputStream.closeArchiveEntry();"], [437, "        final TarArchiveOutputStream tarOutputStream = new TarArchiveOutputStream(compressedOutputStream(pCompression, new FileOutputStream(pOutput)));"], [438, "        tarOutputStream.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);"], [464, "                final TarArchiveEntry entry = new TarArchiveEntry(filename, true);"], [474, "                tarOutputStream.putArchiveEntry(entry);"], [483, "                tarOutputStream.closeArchiveEntry();"], [502, "            public void onEachLink(String path, String linkName, boolean symlink, String user, int uid, String group, int gid) throws IOException {"], [503, "                path = fixPath(path);"], [504, ""], [505, "                createParentDirectories((new File(path)).getParent(), user, uid, group, gid);"], [506, ""], [507, "                final TarArchiveEntry entry = new TarArchiveEntry(path, symlink ? TarArchiveEntry.LF_SYMLINK : TarArchiveEntry.LF_LINK);"], [508, "                // Required to avoid loosing leading slash. See https://issues.apache.org/jira/browse/COMPRESS-201."], [509, "                entry.setName(path);"], [510, ""], [511, "                entry.setLinkName(linkName);"], [512, ""], [513, "                tarOutputStream.putArchiveEntry(entry);"], [514, "                tarOutputStream.closeArchiveEntry();"], [515, "            }"], [516, ""], [543, "                    TarArchiveEntry entry = new TarArchiveEntry(directory, true);"], [551, "                    tarOutputStream.putArchiveEntry(entry);"], [552, "                    tarOutputStream.closeArchiveEntry();"], [590, "                    int mode = TarArchiveEntry.DEFAULT_DIR_MODE;"], [611, "    private static void addEntry( final String pName, final String pContent, final TarArchiveOutputStream pOutput ) throws IOException {"], [614, "        final TarArchiveEntry entry = new TarArchiveEntry(\"./\" + pName, true);"], [618, "        pOutput.putArchiveEntry(entry);"], [620, "        pOutput.closeArchiveEntry();"], [623, "    private static void addControlEntry( final String pName, final String pContent, final TarArchiveOutputStream pOutput ) throws IOException {"], [626, "        final TarArchiveEntry entry = new TarArchiveEntry(\"./\" + pName, true);"], [631, "        pOutput.putArchiveEntry(entry);"], [633, "        pOutput.closeArchiveEntry();"]], "deleted": [[47, "import org.apache.tools.tar.TarEntry;"], [48, "import org.apache.tools.tar.TarOutputStream;"], [306, "        final TarOutputStream outputStream = new TarOutputStream(new GZIPOutputStream(new FileOutputStream(pOutput)));"], [307, "        outputStream.setLongFileMode(TarOutputStream.LONGFILE_GNU);"], [329, "            final TarEntry entry = new TarEntry(file);"], [384, "                outputStream.putNextEntry(entry);"], [386, "                outputStream.closeEntry();"], [437, "        final TarOutputStream tarOutputStream = new TarOutputStream(compressedOutputStream(pCompression, new FileOutputStream(pOutput)));"], [438, "        tarOutputStream.setLongFileMode(TarOutputStream.LONGFILE_GNU);"], [464, "                final TarEntry entry = new TarEntry(filename);"], [474, "                tarOutputStream.putNextEntry(entry);"], [483, "                tarOutputStream.closeEntry();"], [528, "                    TarEntry entry = new TarEntry(directory);"], [536, "                    tarOutputStream.putNextEntry(entry);"], [537, "                    tarOutputStream.closeEntry();"], [575, "                    int mode = TarEntry.DEFAULT_DIR_MODE;"], [596, "    private static void addEntry( final String pName, final String pContent, final TarOutputStream pOutput ) throws IOException {"], [599, "        final TarEntry entry = new TarEntry(\"./\" + pName);"], [603, "        pOutput.putNextEntry(entry);"], [605, "        pOutput.closeEntry();"], [608, "    private static void addControlEntry( final String pName, final String pContent, final TarOutputStream pOutput ) throws IOException {"], [611, "        final TarEntry entry = new TarEntry(\"./\" + pName);"], [616, "        pOutput.putNextEntry(entry);"], [618, "        pOutput.closeEntry();"]]}, "num_lines_added": 39, "num_lines_removed": 24}