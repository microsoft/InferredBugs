{"hash": "eb41bcfcba7f7495b5aae65da28818b0fbd69268", "message": "KiKa\n\tge\u00e4ndert:   dist/MediathekView.jar\n\tge\u00e4ndert:   src/mediathek/controller/filmeLaden/suchen/sender/MediathekKika.java\n\tge\u00e4ndert:   src/version.properties", "file_num_lines": 212, "diff_parsed": {"added": [[26, "import mediathek.tool.GuiFunktionen;"], [35, "    private MVStringBuilder seite = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [36, "    LinkedListUrl listeThemenHttp = new LinkedListUrl();"], [42, "//    @Override"], [43, "//    synchronized void meldungThreadUndFertig() {"], [44, "//        if (threads <= 1) {"], [45, "//            // vorher noch laufen"], [46, "//            addToListHttp();"], [47, "//        }"], [48, "//        super.meldungThreadUndFertig();"], [49, "//    }"], [51, "    void addToList() {"], [52, "        meldungStart();"], [53, "        addToListNormal();"], [54, "        addToListHttp();"], [55, "        if (Daten.filmeLaden.getStop()) {"], [56, "            meldungThreadUndFertig();"], [57, "        } else if (listeThemen.size() == 0 && listeThemenHttp.size() == 0) {"], [58, "            meldungThreadUndFertig();"], [60, "            listeSort(listeThemen, 1);"], [61, "            listeSort(listeThemenHttp, 1);"], [62, "            meldungAddMax(listeThemen.size() + listeThemenHttp.size());"], [63, "            for (int t = 0; t < maxThreadLaufen; ++t) {"], [64, "                //new Thread(new ThemaLaden()).start();"], [65, "                Thread th = new Thread(new ThemaLaden());"], [66, "                th.setName(nameSenderMReader + t);"], [67, "                th.start();"], [68, "            }"], [69, ""], [73, "    void addToListNormal() {"], [82, "        seite = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [108, "                        if (!url.equals(\"\") && !url.startsWith(\"http://\") && !url.startsWith(\"/\")) {"], [109, "                            // Datum"], [151, "        listeThemenHttp.clear();"], [152, "        seite = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [182, "                            // in die Liste eintragen"], [183, "                            String[] add = new String[]{url, thema, alter};"], [184, "                            listeThemenHttp.addUrl(add);"], [192, "    private class ThemaLaden implements Runnable {"], [193, ""], [194, "        GetUrl getUrl = new GetUrl(wartenSeiteLaden);"], [195, "        private MVStringBuilder seite1 = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [196, ""], [197, "        @Override"], [198, "        public synchronized void run() {"], [199, "            try {"], [200, "                meldungAddThread();"], [201, "                String[] link;"], [202, "                while (!Daten.filmeLaden.getStop() && (link = listeThemen.getListeThemen()) != null) {"], [203, "                    meldungProgress(link[0]);"], [204, "                    laden(link[0] /* url */, link[1] /* Thema */, link[2] /* Titel */, link[3] /*Datum*/);"], [205, "                }"], [206, "                while (!Daten.filmeLaden.getStop() && (link = listeThemenHttp.getListeThemen()) != null) {"], [207, "                    meldungProgress(link[0]);"], [208, "                    ladenHttp(link[0] /* url */, link[1] /* Thema */, link[2] /* alter */);"], [209, "                }"], [210, "            } catch (Exception ex) {"], [211, "                Log.fehlerMeldung(-987452384, Log.FEHLER_ART_MREADER, \"Mediathek3Sat.ThemaLaden.run\", ex, \"\");"], [212, "            }"], [213, "            meldungThreadUndFertig();"], [215, ""], [216, "        void laden(String filmWebsite, String thema, String titel, String datum) {"], [217, "            //so.addVariable(\"pfad\",\"rtmp://88.198.74.226/vod/mp4:1348908081-7b8b1356b478db154fdbf8bf6a01fc1f.mp4\");"], [218, "            //so.addVariable(\"fullscreenPfad\", \"rtmp://88.198.74.226/vod/mp4:1348908081-7b8b1356b478db154fdbf8bf6a01fc1f-01.mp4\");"], [219, "            //xajax.config.requestURI = \"http://kikaplus.net/clients/kika/kikaplus/?programm=270&id=33172&ag=5\";"], [220, "            final String MUSTER_URL_1 = \"so.addVariable(\\\"fullscreenPfad\\\", \\\"\";"], [221, "            final String MUSTER_URL_2 = \"so.addVariable(\\\"pfad\\\", \\\"\";"], [222, "            final String MUSTER_ID = \"xajax.config.requestURI = \\\"\";"], [223, "            seite1 = getUrlIo.getUri(nameSenderMReader, filmWebsite, Konstanten.KODIERUNG_UTF, 1, seite1, thema + \" \" + titel);"], [224, "            String id;"], [225, "            String urlFilm = \"\";"], [226, "            id = seite1.extract(MUSTER_ID, \"\\\"\");"], [227, "            urlFilm = seite1.extract(MUSTER_URL_1, \"\\\"\");"], [228, "            if (urlFilm.isEmpty()) {"], [229, "                urlFilm = seite1.extract(MUSTER_URL_2, \"\\\"\");"], [230, "            }"], [233, "                addFilm(new DatenFilm(nameSenderMReader, thema, filmWebsite, titel, urlFilm, \"-r \" + urlFilm + \" --flashVer WIN11,4,402,265\"/* urlRtmp */,"], [234, "                        datum/*datum*/, \"\"/*zeit*/, 0, \"\", \"\", \"\", new String[]{\"\"}));"], [235, "            } else {"], [236, "                Log.fehlerMeldung(-912036789, Log.FEHLER_ART_MREADER, \"MediathekKika\", \"keine URL: \" + filmWebsite);"], [237, "            }"], [238, "        }"], [239, ""], [240, "        void ladenHttp(String filmWebsite, String thema, String alter) {"], [241, "            // erst die Nummer suchen"], [242, "            // >25420<4<165<23. Die b"], [243, "            // <http://www.kikaplus.net/clients/kika/mediathek/previewpic/1355302530-f80b463888fd4602d925b2ef2c861928 9.jpg<"], [244, "            final String MUSTER_BILD = \"<http://www.\";"], [245, "            seite1 = getUrlIo.getUri(nameSenderMReader, filmWebsite, Konstanten.KODIERUNG_UTF, 1, seite1, thema);"], [246, "            String nummer, url, bild, urlFilm, titel;"], [247, "            nummer = seite1.extract(\">\", \"<\");"], [248, "            bild = seite1.extract(MUSTER_BILD, \"<\");"], [249, "            if (!bild.isEmpty()) {"], [250, "                bild = \"http://www.\" + bild;"], [251, "            }"], [252, "            // die URL bauen:"], [253, "            // http://www.kikaplus.net/clients/kika/kikaplus/hbbtv/index.php?cmd=video&age=10&id=25420&page=az"], [254, "            if (!nummer.isEmpty()) {"], [255, "                url = \"http://www.kikaplus.net/clients/kika/kikaplus/hbbtv/index.php?cmd=video&age=\" + alter + \"&id=\" + nummer + \"&page=az\";"], [256, "                seite1 = getUrlIo.getUri(nameSenderMReader, url, Konstanten.KODIERUNG_UTF, 1, seite1, thema);"], [257, "                final String MUSTER_URL = \"var videofile = \\\"\";"], [258, "                final String MUSTER_TITEL = \"var videotitle = \\\"\";"], [259, "                urlFilm = seite1.extract(MUSTER_URL, \"\\\"\");"], [260, "                titel = seite1.extract(MUSTER_TITEL, \"\\\"\");"], [261, "                if (!urlFilm.equals(\"\")) {"], [262, "                    meldung(urlFilm);"], [263, "                    // DatenFilm(String ssender, String tthema, String filmWebsite, String ttitel, String uurl, String uurlRtmp,"], [264, "                    //     String datum, String zeit,"], [265, "                    //     long dauerSekunden, String description, String thumbnailUrl, String imageUrl, String[] keywords) {"], [266, "                    DatenFilm film = null;"], [267, "                    thema = GuiFunktionen.utf8(thema);"], [268, "                    titel = GuiFunktionen.utf8(titel);"], [269, "                    if ((film = istInFilmListe(nameSenderMReader, thema, titel)) != null) {"], [270, "                        film.addUrlKlein(urlFilm, \"\");"], [271, "                    } else {"], [272, "                        // dann gibs ihn noch nicht"], [273, "                        addFilm(new DatenFilm(nameSenderMReader, thema, \"http://www.kika.de/fernsehen/mediathek/index.shtml\", titel, urlFilm, \"\"/* urlRtmp */,"], [274, "                                \"\"/*datum*/, \"\"/*zeit*/,"], [275, "                                0, \"\", bild, \"\", new String[]{\"\"}));"], [276, "                    }"], [278, "                    Log.fehlerMeldung(-915263078, Log.FEHLER_ART_MREADER, \"MediathekKika\", \"keine URL: \" + filmWebsite);"]], "deleted": [[34, "    private MVStringBuilder seiteHttp = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [41, "    synchronized void meldungThreadUndFertig() {"], [42, "        if (threads <= 1) {"], [43, "            // vorher noch laufen"], [44, "            addToListHttp();"], [45, "        }"], [46, "        --threads;"], [47, "        if (threads <= 0) {"], [48, "            //wird erst ausgef\u00fchrt wenn alle Threads beendet sind"], [49, "            suchen.meldenFertig(nameSenderMReader);"], [51, "            // l\u00e4uft noch was"], [52, "            suchen.melden(nameSenderMReader, max, progress, \"\" /* text */);"], [56, "    @Override"], [57, "    void addToList() {"], [66, "        MVStringBuilder seite = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [67, "        meldungStart();"], [93, "                        if (!url.equals(\"\") && !url.startsWith(\"http://\") && !url.startsWith(\"/\")) {                            // Datum"], [124, "        if (Daten.filmeLaden.getStop()) {"], [125, "            meldungThreadUndFertig();"], [126, "        } else if (listeThemen.size() == 0) {"], [127, "            meldungThreadUndFertig();"], [128, "        } else {"], [129, "            listeSort(listeThemen, 1);"], [130, "            meldungAddMax(listeThemen.size());"], [131, "            for (int t = 0; t < maxThreadLaufen; ++t) {"], [132, "                //new Thread(new ThemaLaden()).start();"], [133, "                Thread th = new Thread(new ThemaLaden());"], [134, "                th.setName(nameSenderMReader + t);"], [135, "                th.start();"], [136, "            }"], [137, ""], [138, "        }"], [139, "    }"], [140, ""], [141, "    private class ThemaLaden implements Runnable {"], [142, ""], [143, "        GetUrl getUrl = new GetUrl(wartenSeiteLaden);"], [144, "        private MVStringBuilder seite1 = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [145, ""], [146, "        @Override"], [147, "        public synchronized void run() {"], [148, "            try {"], [149, "                meldungAddThread();"], [150, "                String[] link;"], [151, "                while (!Daten.filmeLaden.getStop() && (link = listeThemen.getListeThemen()) != null) {"], [152, "                    meldungProgress(link[0]);"], [153, "                    laden(link[0] /* url */, link[1] /* Thema */, link[2] /* Titel */, link[3] /*Datum*/);"], [154, "                }"], [155, "            } catch (Exception ex) {"], [156, "                Log.fehlerMeldung(-987452384, Log.FEHLER_ART_MREADER, \"Mediathek3Sat.ThemaLaden.run\", ex, \"\");"], [157, "            }"], [158, "            meldungThreadUndFertig();"], [159, "        }"], [160, ""], [161, "        void laden(String filmWebsite, String thema, String titel, String datum) {"], [162, "            //so.addVariable(\"pfad\",\"rtmp://88.198.74.226/vod/mp4:1348908081-7b8b1356b478db154fdbf8bf6a01fc1f.mp4\");"], [163, "            //so.addVariable(\"fullscreenPfad\", \"rtmp://88.198.74.226/vod/mp4:1348908081-7b8b1356b478db154fdbf8bf6a01fc1f-01.mp4\");"], [164, "            //xajax.config.requestURI = \"http://kikaplus.net/clients/kika/kikaplus/?programm=270&id=33172&ag=5\";"], [165, "            final String MUSTER_URL_1 = \"so.addVariable(\\\"pfad\\\",\\\"\";"], [166, "            final String MUSTER_URL_2 = \"so.addVariable(\\\"fullscreenPfad\\\", \\\"\";"], [167, "            final String MUSTER_ID = \"xajax.config.requestURI = \\\"\";"], [168, "            seite1 = getUrlIo.getUri(nameSenderMReader, filmWebsite, Konstanten.KODIERUNG_UTF, 1, seite1, thema + \" \" + titel);"], [169, "            int pos1, pos2;"], [170, "            String id;"], [171, "            String urlFilm = \"\";"], [172, "            id = seite1.extract(MUSTER_ID, \"\\\"\");"], [173, "            if ((pos1 = seite1.indexOf(MUSTER_URL_2)) != -1) {"], [174, "                pos1 += MUSTER_URL_2.length();"], [175, "                if ((pos2 = seite1.indexOf(\"\\\"\", pos1)) != -1) {"], [176, "                    urlFilm = seite1.substring(pos1, pos2);"], [177, "                }"], [178, "            }"], [179, "            if (urlFilm.equals(\"\")) {"], [180, "                if ((pos1 = seite1.indexOf(MUSTER_URL_1)) != -1) {"], [181, "                    pos1 += MUSTER_URL_1.length();"], [182, "                    if ((pos2 = seite1.indexOf(\"\\\"\", pos1)) != -1) {"], [183, "                        urlFilm = seite1.substring(pos1, pos2);"], [184, "                    }"], [185, "                }"], [186, "            }"], [187, "            if (!urlFilm.equals(\"\")) {"], [188, "                meldung(urlFilm);"], [189, "                addFilm(new DatenFilm(nameSenderMReader, thema, filmWebsite, titel, urlFilm, \"-r \" + urlFilm + \" --flashVer WIN11,4,402,265\"/* urlRtmp */,"], [190, "                        datum/*datum*/, \"\"/*zeit*/, 0, \"\", \"\", \"\", new String[]{\"\"}));"], [191, "            }"], [192, "        }"], [204, "//        listeThemen.clear();"], [205, "        MVStringBuilder seite = new MVStringBuilder(Konstanten.STRING_BUFFER_START_BUFFER);"], [206, "        meldungStart();"], [236, "                            ladenHttp(url, thema, alter);"], [244, "    void ladenHttp(String filmWebsite, String thema, String alter) {"], [245, "        // erst die Nummer suchen"], [246, "        // >25420<4<165<23. Die b"], [247, "        // <http://www.kikaplus.net/clients/kika/mediathek/previewpic/1355302530-f80b463888fd4602d925b2ef2c861928 9.jpg<"], [248, "        final String MUSTER_BILD = \"<http://www.\";"], [249, "        seiteHttp = getUrlIo.getUri(nameSenderMReader, filmWebsite, Konstanten.KODIERUNG_UTF, 1, seiteHttp, thema);"], [250, "        String nummer, url, bild, urlFilm, titel;"], [251, "        nummer = seiteHttp.extract(\">\", \"<\");"], [252, "        bild = seiteHttp.extract(MUSTER_BILD, \"<\");"], [253, "        if (!bild.isEmpty()) {"], [254, "            bild = \"http://www.\" + bild;"], [256, "        // die URL bauen:"], [257, "        // http://www.kikaplus.net/clients/kika/kikaplus/hbbtv/index.php?cmd=video&age=10&id=25420&page=az"], [258, "        if (!nummer.isEmpty()) {"], [259, "            url = \"http://www.kikaplus.net/clients/kika/kikaplus/hbbtv/index.php?cmd=video&age=\" + alter + \"&id=\" + nummer + \"&page=az\";"], [260, "            seiteHttp = getUrlIo.getUri(nameSenderMReader, url, Konstanten.KODIERUNG_UTF, 1, seiteHttp, thema);"], [261, "            final String MUSTER_URL = \"var videofile = \\\"\";"], [262, "            final String MUSTER_TITEL = \"var videotitle = \\\"\";"], [263, "            urlFilm = seiteHttp.extract(MUSTER_URL, \"\\\"\");"], [264, "            titel = seiteHttp.extract(MUSTER_TITEL, \"\\\"\");"], [267, "                // DatenFilm(String ssender, String tthema, String filmWebsite, String ttitel, String uurl, String uurlRtmp,"], [268, "                //     String datum, String zeit,"], [269, "                //     long dauerSekunden, String description, String thumbnailUrl, String imageUrl, String[] keywords) {"], [270, "                DatenFilm film = null;"], [271, "                if ((film = istInFilmListe(nameSenderMReader, thema, titel)) != null) {"], [272, "                    film.addUrlKlein(urlFilm, \"\");"], [274, "                    // dann gibs ihn noch nicht"], [275, "                    addFilm(new DatenFilm(nameSenderMReader, thema, \"http://www.kika.de/fernsehen/mediathek/index.shtml\", titel, urlFilm, \"\"/* urlRtmp */,"], [276, "                            \"\"/*datum*/, \"\"/*zeit*/,"], [277, "                            0, \"\", bild, \"\", new String[]{\"\"}));"], [279, "            } else {"], [280, "                Log.fehlerMeldung(-915263078, Log.FEHLER_ART_MREADER, \"MediathekKika\", \"keine URL: \" + filmWebsite);"]]}, "num_lines_added": 121, "num_lines_removed": 122}