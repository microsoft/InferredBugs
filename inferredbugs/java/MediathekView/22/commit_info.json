{"hash": "b96359ab3d071b6bb3606bb3302c2571aae19cd3", "message": "Datum Filmliste in GMT", "file_num_lines": 339, "diff_parsed": {"added": [[30, "import java.util.SimpleTimeZone;"], [31, "import java.util.TimeZone;"], [40, "import mediathek.tool.Funktionen;"], [42, "import mediathek.tool.Konstanten;"], [66, "    private final String DATUM_ZEIT_FORMAT = \"dd.MM.yyyy, HH:mm\";"], [328, "    public String erstellt() {"], [329, "        // Tag, Zeit in lokaler Zeit wann die Filmliste erstellt wurde"], [330, "        String ret;"], [331, "        SimpleDateFormat sdf = new SimpleDateFormat(DATUM_ZEIT_FORMAT);"], [332, "        String date;"], [333, "        if (metaDaten[ListeFilme.FILMLISTE_DATUM_GMT_NR].equals(\"\")) {"], [334, "            // noch eine alte Filmliste"], [335, "            ret = metaDaten[ListeFilme.FILMLISTE_DATUM_NR];"], [336, "        } else {"], [337, "            date = metaDaten[ListeFilme.FILMLISTE_DATUM_GMT_NR];"], [338, "            sdf.setTimeZone(new SimpleTimeZone(SimpleTimeZone.UTC_TIME, \"UTC\"));"], [339, "            Date filmDate = null;"], [340, "            try {"], [341, "                filmDate = sdf.parse(date);"], [342, "            } catch (ParseException ex) {"], [343, "            }"], [344, "            if (filmDate == null) {"], [345, "                ret = metaDaten[ListeFilme.FILMLISTE_DATUM_GMT_NR];"], [346, "            } else {"], [347, "                SimpleDateFormat formatter = new SimpleDateFormat(DATUM_ZEIT_FORMAT);"], [348, "                ret = formatter.format(filmDate);"], [349, "            }"], [350, "        }"], [351, "        return ret;"], [352, "    }"], [353, ""], [358, "        SimpleDateFormat sdf = new SimpleDateFormat(DATUM_ZEIT_FORMAT);"], [359, "        String date;"], [360, "        if (!metaDaten[ListeFilme.FILMLISTE_DATUM_GMT_NR].equals(\"\")) {"], [361, "            date = metaDaten[ListeFilme.FILMLISTE_DATUM_GMT_NR];"], [362, "            sdf.setTimeZone(new SimpleTimeZone(SimpleTimeZone.UTC_TIME, \"UTC\"));"], [363, "        } else {"], [364, "            date = metaDaten[ListeFilme.FILMLISTE_DATUM_NR];"], [365, "        }"], [381, "        // Filmliste ist \u00e4lter als: FilmeLaden.ALTER_FILMLISTE_SEKUNDEN_FUER_AUTOUPDATE"], [386, "        int ret = alterFilmlisteSek();"], [387, "//        Date jetzt = new Date(System.currentTimeMillis());"], [388, "//        SimpleDateFormat sdf = new SimpleDateFormat(DATUM_ZEIT_FORMAT);"], [389, "//        String date = metaDaten[ListeFilme.FILMLISTE_DATUM_NR];"], [390, "//        Date filmDate = null;"], [391, "//        try {"], [392, "//            filmDate = sdf.parse(date);"], [393, "//        } catch (ParseException ex) {"], [394, "//        }"], [395, "//        if (jetzt != null && filmDate != null) {"], [396, "//            ret = Math.round((jetzt.getTime() - filmDate.getTime()) / (1000));"], [397, "//            ret = Math.abs(ret);"], [398, "//        }"], [399, "        if (ret != 0) {"], [402, "        return ret > sekunden;"], [403, "    }"], [404, ""], [405, "    public void metaDatenSchreiben(boolean stop) {"], [406, "        // FilmlisteMetaDaten"], [407, "        metaDaten = ListeFilme.newMetaDaten();"], [408, "        if (!Daten.filmeLaden.getStop() /* l\u00f6schen */) {"], [409, "            metaDaten[ListeFilme.FILMLISTE_DATUM_NR] = getJetzt_ddMMyyyy_HHmm();"], [410, "            metaDaten[ListeFilme.FILMLISTE_DATUM_GMT_NR] = getJetzt_ddMMyyyy_HHmm_gmt();"], [411, "        } else {"], [412, "            metaDaten[ListeFilme.FILMLISTE_DATUM_NR] = \"\";"], [413, "            metaDaten[ListeFilme.FILMLISTE_DATUM_GMT_NR] = \"\";"], [415, "        //listeFilmeNeu.metaDaten[ListeFilme.FILMLISTE_ANZAHL_NR] = String.valueOf(listeFilmeNeu.size());"], [416, "        metaDaten[ListeFilme.FILMLISTE_VERSION_NR] = Konstanten.VERSION;"], [417, "        metaDaten[ListeFilme.FILMLISTE_PRGRAMM_NR] = Funktionen.getProgVersionString();"], [418, ""], [419, "    }"], [420, ""], [421, "    private String getJetzt_ddMMyyyy_HHmm() {"], [422, "        SimpleDateFormat formatter = new SimpleDateFormat(DATUM_ZEIT_FORMAT);"], [423, "        return formatter.format(new Date());"], [424, "    }"], [425, ""], [426, "    private String getJetzt_ddMMyyyy_HHmm_gmt() {"], [427, "        SimpleDateFormat formatter = new SimpleDateFormat(DATUM_ZEIT_FORMAT);"], [428, "        formatter.setTimeZone(new SimpleTimeZone(SimpleTimeZone.UTC_TIME, \"UTC\"));"], [429, "        return formatter.format(new Date());"]], "deleted": [[327, "        SimpleDateFormat sdf = new SimpleDateFormat(\"dd.MM.yyyy, HH:mm\");"], [328, "        String date = metaDaten[ListeFilme.FILMLISTE_DATUM_NR];"], [348, "        // Filmliste ist \u00e4lter als: FilmeLaden.ALTER_FILMLISTE_SEKUNDEN_FUER_AUTOUPDATE"], [349, "        int ret = -1;"], [350, "        Date jetzt = new Date(System.currentTimeMillis());"], [351, "        SimpleDateFormat sdf = new SimpleDateFormat(\"dd.MM.yyyy, HH:mm\");"], [352, "        String date = metaDaten[ListeFilme.FILMLISTE_DATUM_NR];"], [353, "        Date filmDate = null;"], [354, "        try {"], [355, "            filmDate = sdf.parse(date);"], [356, "        } catch (ParseException ex) {"], [357, "        }"], [358, "        if (jetzt != null && filmDate != null) {"], [359, "            ret = Math.round((jetzt.getTime() - filmDate.getTime()) / (1000));"], [360, "            ret = Math.abs(ret);"], [361, "        }"], [362, "        if (ret != -1) {"], [365, "        if (ret > sekunden) {"], [366, "            return true;"], [367, "        } else if (ret == -1) {"], [368, "            return true;"], [370, "        return false;"]]}, "num_lines_added": 81, "num_lines_removed": 22}