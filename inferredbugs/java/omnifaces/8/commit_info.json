{"hash": "1c912f71a1d7b691dac6e0dde5f9fd9f48d3388f", "message": "New: immediately destroy @ViewScoped on unload (link, close, etc)", "file_num_lines": 30, "diff_parsed": {"added": [[18, "import static org.omnifaces.util.Faces.getRequestParameter;"], [19, "import static org.omnifaces.util.Faces.responseComplete;"], [20, ""], [23, "import javax.faces.event.PostRestoreStateEvent;"], [32, " * Listener for JSF view scope destroy events so that view scope manager can be notified."], [58, "\t\t\tprocessPreDestroyView();"], [59, "\t\t}"], [60, "\t\telse if (event instanceof PostRestoreStateEvent && \"unload\".equals(getRequestParameter(\"omnifaces.event\"))) {"], [61, "\t\t\tprocessPreDestroyView();"], [62, "\t\t\tresponseComplete();"], [66, "\tprivate void processPreDestroyView() {"], [67, "\t\tBeanManager.INSTANCE.getReference(ViewScopeManager.class).preDestroyView();"], [68, "\t}"], [69, ""]], "deleted": [[28, " * Listener for JSF view scope destroy events so that view scope provider implementation can be notified."], [54, "\t\t\tBeanManager.INSTANCE.getReference(ViewScopeManager.class).preDestroyView();"]]}, "num_lines_added": 14, "num_lines_removed": 2}