{"hash": "c09aeb287a4703b122e7317c599b732969465ba0", "message": "Further improved Beans#destroy() to support non-alterable context", "file_num_lines": 150, "diff_parsed": {"added": [[189, "\t\t\tT instance = context.get(bean);"], [190, ""], [191, "\t\t\tif (instance != null) {"], [192, "\t\t\t\tdestroy(beanManager, bean, instance);"], [193, "\t\t\t}"], [202, "\t\tif (instance instanceof Class) { // Java prefers T over Class<T> when varargs is not specified :("], [207, ""], [208, "\t\t\tif (bean != null) {"], [209, "\t\t\t\tdestroy(beanManager, bean, instance);"], [210, "\t\t\t}"], [214, "\tprivate static <T> void destroy(BeanManager beanManager, Bean<T> bean, T instance) {"], [215, "\t\tbean.destroy(instance, beanManager.createCreationalContext(bean));"], [216, "\t}"], [217, ""]], "deleted": [[15, "import static java.lang.String.format;"], [57, "\tprivate static final String ERROR_NO_ALTERABLE_CONTEXT ="], [58, "\t\t\"Bean '%s' is put in context '%s' which is not an alterable context.\";"], [59, ""], [193, "\t\t\tthrow new IllegalArgumentException("], [194, "\t\t\t\tformat(ERROR_NO_ALTERABLE_CONTEXT, bean.getBeanClass(), context.getClass()));"], [203, "\t\tif (instance instanceof Class) {"], [206, "\t\telse if (instance instanceof Bean) {"], [207, "\t\t\tdestroy(beanManager, (Bean<T>) instance);"], [208, "\t\t}"], [211, "\t\t\tbean.destroy(instance, beanManager.createCreationalContext(bean));"]]}, "num_lines_added": 14, "num_lines_removed": 11}