{"hash": "5e25c6860bd7c0fde7ffa85c919e69d8f13f825d", "message": "FABJ-452 shutdown spurious NPE\n\nCalling Channel.shutdown() can cause spurious NullPointerExceptions\n\nChange-Id: Ie28a425eed31299fa6441fe8aedecf15e7407d54\nSigned-off-by: rickr <cr22rc@gmail.com>", "file_num_lines": 326, "diff_parsed": {"added": [[57, "    private String channelName = null;"], [61, "    private long peerEventRegistrationWaitTimeMilliSecs = PEER_EVENT_REGISTRATION_WAIT_TIME;"], [82, "        this.peerOptions = peerOptions;"], [85, ""], [86, "        if (peer.isShutdown()) {"], [87, "            logger.debug(\"PeerEventServiceClient not starting peer has shutdown.\");"], [88, "            shutdown = true;"], [89, "            toString = \"PeerEventServiceClient{\" + \"id: \" + config.getNextID() + \", channel: null\" + \", peerName: \" + name + \", url: \" + url + \"}\";"], [90, "            return;"], [91, "        }"], [92, "        final Channel channel = peer.getChannel();"], [93, "        if (channel == null) {"], [94, "            logger.debug(\"Peer no longer associated with a channel not connecting.\");"], [95, "            shutdown = true;"], [96, "            toString = \"PeerEventServiceClient{\" + \"id: \" + config.getNextID() + \", channel: null\" + \", peerName: \" + name + \", url: \" + url + \"}\";"], [97, "            return;"], [98, "        }"], [99, ""], [100, "        channelName = channel.getName();"], [102, ""], [105, "        this.channelEventQue = channel.getChannelEventQue();"], [398, "    private void peerVent(TransactionContext transactionContext) throws TransactionException {"], [400, "        if (shutdown) { // check aagin"], [401, "            logger.debug(\"peerVent not starting, shutting down.\");"], [402, "            return;"], [403, "        }"]], "deleted": [[57, "    private final String channelName;"], [61, "    private final long peerEventRegistrationWaitTimeMilliSecs;"], [84, "        channelName = peer.getChannel().getName();"], [86, "        this.peerOptions = peerOptions;"], [89, "        this.channelEventQue = peer.getChannel().getChannelEventQue();"], [382, "    void peerVent(TransactionContext transactionContext) throws TransactionException {"]]}, "num_lines_added": 26, "num_lines_removed": 6}