{"hash": "24f0d836faedbc1c570476cd1d7b9f754ed15df5", "message": "Implement weak reference of Player into User for performance improvement", "file_num_lines": 33, "diff_parsed": {"added": [[7, "import java.lang.reflect.Field;"], [8, "import java.lang.reflect.Method;"], [9, ""], [12, "    private static Class<?> craftPlayerClass;"], [13, "    private static Method   getHandleMethod;"], [14, "    private static Field    pingField;"], [15, ""], [16, "    static {"], [17, "        craftPlayerClass = Reflections.getCraftBukkitClass(\"entity.CraftPlayer\");"], [18, "        getHandleMethod = Reflections.getMethod(craftPlayerClass, \"getHandle\");"], [19, "        pingField = Reflections.getField(Reflections.getNMSClass(\"EntityPlayer\"), \"ping\");"], [20, "    }"], [21, ""], [30, "            Object cp = craftPlayerClass.cast(player);"], [31, "            Object handle = getHandleMethod.invoke(cp);"], [32, "            ping = (int) pingField.get(handle);"], [33, "        }"], [34, "        catch (Exception e) {"]], "deleted": [[17, "            Class<?> craftPlayer = Reflections.getCraftBukkitClass(\"entity.CraftPlayer\");"], [18, "            Object cp = craftPlayer.cast(player);"], [19, "            Object handle = craftPlayer.getMethod(\"getHandle\").invoke(cp);"], [20, "            ping = (int) handle.getClass().getField(\"ping\").get(handle);"], [21, "        } catch (Exception e) {"]]}, "num_lines_added": 18, "num_lines_removed": 5}