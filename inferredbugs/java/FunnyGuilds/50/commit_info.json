{"hash": "6ea5da13c8265d2e4329c8f297a6e23680c97621", "message": "GH-1078 Make proper synchronization in RankManager", "file_num_lines": 65, "diff_parsed": {"added": [[12, "    private static final RankManager INSTANCE = new RankManager();"], [14, "    private final List<Rank> users = Collections.synchronizedList(new ArrayList<>());"], [15, "    private final List<Rank> guilds = Collections.synchronizedList(new ArrayList<>());"], [16, ""], [17, "    private RankManager() {"], [21, "        return INSTANCE;"], [25, "        if (! this.users.contains(user.getRank())) {"], [29, "        Collections.sort(users);"], [42, "        if (! this.guilds.contains(guild.getRank())) {"], [44, "        }"], [45, ""], [46, "        Collections.sort(guilds);"], [47, ""], [48, "        for (int i = 0; i < guilds.size(); i++) {"], [49, "            Rank rank = guilds.get(i);"], [50, "            rank.setPosition(i + 1);"], [79, "        Collections.sort(this.users);"], [85, "        Collections.sort(this.guilds);"]], "deleted": [[12, "    private static RankManager instance;"], [13, "    private final List<Rank> users = new ArrayList<>();"], [14, "    private final List<Rank> guilds = new ArrayList<>();"], [16, "    public RankManager() {"], [17, "        instance = this;"], [21, "        if (instance == null) {"], [22, "            new RankManager();"], [23, "        }"], [24, "        return instance;"], [28, "        if (!this.users.contains(user.getRank())) {"], [32, "        synchronized (users) {"], [33, "            Collections.sort(users);"], [34, "        }"], [47, "        if (!this.guilds.contains(guild.getRank())) {"], [49, "        } else {"], [50, "            synchronized (guilds) {"], [51, "                Collections.sort(guilds);"], [52, "            }"], [53, ""], [54, "            for (int i = 0; i < guilds.size(); i++) {"], [55, "                Rank rank = guilds.get(i);"], [56, "                rank.setPosition(i + 1);"], [57, "            }"], [86, "        synchronized (users) {"], [87, "            Collections.sort(this.users);"], [88, "        }"], [94, "        synchronized (guilds) {"], [95, "            Collections.sort(this.guilds);"], [96, "        }"], [97, ""], [99, ""]]}, "num_lines_added": 18, "num_lines_removed": 31}