{"hash": "ea1e3b3bab6b1d93a105091e1ddacf1c5e607fab", "message": "Fix bug with invalid loading allies and enemies (closes #749, closes #908)\n\nSigned-off-by: insertt <inserttdev@gmail.com>", "file_num_lines": 219, "diff_parsed": {"added": [[15, "import net.dzikoysk.funnyguilds.util.commons.ChatUtils;"], [18, "import java.util.ArrayList;"], [19, "import java.util.List;"], [102, "        Database.getInstance().executeQuery(\"SELECT `tag`, `allies`, `enemies` FROM `\" + config.mysql.guildsTableName + \"`\", result -> {"], [103, "            try {"], [104, "                while (result.next()) {"], [105, "                    Guild guild = GuildUtils.getByTag(result.getString(\"tag\"));"], [106, ""], [107, "                    if (guild == null) {"], [108, "                        continue;"], [109, "                    }"], [110, ""], [111, "                    String alliesList = result.getString(\"allies\");"], [112, "                    String enemiesList = result.getString(\"enemies\");"], [113, ""], [114, "                    List<Guild> allies = new ArrayList<>();"], [115, ""], [116, "                    if (alliesList != null && !alliesList.equals(\"\")) {"], [117, "                        allies = GuildUtils.getGuilds(ChatUtils.fromString(alliesList));"], [118, "                    }"], [119, ""], [120, "                    List<Guild> enemies = new ArrayList<>();"], [121, ""], [122, "                    if (enemiesList != null && !enemiesList.equals(\"\")) {"], [123, "                        enemies = GuildUtils.getGuilds(ChatUtils.fromString(enemiesList));"], [124, "                    }"], [125, ""], [126, "                    guild.setAllies(allies);"], [127, "                    guild.setEnemies(enemies);"], [128, "                }"], [129, "            }"], [130, "            catch (Exception ex) {"], [131, "                if (FunnyLogger.exception(ex.getCause())) {"], [132, "                    ex.printStackTrace();"], [133, "                }"], [134, "            }"], [135, "        });"], [136, ""]], "deleted": []}, "num_lines_added": 38, "num_lines_removed": 0}