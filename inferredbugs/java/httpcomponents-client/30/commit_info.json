{"hash": "4d38bede89b4c3112c8258a7833c2a16d59133b4", "message": "HTTPCLIENT-1229: Fixed NPE in BasicClientConnectionManager that can be triggered by releasing connection after the connection manager has already been shut down\n\ngit-svn-id: https://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk@1382442 13f79535-47bb-0310-9956-ffa450edef68", "file_num_lines": 199, "diff_parsed": {"added": [[36, "import org.apache.http.HttpClientConnection;"], [157, "            assertNotShutdown();"], [158, "            if (this.log.isDebugEnabled()) {"], [159, "                this.log.debug(\"Get connection for route \" + route);"], [160, "            }"], [183, "    private void shutdownConnection(final HttpClientConnection conn) {"], [184, "        try {"], [185, "            conn.shutdown();"], [186, "        } catch (IOException iox) {"], [187, "            if (this.log.isDebugEnabled()) {"], [188, "                this.log.debug(\"I/O exception shutting down connection\", iox);"], [189, "            }"], [190, "        }"], [191, "    }"], [192, ""], [200, "            if (this.log.isDebugEnabled()) {"], [201, "                this.log.debug(\"Releasing connection \" + conn);"], [202, "            }"], [211, "                if (this.shutdown) {"], [212, "                    shutdownConnection(managedConn);"], [213, "                    return;"], [214, "                }"], [217, "                        shutdownConnection(managedConn);"], [242, "            assertNotShutdown();"], [256, "            assertNotShutdown();"], [271, "            this.shutdown = true;"]], "deleted": [[155, "        assertNotShutdown();"], [156, "        if (this.log.isDebugEnabled()) {"], [157, "            this.log.debug(\"Get connection for route \" + route);"], [158, "        }"], [183, "        assertNotShutdown();"], [188, "        if (this.log.isDebugEnabled()) {"], [189, "            this.log.debug(\"Releasing connection \" + conn);"], [190, "        }"], [203, "                        try {"], [204, "                            managedConn.shutdown();"], [205, "                        } catch (IOException iox) {"], [206, "                            if (this.log.isDebugEnabled()) {"], [207, "                                this.log.debug(\"I/O exception shutting down released connection\", iox);"], [208, "                            }"], [209, "                        }"], [233, "        assertNotShutdown();"], [247, "        assertNotShutdown();"], [262, "        this.shutdown = true;"]]}, "num_lines_added": 26, "num_lines_removed": 18}