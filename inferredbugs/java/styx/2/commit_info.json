{"hash": "ff7b8bf944419f5f21a1d6b0967d1be79e6a4694", "message": "Allow filtering active states query on component", "file_num_lines": 292, "diff_parsed": {"added": [[54, "import static com.google.cloud.datastore.StructuredQuery.PropertyFilter.hasAncestor;"], [55, ""], [183, "    final EntityQuery query = Query.entityQueryBuilder()"], [187, "    return queryActiveStates(query);"], [188, "  }"], [190, "  Map<WorkflowInstance, Long> activeStates(String componentId) {"], [191, "    final EntityQuery query = Query.entityQueryBuilder()"], [192, "        .kind(KIND_ACTIVE_STATE)"], [193, "        .filter(hasAncestor(componentKeyFactory.newKey(componentId)))"], [194, "        .build();"], [195, ""], [196, "    return queryActiveStates(query);"], [197, "  }"], [198, ""], [199, "  private Map<WorkflowInstance, Long> queryActiveStates(EntityQuery activeStatesQuery) {"], [200, "    final ImmutableMap.Builder<WorkflowInstance, Long> mapBuilder = ImmutableMap.builder();"]], "deleted": [[181, "    final EntityQuery activeStatesQuery = Query.entityQueryBuilder()"], [185, "    final ImmutableMap.Builder<WorkflowInstance, Long> mapBuilder = ImmutableMap.builder();"]]}, "num_lines_added": 16, "num_lines_removed": 2}