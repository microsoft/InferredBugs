{"hash": "cbdc499ba656aa68f85304c978ddf09600862c62", "message": "*) adding many missing (File)?(Input|Output)Stream.close() calls to avoid \"Too many open files bug\".\n\ngit-svn-id: https://svn.berlios.de/svnroot/repos/yacy/trunk@90 6c8d7289-2bf4-0310-a012-ef5d649a1542", "file_num_lines": 71, "diff_parsed": {"added": [[55, "\t\tbyte[] buffer = new byte[4096];"], [56, "\t\tint c;"], [57, "\t\twhile ((c = source.read(buffer)) > 0) dest.write(buffer, 0, c);"], [58, "\t\tdest.flush();"], [62, "        FileOutputStream fos = null;"], [63, "        try {"], [64, "\t\t\tfos = new FileOutputStream(dest);"], [65, "\t\t\tcopy(source, fos);"], [66, "        } finally {"], [67, "\t\t\tif (fos != null) try {fos.close();} catch (Exception e) {}"], [68, "        }"], [72, "\t\tInputStream fis = null;"], [73, "        try {"], [74, "\t\t\tfis = new FileInputStream(source);"], [75, "\t\t\tcopy(fis, dest);"], [76, "        } finally {"], [77, "            if (fis != null) try { fis.close(); } catch (Exception e) {}"], [78, "        }"], [82, "        FileInputStream fis = null;"], [83, "        FileOutputStream fos = null;"], [84, "        try {"], [85, "\t        fis = new FileInputStream(source);"], [86, "\t        fos = new FileOutputStream(dest);"], [87, "\t        copy(fis, fos);"], [88, "        } finally {"], [89, "            if (fis != null) try {fis.close();} catch (Exception e) {}"], [90, "            if (fos != null) try {fos.close();} catch (Exception e) {}"], [91, "        }"], [102, "\t\tbyte[] buffer = new byte[(int) source.length()];"], [103, "\t\tInputStream fis = null;"], [104, "        try {"], [105, "\t        fis = new FileInputStream(source);"], [106, "\t\t\tint p = 0, c;"], [107, "\t\t\twhile ((c = fis.read(buffer, p, buffer.length - p)) > 0) p += c;"], [108, "        } finally {"], [109, "            if (fis != null) try { fis.close(); } catch (Exception e) {}"], [110, "        }"], [111, "\t\treturn buffer;"]], "deleted": [[55, "\tbyte[] buffer = new byte[4096];"], [56, "\tint c;"], [57, "\twhile ((c = source.read(buffer)) > 0) dest.write(buffer, 0, c);"], [58, "\tdest.flush();"], [62, "        FileOutputStream fos = new FileOutputStream(dest);"], [63, "        copy(source, fos);"], [64, "        fos.close();"], [68, "\tInputStream fis = new FileInputStream(source);"], [69, "        copy(fis, dest);"], [70, "\tfis.close();"], [74, "        FileInputStream fis = new FileInputStream(source);"], [75, "        FileOutputStream fos = new FileOutputStream(dest);"], [76, "        copy(fis, fos);"], [77, "        fis.close();"], [78, "        fos.close();"], [89, "        byte[] buffer = new byte[(int) source.length()];"], [90, "        InputStream fis = new FileInputStream(source);"], [91, "        int p = 0;"], [92, "        int c;"], [93, "\twhile ((c = fis.read(buffer, p, buffer.length - p)) > 0) p += c;"], [94, "\tfis.close();"], [95, "        return buffer;"]]}, "num_lines_added": 38, "num_lines_removed": 22}