{"hash": "8b31f9e2024fdd54094895d92f4a1d1458761233", "message": "enhanced shut-down behaviour & added experimental nio-wrapper for kelondroRA (not active yet)\n\ngit-svn-id: https://svn.berlios.de/svnroot/repos/yacy/trunk@44 6c8d7289-2bf4-0310-a012-ef5d649a1542", "file_num_lines": 149, "diff_parsed": {"added": [[127, "        // with these functions, we consider a line as always terminated by CRLF"], [128, "        byte[] bb = new byte[80];"], [129, "        int bbsize = 0;"], [130, "        int c;"], [131, "        while (true) {"], [132, "            c = read();"], [133, "            if (c < 0) {"], [134, "                if (bbsize == 0) return null; else return new String(bb, 0, bbsize);"], [135, "            }"], [136, "            if (c == cr) continue;"], [137, "            if (c == lf) return new String(bb, 0, bbsize);"], [138, ""], [139, "            // append to bb"], [140, "            if (bbsize == bb.length) {"], [141, "                // extend bb size"], [142, "                byte[] newbb = new byte[bb.length * 2];"], [143, "                System.arraycopy(bb, 0, newbb, 0, bb.length);"], [144, "                bb = newbb;"], [145, "                newbb = null;"], [146, "            }"], [147, "            bb[bbsize++] = (byte) c;"], [148, "        }"]], "deleted": [[127, "\t// with these functions, we consider a line as always terminated by CRLF"], [128, "\tserverByteBuffer sb = new serverByteBuffer();"], [129, "\tint c;"], [130, "\twhile (true) {"], [131, "\t    c = read();"], [132, "\t    if (c < 0) {"], [133, "\t\tif (sb.length() == 0) return null; else return sb.toString();"], [134, "\t    }"], [135, "\t    if (c == cr) continue;"], [136, "\t    if (c == lf) return sb.toString();"], [137, "\t    sb.append((byte) c);"], [138, "\t}"]]}, "num_lines_added": 22, "num_lines_removed": 12}