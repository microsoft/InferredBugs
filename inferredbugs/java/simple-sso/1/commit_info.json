{"hash": "cdc63d13c2b6b307519206e9f2986892ef5adc93", "message": "\u4fee\u6539filter", "file_num_lines": 34, "diff_parsed": {"added": [[34, "\t\t// \u9a8c\u8bc1\u7528\u6237"], [40, "\t\t// \u6388\u6743"], [45, "\t\t// \u5b50\u7cfb\u7edf\u8df3\u8f6c\u8fc7\u6765\u7684\u767b\u5f55\u8bf7\u6c42\uff0c\u6388\u6743\u540e\uff0c\u8df3\u8f6c\u56de\u53bb"]], "deleted": [[3, "import java.util.HashMap;"], [4, "import java.util.List;"], [5, "import java.util.Map;"], [11, "import org.springframework.beans.factory.annotation.Autowired;"], [17, "import com.sheefee.simple.sso.client.util.AuthUtil;"], [18, "import com.sheefee.simple.sso.server.service.AuthService;"], [29, "\t@Autowired"], [30, "\tprivate AuthService authService;"], [31, ""], [43, "\t\t// \u9a8c\u8bc1\u7528\u6237\u4fe1\u606f"], [49, "\t\t// \u521b\u5efa\u6388\u6743\u4ee4\u724c\uff0c\u5c06\u4f1a\u8bdd\u6807\u8bb0\u4e3a\u5df2\u767b\u5f55\uff0c\u5e76\u5c06token\u653e\u4e8e\u4f1a\u8bdd\u4e2d"], [54, "\t\t// \u5982\u679c\u662f\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u767b\u5f55\u8bf7\u6c42\uff0c\u8df3\u8f6c\u56de\u5ba2\u6237\u7aef\uff0c\u5e76\u9644\u5e26token"], [57, "\t\t\t// \u5b58\u50a8token\u4e0e\u5ba2\u6237\u7aefurl\u7684\u5173\u8054\u5173\u7cfb"], [58, "\t\t\tauthService.register(token, clientUrl);"], [62, "\t\t// \u8ba4\u8bc1\u4e2d\u5fc3\u53d1\u8d77\u7684\u767b\u5f55\u8bf7\u6c42\uff0c\u8df3\u8f6c\u81f3\u767b\u5f55\u6210\u529f\u9875\u9762"], [76, ""], [77, "\t\t// \u6ce8\u9500\u672c\u5730\u4f1a\u8bdd"], [81, ""], [82, "\t\t// \u5982\u679c\u662f\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u6ce8\u9500\u8bf7\u6c42"], [83, "\t\tString token = (String) session.getAttribute(AuthConst.TOKEN);"], [84, "\t\tList<String> clientUrls = authService.remove(token);"], [85, "\t\tif (clientUrls != null && clientUrls.size() > 0) {"], [86, "\t\t\tMap<String, String> params = new HashMap<String, String>();"], [87, "\t\t\tparams.put(AuthConst.LOGOUT_REQUEST, AuthConst.LOGOUT_REQUEST);"], [88, "\t\t\tparams.put(AuthConst.TOKEN, token);"], [89, "\t\t\tfor (String url : clientUrls) {"], [90, "\t\t\t\tAuthUtil.post(url, params);"], [91, "\t\t\t}"], [92, "\t\t}"], [93, "\t\t// \u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\u9762"]]}, "num_lines_added": 3, "num_lines_removed": 30}