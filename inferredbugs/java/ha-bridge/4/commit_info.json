{"hash": "a578aa9fd800314d06585bebc1278535f37c1169", "message": "Update TCP handling to save connection. Added debug to http handler.", "file_num_lines": 97, "diff_parsed": {"added": [[4, "import java.io.IOException;"], [8, "import java.util.HashMap;"], [9, "import java.util.Iterator;"], [10, "import java.util.Map;"], [28, "\tprivate Map<String, Socket> theSockets;"], [39, "\t\tSocket dataSendSocket = null;"], [49, "\t\t\tdataSendSocket = theSockets.get(hostPortion);"], [50, "\t\t\tif(dataSendSocket == null) {"], [51, "\t\t\t\tif (hostPortion.contains(\":\")) {"], [52, "\t\t\t\t\thostAddr = hostPortion.substring(0, intermediate.indexOf(':'));"], [53, "\t\t\t\t\tport = hostPortion.substring(intermediate.indexOf(':') + 1);"], [54, "\t\t\t\t} else"], [55, "\t\t\t\t\thostAddr = hostPortion;"], [56, "\t\t\t\ttry {"], [57, "\t\t\t\t\tIPAddress = InetAddress.getByName(hostAddr);"], [58, "\t\t\t\t} catch (UnknownHostException e) {"], [59, "\t\t\t\t\t// noop"], [60, "\t\t\t\t}"], [61, ""], [62, "\t\t\t\ttry {"], [63, "\t\t\t\t\tdataSendSocket = new Socket(IPAddress, Integer.parseInt(port));"], [64, "\t\t\t\t\ttheSockets.put(hostPortion, dataSendSocket);"], [65, "\t\t\t\t} catch (Exception e) {"], [66, "\t\t\t\t\t// noop"], [67, "\t\t\t\t}"], [93, "\t\ttheSockets = new HashMap<String, Socket>();"], [105, "\t\tIterator<?> anIterator = theSockets.entrySet().iterator();"], [106, "\t\twhile(anIterator.hasNext()) {"], [107, "\t\t\tSocket aSocket = (Socket) anIterator.next();"], [108, "\t\t\ttry {"], [109, "\t\t\t\taSocket.close();"], [110, "\t\t\t} catch (IOException e) {"], [111, "\t\t\t\t// noop"], [112, "\t\t\t}"], [113, "\t\t}"]], "deleted": [[43, "\t\t\tif (hostPortion.contains(\":\")) {"], [44, "\t\t\t\thostAddr = hostPortion.substring(0, intermediate.indexOf(':'));"], [45, "\t\t\t\tport = hostPortion.substring(intermediate.indexOf(':') + 1);"], [46, "\t\t\t} else"], [47, "\t\t\t\thostAddr = hostPortion;"], [48, "\t\t\ttry {"], [49, "\t\t\t\tIPAddress = InetAddress.getByName(hostAddr);"], [50, "\t\t\t} catch (UnknownHostException e) {"], [51, "\t\t\t\t// noop"], [62, ""], [64, "\t\t\t\tSocket dataSendSocket = new Socket(IPAddress, Integer.parseInt(port));"], [68, "\t\t\t\tdataSendSocket.close();"], [91, "\t\t// noop"], [92, ""]]}, "num_lines_added": 35, "num_lines_removed": 14}