{"hash": "4d73c16f75aaaf2dd68dc0bd8e09574984b97544", "message": "Fixes #832: adding support for watch over port-forward", "file_num_lines": 211, "diff_parsed": {"added": [[23, "import java.io.Closeable;"], [44, "        return runAsyncCommand(log, command, args, withShutdownHook).await();"], [45, "    }"], [46, ""], [47, "    public static ProcessExecutionContext runAsyncCommand(final Logger log, File command, List<String> args, boolean withShutdownHook) throws IOException {"], [54, "        return new ProcessExecutionContext(process, threads, log);"], [238, ""], [239, "    // ====================================================================================="], [240, ""], [241, "    /**"], [242, "     * Closeable class for holding a reference to a subprocess."], [243, "     */"], [244, "    public static class ProcessExecutionContext implements Closeable {"], [245, ""], [246, "        private Process process;"], [247, ""], [248, "        private List<Thread> loggingThreads;"], [249, ""], [250, "        private Logger log;"], [251, ""], [252, "        public ProcessExecutionContext(Process process, List<Thread> loggingThreads, Logger log) {"], [253, "            this.process = process;"], [254, "            this.loggingThreads = loggingThreads;"], [255, "            this.log = log;"], [256, "        }"], [257, ""], [258, "        public int await() {"], [259, "            try {"], [260, "                int answer = process.waitFor();"], [261, "                joinThreads(loggingThreads, log);"], [262, "                return answer;"], [263, "            } catch (InterruptedException e) {"], [264, "                return process.exitValue();"], [265, "            }"], [266, "        }"], [267, ""], [268, "        @Override"], [269, "        public void close() throws IOException {"], [270, "            process.destroy();"], [271, "            await();"], [272, "        }"], [273, "    }"]], "deleted": [[49, "        try {"], [50, "            int answer = process.waitFor();"], [51, "            joinThreads(threads, log);"], [52, "            return answer;"], [53, "        } catch (InterruptedException e) {"], [54, "            return process.exitValue();"], [55, "        }"]]}, "num_lines_added": 42, "num_lines_removed": 7}