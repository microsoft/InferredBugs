{"hash": "1e97b0ecb28b4fc55c6b508374cd3051b81d3a2a", "message": "Store resolved latest versions as Java preferences with a time to live (ttl, by default 60 seconds)", "file_num_lines": 944, "diff_parsed": {"added": [[120, "    protected boolean isLatest;"], [122, "    protected Preferences preferences = new Preferences();"], [243, "                Architecture architecture = config().getArchitecture();"], [244, "                String driverVersion = config()"], [245, "                        .getDriverVersion(driverVersionKey);"], [246, ""], [247, "                isLatest = isVersionLatest(driverVersion);"], [248, "                String key = getPreferenceKey();"], [249, "                String versionInPreferences = preferences"], [250, "                        .getVersionInPreferences(key);"], [251, ""], [252, "                if (isLatest && !isNullOrEmpty(versionInPreferences)) {"], [253, "                    long expirationTime = preferences"], [254, "                            .getExpirationTimeInPreferences(key);"], [255, "                    String expirationDate = preferences"], [256, "                            .formatTime(expirationTime);"], [257, "                    log.trace("], [258, "                            \"Version in preferences: {} (expiration date {}) (key {})\","], [259, "                            versionInPreferences, expirationDate, key);"], [260, "                    if (preferences.isValid(versionInPreferences,"], [261, "                            expirationTime)) {"], [262, "                        log.debug("], [263, "                                \"Using {} {} (value previously resolved, valid until {})\","], [264, "                                getDriverName(), versionInPreferences,"], [265, "                                expirationDate);"], [266, "                        driverVersion = versionInPreferences;"], [267, "                    } else {"], [268, "                        preferences.clearVersionFromPreferences(key);"], [269, "                    }"], [270, "                }"], [271, "                manage(architecture, driverVersion);"], [272, ""], [507, "                storeVersionToDownload(version);"], [609, "            candidateUrls = getLatest ? checkLatest(urls, getDriverName())"], [673, "            storeVersionToDownload(version);"], [706, "        log.trace(\"{} not found in cache\", driverName);"], [756, ""], [758, "        log.trace(\"Using {} {}\", driver, version);"], [762, "    protected List<URL> checkLatest(List<URL> list, String driver) {"], [777, "        storeVersionToDownload(versionToDownload);"], [1046, "        isLatest = true;"], [1108, "    private String getPreferenceKey() {"], [1109, "        return getDriverName().toLowerCase() + \"-\""], [1110, "                + config().getOs().toLowerCase() + config().getArchitecture();"], [1111, "    }"], [1112, ""], [1113, "    private void storeVersionToDownload(String version) {"], [1114, "        if (version.startsWith(\".\")) {"], [1115, "            version = version.substring(1);"], [1116, "        }"], [1117, "        versionToDownload = version;"], [1118, "        if (isLatest) {"], [1119, "            preferences.putVersionInPreferencesIfEmpty(getPreferenceKey(),"], [1120, "                    version);"], [1121, "        }"], [1122, "    }"], [1123, ""]], "deleted": [[241, "                manage(config().getArchitecture(),"], [242, "                        config().getDriverVersion(driverVersionKey));"], [477, "                versionToDownload = version;"], [579, "            candidateUrls = getLatest ? getLatest(urls, getDriverName())"], [643, "            versionToDownload = version;"], [676, "        log.debug(\"{} not found in cache\", driverName);"], [727, "        log.debug(\"Using {} {}\", driver, version);"], [731, "    protected List<URL> getLatest(List<URL> list, String driver) {"], [746, "        if (versionToDownload != null && versionToDownload.startsWith(\".\")) {"], [747, "            versionToDownload = versionToDownload.substring(1);"], [748, "        }"]]}, "num_lines_added": 57, "num_lines_removed": 11}