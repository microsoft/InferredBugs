{"hash": "8e7184882d8101076fb3e5647f64cb1b0c76a97b", "message": "- Adding deleteByDocId functionality", "file_num_lines": 121, "diff_parsed": {"added": [[36, "import org.apache.commons.httpclient.HttpException;"], [37, ""], [49, "\tprivate boolean deleteUniqDoc(Client client, String indexName, String uniq)"], [57, "\tprivate boolean deleteDocById(Client client, String indexName, int docId)"], [58, "\t\t\tthrows NoSuchAlgorithmException, IOException, URISyntaxException {"], [59, "\t\tif (indexName == null)"], [60, "\t\t\treturn client.deleteDocument(docId);"], [61, "\t\telse"], [62, "\t\t\treturn client.deleteDocument(indexName, docId);"], [63, "\t}"], [64, ""], [65, "\tprivate int deleteUniqDocs(Client client, String indexName,"], [74, "\tprivate int deleteDocsById(Client client, String indexName,"], [75, "\t\t\tCollection<Integer> docIds) throws NoSuchAlgorithmException,"], [77, "\t\tif (indexName == null)"], [78, "\t\t\treturn client.deleteDocumentsById(docIds);"], [79, "\t\telse"], [80, "\t\t\treturn client.deleteDocumentsbyId(indexName, docIds);"], [83, "\t@SuppressWarnings(\"unchecked\")"], [84, "\tprivate Object doObjectRequest(HttpServletRequest request,"], [85, "\t\t\tString indexName, boolean byId) throws ServletException {"], [91, "\t\t\tif (obj instanceof DeleteRequest) {"], [92, "\t\t\t\tif (byId)"], [93, "\t\t\t\t\treturn deleteDocsById(client, indexName,"], [94, "\t\t\t\t\t\t\t((DeleteRequest<Integer>) obj).getCollection());"], [95, "\t\t\t\telse"], [96, "\t\t\t\t\treturn deleteUniqDocs(client, indexName,"], [97, "\t\t\t\t\t\t\t((DeleteRequest<String>) obj).getCollection());"], [98, "\t\t\t} else if (obj instanceof String)"], [99, "\t\t\t\treturn deleteUniqDoc(client, indexName, (String) obj);"], [100, "\t\t\telse if (obj instanceof Integer)"], [101, "\t\t\t\treturn deleteDocById(client, indexName, (Integer) obj);"], [119, "\t\t\tString docId = request.getParameter(\"docId\");"], [120, "\t\t\tboolean byId = request.getParameter(\"byId\") != null;"], [123, "\t\t\t\tresult = deleteUniqDoc(client, indexName, uniq);"], [124, "\t\t\telse if (docId != null)"], [125, "\t\t\t\tresult = deleteDocById(client, indexName, Integer"], [126, "\t\t\t\t\t\t.parseInt(docId));"], [128, "\t\t\t\tresult = doObjectRequest(request, indexName, byId);"], [147, "\t\t\t\tnew DeleteRequest<String>(uniqueFields));"], [148, "\t\treturn Integer.getInteger(msg.trim());"], [149, "\t}"], [150, ""], [151, "\tpublic static boolean deleteDocument(URI uri, String indexName, int docId)"], [152, "\t\t\tthrows HttpException, IOException, URISyntaxException {"], [153, "\t\tString msg = call(buildUri(uri, \"/delete\", indexName, \"id=\" + docId));"], [154, "\t\treturn Boolean.getBoolean(msg.trim());"], [155, "\t}"], [156, ""], [157, "\tpublic static int deleteDocuments(URI uri, String indexName,"], [158, "\t\t\tCollection<Integer> docIds) throws IOException, URISyntaxException {"], [159, "\t\tString msg = sendObject("], [160, "\t\t\t\tbuildUri(uri, \"/delete\", indexName, \"byId=yes\"),"], [161, "\t\t\t\tnew DeleteRequest<Integer>(docIds));"], [164, ""]], "deleted": [[47, "\tprivate boolean deleteDoc(Client client, String indexName, String uniq)"], [55, "\tprivate int deleteDocs(Client client, String indexName,"], [64, "\tprivate int deleteDocs(Client client, String indexName,"], [65, "\t\t\tDeleteRequest deleteRequest) throws NoSuchAlgorithmException,"], [67, "\t\treturn deleteDocs(client, indexName, deleteRequest.getCollection());"], [70, "\tprivate Object doObjectRequest(HttpServletRequest request, String indexName)"], [71, "\t\t\tthrows ServletException {"], [77, "\t\t\tif (obj instanceof DeleteRequest)"], [78, "\t\t\t\treturn deleteDocs(client, indexName, (DeleteRequest) obj);"], [79, "\t\t\telse if (obj instanceof String)"], [80, "\t\t\t\treturn deleteDoc(client, indexName, (String) obj);"], [100, "\t\t\t\tresult = deleteDoc(client, indexName, uniq);"], [102, "\t\t\t\tresult = doObjectRequest(request, indexName);"], [121, "\t\t\t\tnew DeleteRequest(uniqueFields));"]]}, "num_lines_added": 55, "num_lines_removed": 14}