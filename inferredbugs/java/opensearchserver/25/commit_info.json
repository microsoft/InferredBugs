{"hash": "8e00dcf1dc643aa4ae4ce6a6438fed44d8979693", "message": "new feature 3016566 - Monitoring API", "file_num_lines": 109, "diff_parsed": {"added": [[27, "import java.io.File;"], [65, "\tpublic Long getFreeDiskSpace() throws SearchLibException,"], [66, "\t\t\tSecurityException, IOException {"], [67, "\t\tFile dataDir = ClientCatalog.getDataDir();"], [69, "\t\t\tif (dataDir.getClass().getDeclaredMethod(\"getFreeSpace\") != null)"], [70, "\t\t\t\treturn dataDir.getFreeSpace();"], [71, "\t\t} catch (NoSuchMethodException e) {"], [72, "\t\t}"], [73, "\t\treturn FileSystemUtils.freeSpaceKb(dataDir.getAbsolutePath()) * 1000;"], [74, "\t}"], [75, ""], [76, "\tpublic Long getTotalDiskSpace() throws SearchLibException,"], [77, "\t\t\tSecurityException, IOException {"], [78, "\t\tFile dataDir = ClientCatalog.getDataDir();"], [79, "\t\ttry {"], [80, "\t\t\tif (dataDir.getClass().getDeclaredMethod(\"getTotalSpace\") != null)"], [81, "\t\t\t\treturn dataDir.getTotalSpace();"], [82, "\t\t} catch (NoSuchMethodException e) {"], [84, "\t\treturn FileSystemUtils.freeSpaceKb(dataDir.getAbsolutePath()) * 1000;"], [85, "\t}"], [86, ""], [87, "\tpublic Double getDiskRate() throws SecurityException, SearchLibException,"], [88, "\t\t\tIOException {"], [89, "\t\tLong free = getFreeDiskSpace();"], [90, "\t\tLong total = getTotalDiskSpace();"], [91, "\t\tif (free == null || total == null)"], [92, "\t\t\treturn null;"], [93, "\t\treturn ((double) free / (double) total) * 100;"], [112, "\t\t\tSearchLibException, SecurityException, IOException {"], [136, "\t\tDouble rate = getDiskRate();"], [137, "\t\tif (rate == null)"], [138, "\t\t\txmlWriter.startElement(\"freeDiskSpace\", \"value\", getFreeDiskSpace()"], [139, "\t\t\t\t\t.toString());"], [140, "\t\telse"], [141, "\t\t\txmlWriter.startElement(\"freeDiskSpace\", \"value\", getFreeDiskSpace()"], [142, "\t\t\t\t\t.toString(), \"rate\", rate.toString());"], [143, ""]], "deleted": [[64, "\tpublic Long getFreeDiskSpace() {"], [66, "\t\t\treturn FileSystemUtils.freeSpaceKb(ClientCatalog.getDataDir()"], [67, "\t\t\t\t\t.getAbsolutePath()) * 1000;"], [68, "\t\t} catch (IOException e) {"], [69, "\t\t\te.printStackTrace();"], [70, "\t\t\treturn null;"], [71, "\t\t} catch (SearchLibException e) {"], [72, "\t\t\te.printStackTrace();"], [73, "\t\t\treturn null;"], [93, "\t\t\tSearchLibException {"], [117, "\t\txmlWriter.startElement(\"freeDiskSpace\", \"value\", getFreeDiskSpace()"], [118, "\t\t\t\t.toString());"]]}, "num_lines_added": 37, "num_lines_removed": 12}