{"hash": "42f299b107fdde4a6cafd1a9e242d7eb82b8fc7f", "message": "Renamed SpringUser to UserDto", "file_num_lines": 370, "diff_parsed": {"added": [[40, "import com.naturalprogrammer.spring.lemon.security.UserDto;"], [182, "\t\tUserDto<ID> currentUser = LemonUtils.currentUser();"], [183, "\t\tif (currentUser != null)"], [184, "\t\t\tjwtService.addAuthHeader(response, currentUser.getUsername(),"], [189, "\t\t\t\t\"user\", LemonUtils.currentUser());"], [518, "\tpublic UserDto<ID> updateUser(U user, @Valid U updatedUser) {"], [526, "\t\tupdateUserFields(user, updatedUser, LemonUtils.currentUser());"], [531, "\t\tUserDto<ID> userDto = user.toUserDto();"], [532, "\t\tuserDto.setPassword(null);"], [533, "\t\treturn userDto;"], [550, "\t\tUserDto<ID> currentUser = LemonUtils.currentUser();"], [551, "\t\tU loggedIn = userRepository.findById(currentUser.getId()).get();"], [569, "//\t\t\tUserDto<ID> currentUser = LemonUtils.getSpringUser();"], [579, "\t\treturn user.toUserDto().getUsername();"], [590, "\tprotected void updateUserFields(U user, U updatedUser, UserDto<ID> currentUser) {"], [716, "\t\tUserDto<ID> currentUser = LemonUtils.currentUser();"], [815, "\t\tUserDto<ID> currentUser = LemonUtils.currentUser();"], [816, "\t\tString username = optionalUsername.orElse(currentUser.getUsername());"], [818, "\t\tLemonUtils.ensureAuthority(currentUser.getUsername().equals(username) ||"], [819, "\t\t\t\tcurrentUser.isGoodAdmin(), \"com.naturalprogrammer.spring.notGoodAdminOrSameUser\");"]], "deleted": [[40, "import com.naturalprogrammer.spring.lemon.security.SpringUser;"], [182, "\t\tSpringUser<ID> springUser = LemonUtils.getSpringUser();"], [183, "\t\tif (springUser != null)"], [184, "\t\t\tjwtService.addAuthHeader(response, springUser.getUsername(),"], [189, "\t\t\t\t\"user\", LemonUtils.getSpringUser());"], [518, "\tpublic SpringUser<ID> updateUser(U user, @Valid U updatedUser) {"], [526, "\t\tupdateUserFields(user, updatedUser, LemonUtils.getSpringUser());"], [531, "\t\tSpringUser<ID> springUser = user.toSpringUser();"], [532, "\t\tspringUser.setPassword(null);"], [533, "\t\treturn springUser;"], [550, "\t\tSpringUser<ID> springUser = LemonUtils.getSpringUser();"], [551, "\t\tU loggedIn = userRepository.findById(springUser.getId()).get();"], [569, "//\t\t\tSpringUser<ID> currentUser = LemonUtils.getSpringUser();"], [579, "\t\treturn user.toSpringUser().getUsername();"], [590, "\tprotected void updateUserFields(U user, U updatedUser, SpringUser<ID> currentUser) {"], [716, "\t\tSpringUser<ID> currentUser = LemonUtils.getSpringUser();"], [815, "\t\tSpringUser<ID> springUser = LemonUtils.getSpringUser();"], [816, "\t\tString username = optionalUsername.orElse(springUser.getUsername());"], [818, "\t\tLemonUtils.ensureAuthority(springUser.getUsername().equals(username) ||"], [819, "\t\t\t\tspringUser.isGoodAdmin(), \"com.naturalprogrammer.spring.notGoodAdminOrSameUser\");"]]}, "num_lines_added": 20, "num_lines_removed": 20}