{"hash": "cb7a3b1e45e1d1354d09b48c6894c9155638a3b3", "message": "Added More Map operations to Hazelcast Client:remove,size,evict,getMapEntry\n\ngit-svn-id: http://hazelcast.googlecode.com/svn/trunk@666 3f8e66b6-ca9d-11dd-a2b5-e5f827957e07", "file_num_lines": 273, "diff_parsed": {"added": [[32, "import com.hazelcast.impl.CMap.CMapEntry;"], [50, "\t\tPacket request = createRequestPacket(ClusterOperation.ADD_LISTENER, Serializer.toByte(key), null);"], [51, "\t\trequest.setLongValue(includeValue?1:0);"], [65, "\t\treturn (Boolean) doOp(ClusterOperation.CONCURRENT_MAP_EVICT, Serializer.toByte(key), null);"], [69, "\t\tCMapEntry cMapEntry = (CMapEntry)doOp(ClusterOperation.CONCURRENT_MAP_GET_MAP_ENTRY, Serializer.toByte(key), null);"], [70, "\t\tMapEntry<K, V> mapEntry = new ClientMapEntry(cMapEntry,key);"], [71, "\t\treturn mapEntry;"], [74, "\tclass ClientMapEntry implements MapEntry<K, V>{"], [75, "\t\tprivate CMapEntry mapEntry;"], [76, "\t\tprivate K key;"], [77, "\t\tpublic ClientMapEntry(CMapEntry mapEntry, K key) {"], [78, "\t\t\tthis.mapEntry = mapEntry;"], [79, "\t\t\tthis.key = key;"], [80, "\t\t}"], [81, "\t\tpublic long getCost() {"], [82, "\t\t\treturn mapEntry.getCost();"], [83, "\t\t}"], [84, ""], [85, "\t\tpublic long getCreationTime() {"], [86, "\t\t\treturn mapEntry.getCreationTime();"], [87, "\t\t}"], [88, ""], [89, "\t\tpublic long getExpirationTime() {"], [90, "\t\t\treturn mapEntry.getExpirationTime();"], [91, "\t\t}"], [92, ""], [93, "\t\tpublic int getHits() {"], [94, "\t\t\treturn mapEntry.getHits();"], [95, "\t\t}"], [96, ""], [97, "\t\tpublic long getLastAccessTime() {"], [98, "\t\t\treturn mapEntry.getLastAccessTime();"], [99, "\t\t}"], [100, ""], [101, "\t\tpublic long getLastUpdateTime() {"], [102, "\t\t\treturn mapEntry.getLastUpdateTime();"], [103, "\t\t}"], [104, ""], [105, "\t\tpublic long getVersion() {"], [106, "\t\t\treturn mapEntry.getVersion();"], [107, "\t\t}"], [108, ""], [109, "\t\tpublic boolean isValid() {"], [110, "\t\t\treturn mapEntry.isValid();"], [111, "\t\t}"], [112, ""], [113, "\t\tpublic K getKey() {"], [114, "\t\t\treturn key;"], [115, "\t\t}"], [116, ""], [117, "\t\tpublic V getValue() {"], [118, "\t\t\treturn get(key);"], [119, "\t\t}"], [120, ""], [121, "\t\tpublic V setValue(V value) {"], [122, "\t\t\treturn put(key,value);"], [123, "\t\t}"], [124, ""], [125, "\t}"], [126, ""], [212, "\t\treturn (V)doOp(ClusterOperation.CONCURRENT_MAP_GET, Serializer.toByte(key), null);"], [221, "\t\tPacket request = createRequestPacket(ClusterOperation.CONCURRENT_MAP_ITERATE_KEYS, null, null);"], [337, "\t\treturn (V)doOp(ClusterOperation.CONCURRENT_MAP_PUT, Serializer.toByte(key), Serializer.toByte(value));"], [347, "\t\treturn (V)doOp(ClusterOperation.CONCURRENT_MAP_REMOVE, Serializer.toByte(arg0), null);"], [348, "\t}"], [349, ""], [350, "\tprivate Object doOp(ClusterOperation operation, byte[] key, byte[] value) {"], [351, "\t\tPacket request = createRequestPacket(operation, key, value);"], [352, "\t    Packet response = callAndGetResult(request);"], [353, "\t    return getValue(response);"], [354, "\t}"], [355, ""], [356, "\tprivate V getValue(Packet response) {"], [357, "\t\tif(response.getValue()!=null){"], [358, "\t    \treturn (V)Serializer.toObject(response.getValue());"], [359, "\t    }"], [360, "\t    return null;"], [364, "\t\treturn (Integer)doOp(ClusterOperation.CONCURRENT_MAP_SIZE, null, null);"]], "deleted": [[49, "\t\tPacket request = createRequestPacket();"], [50, ""], [51, "\t    request.setOperation(ClusterOperation.ADD_LISTENER);"], [52, "\t    request.setLongValue(includeValue?1:0);"], [53, "\t    request.setKey(Serializer.toByte(key));"], [54, "\t    request.setRedoOnDisConnect(true);"], [68, "\t\t// TODO Auto-generated method stub"], [69, "\t\treturn false;"], [73, "\t\t// TODO Auto-generated method stub"], [74, "\t\treturn null;"], [128, "\t\t// TODO Auto-generated method stub"], [163, "//\t\tMapGetCall mGet = new MapGetCall();"], [164, "\t\tPacket request = createRequestPacket();"], [165, ""], [166, "\t    request.setOperation(ClusterOperation.CONCURRENT_MAP_GET);"], [167, "\t    request.setKey(Serializer.toByte(key));"], [168, ""], [169, "\t    Packet response = callAndGetResult(request);"], [170, "\t    if(response.getValue()!=null){"], [171, "\t    \treturn (V)Serializer.toObject(response.getValue());"], [172, "\t    }"], [173, "\t    return null;"], [182, "\t\tPacket request = createRequestPacket();"], [183, ""], [184, "\t    request.setOperation(ClusterOperation.CONCURRENT_MAP_ITERATE_KEYS);"], [185, ""], [186, ""], [302, "\t    Packet request = createRequestPacket();"], [303, ""], [304, "\t    request.setTxnId(0);"], [305, "\t    request.setOperation(ClusterOperation.CONCURRENT_MAP_PUT);"], [306, "\t    request.setKey(Serializer.toByte(key));"], [307, "\t    request.setValue(Serializer.toByte(value));"], [308, ""], [309, ""], [310, "\t    Packet response = callAndGetResult(request);"], [311, "\t    if(response.getValue()!=null){"], [312, "\t    \treturn (V)Serializer.toObject(response.getValue());"], [313, "\t    }"], [314, "\t    return null;"], [324, "\t\t// TODO Auto-generated method stub"], [325, "\t\treturn null;"], [329, "\t\t// TODO Auto-generated method stub"], [330, "\t\treturn 0;"]]}, "num_lines_added": 78, "num_lines_removed": 44}