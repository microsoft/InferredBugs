{"hash": "f9df686941ecd917bba8ef37aa4fc9874a0f317c", "message": "Optimize cache", "file_num_lines": 132, "diff_parsed": {"added": [[39, "    private static final String INDEX_PAGE_HTML = \"/index.html\";"], [55, "    /**"], [56, "     * \u5904\u7406\u9759\u6001\u5316\u6587\u4ef6,\u4ec5\u4ec5\u7f13\u5b58\u6587\u7ae0\u9875(\u53d8\u5316\u8f83\u5c0f)"], [57, "     */"], [58, "    private static boolean catGeneratorHtml(String targetUri) {"], [59, "        return \"/\".equals(targetUri) || (targetUri.startsWith(\"/\" + Constants.getArticleUri()) && targetUri.endsWith(\".html\"));"], [60, "    }"], [61, ""], [80, "            response = new MyHttpServletResponseWrapper(response, responseRenderPrintWriter);"], [83, "                    if (catGeneratorHtml(target)) {"], [87, "                            if (\"/\".equals(path)) {"], [88, "                                path = INDEX_PAGE_HTML;"], [89, "                            }"], [103, "                if (\"/\".equals(target) && Constants.isStaticHtmlStatus()) {"], [104, "                    responseHtmlFile(target, request, response, isHandled, responseRenderPrintWriter, new File(CACHE_HTML_PATH + I18nUtil.getAcceptLanguage(request) + INDEX_PAGE_HTML));"]], "deleted": [[17, "import com.zrlog.web.token.AdminTokenThreadLocal;"], [19, "import org.apache.catalina.connector.Response;"], [20, "import org.apache.catalina.connector.ResponseFacade;"], [24, "import javax.servlet.ServletResponse;"], [27, "import javax.servlet.http.HttpServletResponseWrapper;"], [31, "import java.io.PrintWriter;"], [78, "            response = new MyHttpServletResponseWrapper(response,responseRenderPrintWriter);"], [81, "                    // \u5904\u7406\u9759\u6001\u5316\u6587\u4ef6,\u4ec5\u4ec5\u7f13\u5b58\u6587\u7ae0\u9875(\u53d8\u5316\u8f83\u5c0f)"], [82, "                    if (target.endsWith(\".html\") && target.startsWith(\"/\" + Constants.getArticleUri())) {"], [99, "                if (\"/\".equals(target) && Constants.isStaticHtmlStatus() && adminTokenVO == null) {"], [100, "                    responseHtmlFile(target, request, response, isHandled, responseRenderPrintWriter, new File(CACHE_HTML_PATH + I18nUtil.getAcceptLanguage(request) + \"/index.html\"));"]]}, "num_lines_added": 15, "num_lines_removed": 11}