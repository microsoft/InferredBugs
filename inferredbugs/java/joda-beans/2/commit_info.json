{"hash": "553bab90c267c9eaab884897ff401389573ecfaf", "message": "Enhance, test and fix meta-types\n\nWhere a meta-type is used, ensure it works\nFixes #60", "file_num_lines": 319, "diff_parsed": {"added": [[260, "            // if key type is known and convertible use short key format, else use full bean format"], [264, "                keyBean = true;"], [287, "                writeKeyElement(currentIndent + settings.getIndent(), key, itemIterator);"], [288, "                writeValueElement(currentIndent + settings.getIndent(), ITEM, new StringBuilder(), itemIterator);"], [308, "    private void writeKeyElement(final String currentIndent, Object key, final SerIterator itemIterator) {"], [309, "        if (key == null) {"], [310, "            throw new IllegalArgumentException(\"Unable to write map key as it cannot be null: \" + key);"], [311, "        }"], [312, "        if (Bean.class.isAssignableFrom(itemIterator.keyType())) {"], [313, "            writeBean(currentIndent, ITEM, new StringBuilder(), itemIterator.keyType(), (Bean) key);"], [314, "        } else {"], [315, "            // this case covers where the key type is not known, such as an Object meta-property"], [316, "            try {"], [317, "                writeSimple(currentIndent, ITEM, new StringBuilder(), Object.class, key);"], [318, "            } catch (RuntimeException ex) {"], [319, "                throw new IllegalArgumentException(\"Unable to write map as declared key type is neither a bean nor a simple type: \" + itemIterator.keyType().getName(), ex);"], [320, "            }"], [321, ""], [322, "        }"]], "deleted": [[262, "            } else if (Bean.class.isAssignableFrom(itemIterator.keyType())) {"], [263, "                keyBean = true;"], [265, "                throw new IllegalArgumentException(\"Unable to write map as declared key type is neither a bean nor a simple type: \" + itemIterator.keyType().getName());"], [287, "                if (key == null) {"], [288, "                    throw new IllegalArgumentException(\"Unable to write map key as it cannot be null: \" + key);"], [289, "                }"], [291, "                writeKeyValueElement(currentIndent + settings.getIndent(), key, itemIterator);"], [311, "    private void writeKeyValueElement(final String currentIndent, Object key, final SerIterator itemIterator) {"], [312, "        writeBean(currentIndent, ITEM, new StringBuilder(), itemIterator.keyType(), (Bean) key);"], [313, "        writeValueElement(currentIndent, ITEM, new StringBuilder(), itemIterator);"]]}, "num_lines_added": 19, "num_lines_removed": 10}