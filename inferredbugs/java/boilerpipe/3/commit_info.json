{"hash": "2ebb16c95f2c10f07cb8ace90850a520f1d56098", "message": "Fixed charset detection code", "file_num_lines": 49, "diff_parsed": {"added": [[10, "import java.util.regex.Matcher;"], [11, "import java.util.regex.Pattern;"], [23, "\tprivate static final Pattern PAT_CHARSET = Pattern.compile(\"charset=([^; ]+)$\");"], [24, ""], [33, "\t\tfinal String ct = conn.getContentType();"], [36, "\t\tif (ct != null) {"], [37, "\t\t\tMatcher m = PAT_CHARSET.matcher(ct);"], [38, "\t\t\tif(m.find()) {"], [39, "\t\t\t\tfinal String charset = m.group(1);"], [40, "\t\t\t\ttry {"], [41, "\t\t\t\t\tcs = Charset.forName(charset);"], [42, "\t\t\t\t} catch (UnsupportedCharsetException e) {"], [43, "\t\t\t\t\t// keep default"], [44, "\t\t\t\t}"]], "deleted": [[29, "\t\tfinal String charset = conn.getContentEncoding();"], [32, "\t\tif (charset != null) {"], [33, "\t\t\ttry {"], [34, "\t\t\t\tcs = Charset.forName(charset);"], [35, "\t\t\t} catch (UnsupportedCharsetException e) {"], [36, "\t\t\t\t// keep default"]]}, "num_lines_added": 14, "num_lines_removed": 6}