{"hash": "283104b20ad6028936e56b807884b8fbe38d8d14", "message": "Fix AMQP reconnection issue for CBS connection (single and multiplex)", "file_num_lines": 528, "diff_parsed": {"added": [[64, "    private int currentReconnectionAttempt;"], [73, "     * @param currentReconnectionAttempt The current value of reconnection counter"], [76, "    public AmqpsIotHubConnection(DeviceClientConfig config, int currentReconnectionAttempt) throws IOException"], [110, "        this.currentReconnectionAttempt = currentReconnectionAttempt;"], [111, ""], [179, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [180, ""], [220, ""], [221, "        logger.LogDebug(\"Exited from method %s\", logger.getMethodName());"], [230, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [231, ""], [254, ""], [265, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [266, ""], [273, ""], [274, "        logger.LogDebug(\"Exited from method %s\", logger.getMethodName());"], [284, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [285, ""], [292, ""], [293, "        logger.LogDebug(\"Exited from method %s\", logger.getMethodName());"], [307, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [308, ""], [348, ""], [349, "        logger.LogDebug(\"Exited from method %s\", logger.getMethodName());"], [358, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [359, ""], [376, ""], [377, "        logger.LogDebug(\"Exited from method %s\", logger.getMethodName());"], [391, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [392, ""], [421, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [422, ""], [470, ""], [507, ""], [508, "            for (ServerListener listener : listeners)"], [510, "                listener.reconnect();"], [513, ""], [525, ""], [553, ""], [569, ""], [581, ""], [584, ""], [638, ""], [673, ""], [677, ""], [707, ""], [721, ""], [731, ""], [743, ""], [748, ""], [775, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [776, ""], [791, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [792, ""], [803, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [804, ""], [816, "        logger.LogInfo(\"Lost connection to the server. Reconnection attempt %s, method name is %s \", this.currentReconnectionAttempt, logger.getMethodName());"], [819, "            Thread.sleep(TransportUtils.generateSleepInterval(this.currentReconnectionAttempt));"], [835, "        logger.LogDebug(\"Entered in method %s\", logger.getMethodName());"], [836, ""]], "deleted": [[64, "    private int currentReconnectionAttempt = 1;"], [75, "    public AmqpsIotHubConnection(DeviceClientConfig config) throws IOException"], [476, "            try"], [477, "            {"], [478, "                openAsync();"], [479, "            }"], [480, "            catch (IOException e)"], [482, "                // Codes_SRS_AMQPSIOTHUBCONNECTION_12_014: [The function shall log the error if openAsync failed.]"], [483, "                logger.LogDebug(\"onReactorFinal has thrown exception: %s\", e.getMessage());"], [769, "        currentReconnectionAttempt++;"], [770, "        logger.LogInfo(\"Lost connection to the server. Reconnection attempt %s, method name is %s \", currentReconnectionAttempt, logger.getMethodName());"], [773, "            Thread.sleep(TransportUtils.generateSleepInterval(currentReconnectionAttempt));"]]}, "num_lines_added": 60, "num_lines_removed": 12}