{"hash": "3ad1d740dfaafe53d85bc99912a2376443adaffb", "message": "add support for pass moves.\nthis should be in format ;B[tt]\n\nif no color is found,\ndon't return, but continue the loop.\nand use a try/finally to assure closing the writer.", "file_num_lines": 143, "diff_parsed": {"added": [[133, ""], [134, "        try"], [135, "        {"], [136, "            // add SGF header"], [137, "            StringBuilder builder = new StringBuilder(String.format(\"(;KM[7.5]AP[Lizzie: %s]\", Lizzie.lizzieVersion));"], [138, ""], [139, "            // move to the first move"], [140, "            BoardHistoryList history = Lizzie.board.getHistory();"], [141, "            while (history.previous() != null);"], [142, ""], [143, "            // replay moves, and convert them to tags."], [144, "            // *  format: \";B[xy]\" or \";W[xy]\""], [145, "            // *  with 'xy' = coordinates ; or 'tt' for pass."], [146, "            BoardData data;"], [147, "            while ((data = history.next()) != null) {"], [148, ""], [149, "                String stone;"], [150, "                if (Stone.BLACK.equals(data.lastMoveColor)) stone = \"B\";"], [151, "                else if (Stone.WHITE.equals(data.lastMoveColor)) stone = \"W\";"], [152, "                else continue;"], [153, ""], [154, "                char x = data.lastMove == null ? 't' : (char) (data.lastMove[0] + 'a');"], [155, "                char y = data.lastMove == null ? 't' : (char) (data.lastMove[1] + 'a');"], [156, ""], [157, "                builder.append(String.format(\";%s[%c%c]\", stone, x, y));"], [159, ""], [160, "            // close file"], [161, "            builder.append(')');"], [162, "            writer.append(builder.toString());"], [163, "        }"], [164, "        finally"], [165, "        {"], [166, "            writer.close();"], [167, "            fp.close();"]], "deleted": [[133, "        StringBuilder builder = new StringBuilder(String.format(\"(;KM[7.5]AP[Lizzie: %s]\", Lizzie.lizzieVersion));"], [134, "        BoardHistoryList history = Lizzie.board.getHistory();"], [135, "        while (history.previous() != null) ;"], [136, "        BoardData data = null;"], [137, "        while ((data = history.next()) != null) {"], [138, "            StringBuilder tag = new StringBuilder(\";\");"], [139, "            if (data.lastMoveColor.equals(Stone.BLACK)) {"], [140, "                tag.append(\"B\");"], [141, "            } else if (data.lastMoveColor.equals(Stone.WHITE)) {"], [142, "                tag.append(\"W\");"], [143, "            } else {"], [144, "                return false;"], [146, "            char x = (char) data.lastMove[0], y = (char) data.lastMove[1];"], [147, "            x += 'a';"], [148, "            y += 'a';"], [149, "            tag.append(String.format(\"[%c%c]\", x, y));"], [150, "            builder.append(tag);"], [152, "        builder.append(')');"], [153, "        writer.append(builder.toString());"], [154, "        writer.close();"], [155, "        fp.close();"]]}, "num_lines_added": 34, "num_lines_removed": 21}