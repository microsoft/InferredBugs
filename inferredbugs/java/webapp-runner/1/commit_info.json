{"hash": "6c327ef582308e1ffc15858c47696f625d063539", "message": "update redis session manager to version .5, remove support for multiple war files due to issues with distributed session management", "file_num_lines": 87, "diff_parsed": {"added": [[85, "            System.out.println(\"WARNING: multiple paths are specified, but no longer supported. First path will be used.\");"], [87, ""], [88, "        // Get the first path"], [89, "        String path = commandLineParams.paths.get(0);"], [93, "        File war = new File(path);"], [94, ""], [95, "        if (!war.exists()) {"], [96, "            System.err.println(\"The specified path \\\"\" + path + \"\\\" does not exist.\");"], [97, "            jCommander.usage();"], [98, "            System.exit(1);"], [99, "        }"], [100, ""], [101, "        // Use the commandline context-path (or default)"], [102, "        // warn if the contextPath doesn't start with a '/'. This causes issues serving content at the context root."], [103, "        if (commandLineParams.contextPath.length() > 0 && !commandLineParams.contextPath.startsWith(\"/\")) {"], [104, "            System.out.println(\"WARNING: You entered a path: [\" + commandLineParams.contextPath + \"]. Your path should start with a '/'. Tomcat will update this for you, but you may still experience issues.\");"], [106, ""], [107, "        final String ctxName = commandLineParams.contextPath;"], [108, ""], [109, "        System.out.println(\"Adding Context \" + ctxName + \" for \" + war.getPath());"], [110, ""], [111, "        ctx = tomcat.addWebapp(ctxName, war.getAbsolutePath());"], [131, "        if(commandLineParams.contextXml != null) {"]], "deleted": [[85, "            System.out.println(\"FYI... Since you specified more than one path, the context paths will be automatically set to the name of the path without the extension. A path that resolves to a context path of \\\"/ROOT\\\" will be replaced with \\\"/\\\"\");"], [86, ""], [87, "            if(commandLineParams.contextPath != null) {"], [88, "                System.out.println(\"WARNING: context-path is ignored when more than one path or war file is specified\");"], [89, "            }"], [90, "            if(commandLineParams.contextXml != null) {"], [91, "                System.out.println(\"WARNING: context-xml is ignored when more than one path or war file is specified\");"], [92, "            }"], [97, "        for (String path : commandLineParams.paths) {"], [98, "            File war = new File(path);"], [99, ""], [100, "            if (!war.exists()) {"], [101, "                System.err.println(\"The specified path \\\"\" + path + \"\\\" does not exist.\");"], [102, "                jCommander.usage();"], [103, "                System.exit(1);"], [104, "            }"], [105, ""], [106, "            String ctxName = \"\";"], [107, ""], [108, "            // Use the commandline context-path (or default) if there is only one war"], [109, "            if (commandLineParams.paths.size() == 1) {"], [110, "                // warn if the contextPath doesn't start with a '/'. This causes issues serving content at the context root."], [111, "                if (commandLineParams.contextPath.length() > 0 && !commandLineParams.contextPath.startsWith(\"/\")) {"], [112, "                    System.out.println(\"WARNING: You entered a path: [\" + commandLineParams.contextPath + \"]. Your path should start with a '/'. Tomcat will update this for you, but you may still experience issues.\");"], [113, "                }"], [114, ""], [115, "                ctxName = commandLineParams.contextPath;"], [116, ""], [117, "            }"], [118, "            else {"], [119, "                ctxName = \"/\" + FilenameUtils.removeExtension(war.getName());"], [120, ""], [121, "                if (ctxName.equals(\"/ROOT\") || (commandLineParams.paths.size() == 1)) {"], [122, "                    ctxName = \"/\";"], [123, "                }"], [124, "            }"], [125, ""], [126, "            System.out.println(\"Adding Context \" + ctxName + \" for \" + war.getPath());"], [127, "            //Context ctx = tomcat.addWebapp(ctxName, war.getAbsolutePath());"], [128, ""], [129, ""], [130, "            ctx = tomcat.addWebapp(ctxName, war.getAbsolutePath());"], [134, "            final String ctxName = ctx.getName();"], [152, "        if(commandLineParams.contextXml != null && commandLineParams.paths.size() == 1) {"]]}, "num_lines_added": 23, "num_lines_removed": 44}