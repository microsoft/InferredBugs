{"hash": "4cfd3c373f49f8e56f53ae28c1401cc2f528e451", "message": "Implemented parse from URL.", "file_num_lines": 43, "diff_parsed": {"added": [[3, "import org.apache.commons.lang.Validate;"], [4, ""], [5, "import java.io.*;"], [6, "import java.net.URL;"], [7, "import java.net.HttpURLConnection;"], [23, "        InputStream inStream = new FileInputStream(in);"], [24, "        String data = readInputStream(inStream, charsetName);"], [25, "        inStream.close();"], [26, "        return data;"], [27, "    }"], [28, ""], [29, "    /**"], [30, "     Fetches a URL and gets as a string."], [31, "     @param url"], [32, "     @param timeoutMillis"], [33, "     @return"], [34, "     @throws IOException"], [35, "     */"], [36, "    static String load(URL url, int timeoutMillis) throws IOException {"], [37, "        String protocol = url.getProtocol();"], [38, "        Validate.isTrue(protocol.equals(\"http\") || protocol.equals(\"https\"), \"Only http & https protocols supported\");"], [39, ""], [40, "        HttpURLConnection conn = (HttpURLConnection) url.openConnection();"], [41, "        conn.setInstanceFollowRedirects(true);"], [42, "        conn.setConnectTimeout(timeoutMillis);"], [43, "        conn.setReadTimeout(timeoutMillis);"], [44, "        conn.connect();"], [45, ""], [46, "        int res = conn.getResponseCode();"], [47, "        if (res != HttpURLConnection.HTTP_OK)"], [48, "            throw new IOException(res + \" error loading URL \" + url.toString());"], [49, "        InputStream inStream = new BufferedInputStream(conn.getInputStream());"], [50, "        String charSet = \"UTF-8\"; // todo[must]: get from content-encoding, or http-equiv (two-pass?)"], [51, ""], [52, "        String data = readInputStream(inStream, charSet);"], [53, "        inStream.close();"], [54, "        return data;"], [55, "    }"], [56, ""], [57, "    private static String readInputStream(InputStream inStream, String charsetName) throws IOException {"], [67, ""], [69, ""], [70, "        return data.toString();"], [73, ""]], "deleted": [[3, "import java.io.File;"], [4, "import java.io.FileInputStream;"], [5, "import java.io.IOException;"], [6, "import java.io.InputStream;"], [7, "import java.io.InputStreamReader;"], [8, "import java.io.Reader;"], [26, "        InputStream inStream = new FileInputStream(in);"], [34, ""], [36, ""], [37, "        return data.toString();"]]}, "num_lines_added": 44, "num_lines_removed": 10}