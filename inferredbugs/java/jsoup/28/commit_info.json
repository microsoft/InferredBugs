{"hash": "77966f79996f3fc4c7828b4d02a926c071faf040", "message": "Some redirect tests", "file_num_lines": 372, "diff_parsed": {"added": [[10, "import org.jsoup.integration.servlets.RedirectServlet;"], [29, "import static org.junit.Assert.assertNull;"], [39, "    public static void setUp() {"], [45, "    public static void tearDown() {"], [85, "        final Element first = doc.select(\"th:contains(\" + key + \") + td\").first();"], [86, "        return first != null ? first.text() : null;"], [405, "        assertTrue(threw);"], [420, "        assertTrue(threw);"], [421, "    }"], [423, "    @Test public void handlesRedirect() throws IOException {"], [424, "        Document doc = Jsoup.connect(RedirectServlet.Url)"], [425, "            .data(RedirectServlet.LocationParam, HelloServlet.Url)"], [426, "            .get();"], [427, ""], [428, "        Element p = doc.selectFirst(\"p\");"], [429, "        assertEquals(\"Hello, World!\", p.text());"], [430, ""], [431, "        assertEquals(HelloServlet.Url, doc.location());"], [432, "    }"], [433, ""], [434, "    @Test public void handlesEmptyRedirect() throws IOException {"], [435, "        boolean threw = false;"], [436, "        try {"], [437, "            Connection.Response res = Jsoup.connect(RedirectServlet.Url)"], [438, "                .execute();"], [439, "        } catch (IOException e) {"], [440, "            assertTrue(e.getMessage().contains(\"Too many redirects\"));"], [441, "            threw = true;"], [442, "        }"], [443, "        assertTrue(threw);"], [444, "    }"], [445, ""], [446, "    @Test public void doesNotPostFor302() throws IOException {"], [447, "        final Document doc = Jsoup.connect(RedirectServlet.Url)"], [448, "            .data(\"Hello\", \"there\")"], [449, "            .data(RedirectServlet.LocationParam, EchoServlet.Url)"], [450, "            .post();"], [451, ""], [452, "        assertEquals(EchoServlet.Url, doc.location());"], [453, "        assertEquals(\"GET\", ihVal(\"Method\", doc));"], [454, "        assertNull(ihVal(\"Hello\", doc)); // data not sent"], [455, "    }"], [456, ""], [457, "    @Test public void doesPostFor307() throws IOException {"], [458, "        final Document doc = Jsoup.connect(RedirectServlet.Url)"], [459, "            .data(\"Hello\", \"there\")"], [460, "            .data(RedirectServlet.LocationParam, EchoServlet.Url)"], [461, "            .data(RedirectServlet.CodeParam, \"307\")"], [462, "            .post();"], [463, ""], [464, "        assertEquals(EchoServlet.Url, doc.location());"], [465, "        assertEquals(\"POST\", ihVal(\"Method\", doc));"], [466, "        assertEquals(\"there\", ihVal(\"Hello\", doc));"]], "deleted": [[37, "    public static void setUp() throws Exception {"], [43, "    public static void tearDown() throws Exception {"], [83, "        return doc.select(\"th:contains(\" + key + \") + td\").first().text();"], [402, "        assertEquals(true, threw);"], [417, "        assertEquals(true, threw);"]]}, "num_lines_added": 53, "num_lines_removed": 5}