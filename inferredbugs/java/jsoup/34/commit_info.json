{"hash": "5a570cf31e078c9b3865f93a37fbbde68c9799df", "message": "Much faster perf when bulk inserting a complete node list into anothe r node\n\nFixes #1281", "file_num_lines": 397, "diff_parsed": {"added": [[5, "import org.jsoup.internal.StringUtil;"], [11, "import java.util.ArrayList;"], [12, "import java.util.Arrays;"], [13, "import java.util.Collections;"], [14, "import java.util.Iterator;"], [15, "import java.util.LinkedList;"], [16, "import java.util.List;"], [242, "     * Delete all this node's children."], [243, "     * @return this node, for chaining"], [244, "     */"], [245, "    public abstract Node empty();"], [246, ""], [247, ""], [248, "    /**"], [469, "        Validate.notNull(children);"], [470, "        if (children.length == 0) {"], [471, "            return;"], [472, "        }"], [475, "        // fast path - if used as a wrap (index=0, children = child[0].parent.children - do inplace"], [476, "        final Node firstParent = children[0].parent();"], [477, "        if (firstParent != null && firstParent.childNodeSize() == children.length) {"], [478, "            boolean sameList = true;"], [479, "            final List<Node> firstParentNodes = firstParent.childNodes();"], [480, "            // identity check contents to see if same"], [481, "            int i = children.length;"], [482, "            while (i-- > 0) {"], [483, "                if (children[i] != firstParentNodes.get(i)) {"], [484, "                    sameList = false;"], [485, "                    break;"], [486, "                }"], [487, "            }"], [488, "            firstParent.empty();"], [489, "            nodes.addAll(index, Arrays.asList(children));"], [490, "            i = children.length;"], [491, "            while (i-- > 0) {"], [492, "                children[i].parentNode = this;"], [493, "            }"], [494, "            reindexChildren(index);"], [495, "            return;"], [496, "        }"], [497, ""], [498, "        Validate.noNullElements(children);"]], "deleted": [[4, "import org.jsoup.internal.StringUtil;"], [11, "import java.util.*;"], [457, "        Validate.noNullElements(children);"]]}, "num_lines_added": 42, "num_lines_removed": 3}