{"hash": "838eb08c14eeaa072ca8c644b28f08f3cd6b9ecb", "message": "\u589e\u52a0RpcConfig", "file_num_lines": 66, "diff_parsed": {"added": [[36, "    @Autowired"], [37, "    private RpcConfig rpcConfig;"], [41, "        worldRpcConnectManager.initServers(rpcConfig.getSdWorldServers());"], [46, "        gameRpcConnecetMananger.initServers(rpcConfig.getSdGameServers());"], [51, "        dbRpcConnnectManngeer.initServers(rpcConfig.getSdDbServers());"]], "deleted": [[4, "import com.wolf.shoot.common.constant.GlobalConstants;"], [7, "import com.wolf.shoot.common.util.FileUtil;"], [8, "import com.wolf.shoot.common.util.JdomUtils;"], [14, "import org.jdom2.Element;"], [19, "import java.util.ArrayList;"], [20, "import java.util.HashMap;"], [21, "import java.util.List;"], [22, "import java.util.Map;"], [23, ""], [35, "    protected List<SdServer> sdWorldServers;"], [36, "    protected List<SdServer> sdGameServers;"], [37, "    protected List<SdServer> sdDbServers;"], [48, "    private SdRpcServiceProvider sdRpcServiceProvider;"], [52, "        worldRpcConnectManager.initServers(sdWorldServers);"], [57, "        gameRpcConnecetMananger.initServers(sdGameServers);"], [62, "        dbRpcConnnectManngeer.initServers(sdDbServers);"], [84, ""], [85, "        Element rootElement = JdomUtils.getRootElemet(FileUtil.getConfigURL(GlobalConstants.ConfigFile.RPC_SERVER_CONFIG).getFile());"], [86, ""], [87, "        Map<Integer, SdServer> serverMap = new HashMap<>();"], [88, ""], [89, "        List<SdServer> sdWorldServers = new ArrayList<SdServer>();"], [90, "        Element element = rootElement.getChild(BOEnum.WORLD.toString().toLowerCase());"], [91, "        List<Element> childrenElements = element.getChildren(\"server\");"], [92, "        for (Element childElement : childrenElements) {"], [93, "            SdServer sdServer = new SdServer();"], [94, "            sdServer.load(childElement);"], [95, "            sdWorldServers.add(sdServer);"], [96, "        }"], [97, ""], [98, "        List<SdServer> sdGameServers = new ArrayList<SdServer>();"], [99, "        element = rootElement.getChild(BOEnum.GAME.toString().toLowerCase());"], [100, "        childrenElements = element.getChildren(\"server\");"], [101, "        for (Element childElement : childrenElements) {"], [102, "            SdServer sdServer = new SdServer();"], [103, "            sdServer.load(childElement);"], [104, "            sdGameServers.add(sdServer);"], [105, "        }"], [106, ""], [107, "        List<SdServer> sdDbServers = new ArrayList<SdServer>();"], [108, "        element = rootElement.getChild(BOEnum.DB.toString().toLowerCase());"], [109, "        childrenElements = element.getChildren(\"server\");"], [110, "        for (Element childElement : childrenElements) {"], [111, "            SdServer sdServer = new SdServer();"], [112, "            sdServer.load(childElement);"], [113, "            sdDbServers.add(sdServer);"], [114, "        }"], [115, ""], [116, "        synchronized (this.lock) {"], [117, "            this.sdWorldServers = sdWorldServers;"], [118, "            this.sdGameServers = sdGameServers;"], [119, "            this.sdDbServers = sdDbServers;"], [120, "        }"], [121, ""], [125, ""], [126, ""], [127, "        SdRpcServiceProvider sdRpcServiceProvider = new SdRpcServiceProvider();"], [128, "        rootElement = JdomUtils.getRootElemet(FileUtil.getConfigURL(GlobalConstants.ConfigFile.RPC_SERVEICE_CONFIG).getFile());"], [129, "        childrenElements = rootElement.getChildren(\"service\");"], [130, "        for (Element childElement : childrenElements) {"], [131, "            sdRpcServiceProvider.load(childElement);"], [132, "        }"], [133, ""], [134, "        synchronized (this.lock) {"], [135, "            this.sdRpcServiceProvider = sdRpcServiceProvider;"], [136, "        }"], [150, "    public SdRpcServiceProvider getSdRpcServiceProvider() {"], [151, "        return sdRpcServiceProvider;"], [152, "    }"], [153, ""], [154, "    public void setSdRpcServiceProvider(SdRpcServiceProvider sdRpcServiceProvider) {"], [155, "        this.sdRpcServiceProvider = sdRpcServiceProvider;"], [156, "    }"]]}, "num_lines_added": 5, "num_lines_removed": 73}