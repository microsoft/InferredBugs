{"hash": "d438c888eed5d908120400e5d66b20caf5c74d5e", "message": "kayak-core optimizations and cleanup", "file_num_lines": 412, "diff_parsed": {"added": [[22, "import java.util.Collections;"], [39, "    private final Set<Subscription> subscriptionsRAW = Collections.synchronizedSet(new HashSet<Subscription>());"], [40, "    private final Set<Subscription> subscriptionsBCM = Collections.synchronizedSet(new HashSet<Subscription>());"], [50, "    private final Set<Integer> subscribedIDs = Collections.synchronizedSet(new HashSet<Integer>());;"], [51, "    private final HashSet<StatisticsReceiver> statisticsReceivers;"], [233, "            synchronized(subscriptionsRAW) {"], [234, "                subscriptionsRAW.add(s);"], [235, "            }"], [239, "            synchronized(subscriptionsBCM) {"], [240, "                subscriptionsBCM.add(s);"], [241, "            }"], [251, "            synchronized(subscribedIDs) {"], [252, "                if(!subscribedIDs.contains(id)) {"], [253, "                    subscribedIDs.add(id);"], [254, "                    if (bcmConnection != null && bcmConnection.isConnected()) {"], [255, "                        bcmConnection.subscribeTo(id, 0, 0);"], [256, "                    } else {"], [257, "                        logger.log(Level.WARNING, \"A BCM subscription was made but no BCM connection is present\");"], [258, "                    }"], [261, "        } else {"], [262, "            logger.log(Level.WARNING, \"Unregistered subscription tried to subscribe!\");"], [270, "        } else {"], [271, "            logger.log(Level.WARNING, \"Unregistered subscription tried to unsubscribe!\");"], [310, "            synchronized(subscribedIDs) {"], [311, "                for(Integer identifier : s.getAllIdentifiers()) {"], [312, "                    subscribedIDs.add(identifier);"], [313, "                }"], [330, "        Boolean found = Boolean.FALSE;"], [331, "        synchronized(subscriptionsBCM) {"], [332, "            for (Subscription subscription : subscriptionsBCM) {"], [333, "                if (subscription.includes(identifier)) {"], [334, "                    found = Boolean.TRUE;"], [335, "                    break;"], [336, "                }"], [340, "            synchronized(subscribedIDs) {"], [341, "                subscribedIDs.remove(identifier);"], [342, "            }"], [516, "            synchronized(subscribedIDs) {"], [517, "                for (Integer identifier : subscribedIDs) {"], [518, "                    bcmConnection.subscribeTo(identifier, 0, 0);"], [519, "                }"]], "deleted": [[38, "    private HashSet<Subscription> subscriptionsRAW;"], [39, "    private HashSet<Subscription> subscriptionsBCM;"], [49, "    private HashSet<Integer> subscribedIDs;"], [50, "    private HashSet<StatisticsReceiver> statisticsReceivers;"], [223, "        subscriptionsRAW = new HashSet<Subscription>();"], [224, "        subscriptionsBCM = new HashSet<Subscription>();"], [226, "        subscribedIDs = new HashSet<Integer>();"], [235, "            subscriptionsRAW.add(s);"], [239, "            subscriptionsBCM.add(s);"], [249, "            if(!subscribedIDs.contains(id)) {"], [250, "                subscribedIDs.add(id);"], [251, "                if (bcmConnection != null && bcmConnection.isConnected()) {"], [252, "                    bcmConnection.subscribeTo(id, 0, 0);"], [253, "                } else {"], [254, "                    logger.log(Level.WARNING, \"A BCM subscription was made but no BCM connection is present\");"], [302, ""], [303, "            for(Integer identifier : s.getAllIdentifiers()) {"], [304, "                subscribedIDs.add(identifier);"], [321, "        Boolean found = false;"], [322, "        for (Subscription subscription : subscriptionsBCM) {"], [323, "            if (subscription.includes(identifier)) {"], [324, "                found = true;"], [325, "                break;"], [329, "            subscribedIDs.remove(identifier);"], [503, "            for (Integer identifier : subscribedIDs) {"], [504, "                bcmConnection.subscribeTo(identifier, 0, 0);"]]}, "num_lines_added": 41, "num_lines_removed": 26}