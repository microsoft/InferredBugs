{"hash": "848866686e7ac7f5102f3b39acefda5a74342992", "message": "Fix Cloud Events support for Message functions\n\nEnsured Cloud Event completness by adding assertion for required attributes as well as generation of default values for attributes such as ID and SPECVERSION", "file_num_lines": 72, "diff_parsed": {"added": [[23, "import org.springframework.cloud.function.context.message.MessageUtils;"], [40, " * @since 3.1"], [55, "\t\tif (message.getHeaders().containsKey(MessageUtils.MESSAGE_TYPE)"], [56, "\t\t\t\t&& message.getHeaders().get(MessageUtils.MESSAGE_TYPE).equals(CloudEventMessageUtils.CLOUDEVENT_VALUE)) {"], [69, "\t\tMessage<?> resultMessage = result instanceof Message ? (Message<?>) result : null;"], [71, "\t\t\tCloudEventMessageBuilder<?> messageBuilder;"], [72, "\t\t\tif (result instanceof Message) {"], [73, "\t\t\t\tmessageBuilder = CloudEventMessageBuilder.fromMessage((Message<?>) result);"], [74, "\t\t\t}"], [75, "\t\t\telse {"], [76, "\t\t\t\tmessageBuilder = CloudEventMessageBuilder"], [77, "\t\t\t\t\t\t.withData(result)"], [78, "\t\t\t\t\t\t.setId(UUID.randomUUID().toString())"], [79, "\t\t\t\t\t\t.setSource(URI.create(\"http://spring.io/\" + getApplicationName()))"], [80, "\t\t\t\t\t\t.setType(result.getClass().getName());"], [81, "\t\t\t}"], [91, "\t\telse if (!(result instanceof Message<?>)) {"], [94, ""]], "deleted": [[39, " * @since 2.0"], [54, "\t\tif (message.getHeaders().containsKey(\"message-type\") && message.getHeaders().get(\"message-type\").equals(\"cloudevent\")) {"], [67, "\t\tMessage<?> resultMessage = null;"], [69, "\t\t\tCloudEventMessageBuilder<?> messageBuilder = CloudEventMessageBuilder"], [70, "\t\t\t\t.withData(result)"], [71, "\t\t\t\t.setId(UUID.randomUUID().toString())"], [72, "\t\t\t\t.setSource(URI.create(\"http://spring.io/\" + getApplicationName()))"], [73, "\t\t\t\t.setType(result.getClass().getName());"], [83, "\t\telse {"]]}, "num_lines_added": 18, "num_lines_removed": 9}