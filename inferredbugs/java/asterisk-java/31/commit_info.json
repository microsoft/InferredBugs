{"hash": "7b1eebdcf48e70a20c9f00b038da137859c39b5b", "message": "It is possible that one User or Channel can have sevaeral dialing channels", "file_num_lines": 726, "diff_parsed": {"added": [[104, "    private final List <AsteriskChannel> dialedChannels;"], [106, "    private final List <AsteriskChannel> dialingChannels;"], [109, "     * If this channel is bridged to another channel, the linkedChannels contains"], [110, " the channel this channel is bridged with."], [112, "    private final List <AsteriskChannel> linkedChannels;"], [199, "        this.dialedChannels = new ArrayList<AsteriskChannel>();"], [200, "        this.dialingChannels = new ArrayList<AsteriskChannel>();"], [201, "        this.linkedChannels = new ArrayList<AsteriskChannel>();"], [477, "    public List <AsteriskChannel> getDialedChannels()"], [479, "        final List<AsteriskChannel> copy;"], [480, ""], [481, "        synchronized (dialedChannels)"], [482, "        {"], [483, "            copy = new ArrayList<AsteriskChannel>(dialedChannels);"], [484, "        }"], [485, ""], [486, "        return copy;"], [488, "/* dialed channels */"], [490, "    public AsteriskChannel getDialedChannel()"], [491, "    {"], [492, "        synchronized(dialedChannels) {"], [493, "           for (AsteriskChannel channel:dialedChannels) {"], [494, "                if (channel != null) return channel;"], [495, "            }"], [496, "        }"], [497, "        return null;"], [498, "    }"], [499, ""], [514, "        final AsteriskChannel oldDialedChannel;"], [515, "        synchronized(dialedChannels) {"], [516, "          if (dialedChannels.isEmpty()) oldDialedChannel = null;"], [517, "          else  oldDialedChannel = dialedChannels.get(dialedChannels.size()-1);"], [518, "          dialedChannels.add(dialedChannel);"], [519, "        }"], [527, ""], [532, ""], [535, "        synchronized(dialingChannels) {"], [536, "          if (dialingChannels.isEmpty()) return null;"], [537, "          return dialingChannels.get(0);"], [538, "        }"], [543, "        final AsteriskChannel oldDialingChannel;"], [544, "        synchronized(this.dialingChannels) {"], [545, "          if (this.dialingChannels.isEmpty()) {"], [546, "              oldDialingChannel = null;"], [547, "              this.dialingChannels.add(dialingChannel);"], [548, "          } else {"], [549, "            oldDialingChannel = this.dialingChannels.get(0);"], [550, "            this.dialingChannels.set(0, dialingChannel);"], [551, "          }"], [552, "        }"], [561, "        synchronized(linkedChannels) {"], [562, "          if (linkedChannels.isEmpty()) return null;"], [563, "          return linkedChannels.get(0);"], [564, "        }"], [592, "        final AsteriskChannel oldLinkedChannel;"], [593, "        synchronized(this.linkedChannels) {"], [594, "          if (this.linkedChannels.isEmpty()) {"], [595, "              oldLinkedChannel = null;"], [596, "              this.linkedChannels.add(linkedChannel);"], [597, "          }"], [598, "          else  {"], [599, "              oldLinkedChannel = this.linkedChannels.get(0);"], [600, "              this.linkedChannels.set(0, linkedChannel);"], [601, "          }"], [602, "        }"], [603, ""], [617, "        final AsteriskChannel oldLinkedChannel;"], [618, ""], [619, "        synchronized(this.linkedChannels) {"], [620, "          if (this.linkedChannels.isEmpty()) {"], [621, "              oldLinkedChannel = null;"], [622, "          }"], [623, "          else  {"], [624, "              oldLinkedChannel = this.linkedChannels.get(0);"], [625, "          }"], [626, "          linkedChannels.clear();"], [627, "        }"], [628, ""], [647, ""], [722, "        if (linkedChannels.isEmpty())"], [728, "            response = server.sendAction(new RedirectAction(name, linkedChannels.get(0).getName(), context, exten, priority,"], [979, "        final List <AsteriskChannel> dialedChannels;"], [980, "        final List <AsteriskChannel> dialingChannel;"], [981, "        final List <AsteriskChannel> linkedChannel;"], [993, "            dialedChannels = getDialedChannels();"], [994, "            dialingChannel = this.dialingChannels;"], [995, "            linkedChannel = this.linkedChannels;"], [997, "        if (dialedChannels.isEmpty())"], [1004, "            synchronized (dialedChannels)"], [1006, "                for (AsteriskChannel dialedChannel:dialedChannels) {"], [1007, "                  sb.append(\"[id='\").append(dialedChannel.getId()).append(\"',\");"], [1008, "                  sb.append(\"name='\").append(dialedChannel.getName()).append(\"'],\");"], [1009, "                }"], [1010, "                sb.append(\"],\");"], [1013, "        if (dialingChannel.isEmpty())"], [1020, "            sb.append(\"id='\").append(dialingChannel.get(0).getId()).append(\"',\");"], [1021, "            sb.append(\"name='\").append(dialingChannel.get(0).getName()).append(\"'],\");"], [1023, "        if (linkedChannel.isEmpty())"], [1032, "                sb.append(\"id='\").append(linkedChannel.get(0).getId()).append(\"',\");"], [1033, "                sb.append(\"name='\").append(linkedChannel.get(0).getName()).append(\"']\");"]], "deleted": [[104, "    private AsteriskChannel dialedChannel;"], [106, "    private AsteriskChannel dialingChannel;"], [109, "     * If this channel is bridged to another channel, the linkedChannel contains"], [110, "     * the channel this channel is bridged with."], [112, "    private AsteriskChannel linkedChannel;"], [474, "    public AsteriskChannel getDialedChannel()"], [476, "        return dialedChannel;"], [493, "        final AsteriskChannel oldDialedChannel = this.dialedChannel;"], [501, "        this.dialedChannel = dialedChannel;"], [506, ""], [509, "        return dialingChannel;"], [514, "        final AsteriskChannel oldDialingChannel = this.dialingChannel;"], [516, "        this.dialingChannel = dialingChannel;"], [524, "        return linkedChannel;"], [552, "        final AsteriskChannel oldLinkedChannel = this.linkedChannel;"], [560, "        this.linkedChannel = linkedChannel;"], [567, "        final AsteriskChannel oldLinkedChannel = this.linkedChannel;"], [586, "        this.linkedChannel = null;"], [661, "        if (linkedChannel == null)"], [667, "            response = server.sendAction(new RedirectAction(name, linkedChannel.getName(), context, exten, priority,"], [918, "        final AsteriskChannel dialedChannel;"], [919, "        final AsteriskChannel dialingChannel;"], [920, "        final AsteriskChannel linkedChannel;"], [932, "            dialedChannel = this.dialedChannel;"], [933, "            dialingChannel = this.dialingChannel;"], [934, "            linkedChannel = this.linkedChannel;"], [936, "        if (dialedChannel == null)"], [943, "            synchronized (dialedChannel)"], [945, "                sb.append(\"id='\").append(dialedChannel.getId()).append(\"',\");"], [946, "                sb.append(\"name='\").append(dialedChannel.getName()).append(\"'],\");"], [949, "        if (dialingChannel == null)"], [956, "            synchronized (dialingChannel)"], [957, "            {"], [958, "                sb.append(\"id='\").append(dialingChannel.getId()).append(\"',\");"], [959, "                sb.append(\"name='\").append(dialingChannel.getName()).append(\"'],\");"], [960, "            }"], [962, "        if (linkedChannel == null)"], [971, "                sb.append(\"id='\").append(linkedChannel.getId()).append(\"',\");"], [972, "                sb.append(\"name='\").append(linkedChannel.getName()).append(\"']\");"]]}, "num_lines_added": 100, "num_lines_removed": 39}