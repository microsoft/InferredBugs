{"hash": "bee072c93e4a1d438631a8d661651fc199fb63f6", "message": "Removing pre JoinProcessor in window joins", "file_num_lines": 129, "diff_parsed": {"added": [[49, "    public JoinProcessor(boolean leftJoinProcessor, boolean outerJoinProcessor, int matchingStreamIndex) {"], [74, "                    ComplexEvent.Type eventType = streamEvent.getType();"], [75, "                    if (eventType == ComplexEvent.Type.TIMER || eventType == ComplexEvent.Type.RESET) {"], [83, "                            returnEventChunk.add(joinEventBuilder(foundStreamEvent, streamEvent, eventType));"], [85, "                            returnEventChunk.add(joinEventBuilder(streamEvent, foundStreamEvent, eventType));"], [90, "                                returnEventChunk.add(joinEventBuilder(foundStreamEvent, streamEvent, eventType));"], [92, "                                returnEventChunk.add(joinEventBuilder(streamEvent, foundStreamEvent, eventType));"], [158, "        JoinProcessor joinProcessor = new JoinProcessor(leftJoinProcessor, outerJoinProcessor, matchingStreamIndex);"], [189, "    public StateEvent joinEventBuilder(StreamEvent leftStream, StreamEvent rightStream, ComplexEvent.Type type) {"], [193, "        returnEvent.setType(type);"]], "deleted": [[39, "    private boolean preJoinProcessor = false;"], [50, "    public JoinProcessor(boolean leftJoinProcessor, boolean preJoinProcessor, boolean outerJoinProcessor, int matchingStreamIndex) {"], [52, "        this.preJoinProcessor = preJoinProcessor;"], [76, "                    if (streamEvent.getType() == ComplexEvent.Type.TIMER) {"], [77, "                        if (preJoinProcessor) {"], [78, "                            complexEventChunk.add(streamEvent);"], [79, "                            nextProcessor.process(complexEventChunk);"], [80, "                            complexEventChunk.clear();"], [81, "                        }"], [82, "                        continue;"], [83, "                    } else if (streamEvent.getType() == ComplexEvent.Type.CURRENT) {"], [84, "                        if (!preJoinProcessor) {"], [85, "                            continue;"], [86, "                        }"], [87, "                    } else if (streamEvent.getType() == ComplexEvent.Type.EXPIRED) {"], [88, "                        if (preJoinProcessor) {"], [89, "                            continue;"], [90, "                        }"], [91, "                    } else if (streamEvent.getType() == ComplexEvent.Type.RESET) {"], [99, "                            returnEventChunk.add(joinEventBuilder(foundStreamEvent, streamEvent));"], [101, "                            returnEventChunk.add(joinEventBuilder(streamEvent, foundStreamEvent));"], [106, "                                returnEventChunk.add(joinEventBuilder(foundStreamEvent, streamEvent));"], [108, "                                returnEventChunk.add(joinEventBuilder(streamEvent, foundStreamEvent));"], [113, "                    if (preJoinProcessor) {"], [114, "                        complexEventChunk.add(streamEvent);"], [115, "                        nextProcessor.process(complexEventChunk);"], [116, "                        complexEventChunk.clear();"], [117, "                    }"], [127, "        } else {"], [128, "            if (preJoinProcessor) {"], [129, "                joinLock.lock();"], [130, "                try {"], [131, "                    nextProcessor.process(complexEventChunk);"], [132, "                } finally {"], [133, "                    joinLock.unlock();"], [134, "                }"], [135, "            }"], [188, "        JoinProcessor joinProcessor = new JoinProcessor(leftJoinProcessor, preJoinProcessor, outerJoinProcessor, matchingStreamIndex);"], [219, "    public StateEvent joinEventBuilder(StreamEvent leftStream, StreamEvent rightStream) {"], [223, "        if (preJoinProcessor) {"], [224, "            returnEvent.setType(ComplexEvent.Type.CURRENT);"], [225, "        } else {"], [226, "            returnEvent.setType(ComplexEvent.Type.EXPIRED);"], [227, "        }"]]}, "num_lines_added": 10, "num_lines_removed": 44}