{"hash": "fcacdf869b789a6546298c49271496d142a76d98", "message": "fix a bug in pass through snapshot scenario, improving test cases and added a common method to clone events in rate limiters.", "file_num_lines": 84, "diff_parsed": {"added": [[24, "import org.wso2.siddhi.core.event.stream.StreamEvent;"], [25, "import org.wso2.siddhi.core.event.stream.StreamEventCloner;"], [38, "    private ComplexEvent lastEvent;"], [73, "                lastEvent = complexEvent;"], [101, "        return new Object[]{eventChunk};"], [107, "        //endOfChunk = (Boolean) state[1];"], [111, "        if (lastEvent != null) {"], [112, "            ComplexEventChunk<ComplexEvent> snapshotChunk = new ComplexEventChunk<ComplexEvent>();"], [113, "            snapshotChunk.add(cloneComplexEvent(lastEvent));"], [114, "            sendToCallBacks(snapshotChunk);"], [115, "        }"]], "deleted": [[36, "    private boolean endOfChunk = false;"], [60, "            } else {"], [61, "                endOfChunk = true;"], [72, "            if (endOfChunk) {"], [73, "                eventChunk.clear();"], [74, "                endOfChunk = false;"], [75, "            }"], [77, "                eventChunk.add(complexEvent);"], [105, "        return new Object[]{eventChunk, endOfChunk};"], [111, "        endOfChunk = (Boolean) state[1];"], [115, "        eventChunk.reset();"], [116, "        sendToCallBacks(eventChunk);"]]}, "num_lines_added": 11, "num_lines_removed": 12}