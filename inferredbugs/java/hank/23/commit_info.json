{"hash": "8bc92437d0748937755e11a21fbaa8d9b136a1b8", "message": "Use the standard input of the mail process instead of a temporary file in\nEmailSummaryNotifier.", "file_num_lines": 79, "diff_parsed": {"added": [[22, "import java.io.OutputStreamWriter;"], [84, "    } catch (Exception e) {"], [85, "      throw new RuntimeException(\"Exception while sending email notification.\", e);"], [89, "  private void sendEmails(Set<String> emailTargets, String body) throws IOException, InterruptedException {"], [92, "      String[] command = {\"/bin/mail\", \"-s\", \"Hank-Notification\", emailTarget};"], [93, "      Process process = Runtime.getRuntime().exec(command);"], [94, "      OutputStreamWriter writer = new OutputStreamWriter(process.getOutputStream());"], [95, "      writer.write(body);"], [96, "      writer.close();"], [97, "      process.getOutputStream().close();"], [98, "      process.waitFor();"]], "deleted": [[21, "import java.io.BufferedWriter;"], [22, "import java.io.File;"], [23, "import java.io.FileWriter;"], [46, "            LOG.info(notifications.size() + \" notifications in queue.\");"], [87, "    } catch (IOException e) {"], [88, "      throw new RuntimeException(e);"], [92, "  private void sendEmails(Set<String> emailTargets, String body) throws IOException {"], [93, "    File temporaryEmailBody = File.createTempFile(\"_tmp_\" + getClass().getSimpleName(), null);"], [94, "    BufferedWriter writer = new BufferedWriter(new FileWriter(temporaryEmailBody, false));"], [95, "    writer.write(body);"], [96, ""], [98, ""], [100, "      Runtime.getRuntime().exec(\"cat \" + temporaryEmailBody.getAbsolutePath()"], [101, "          + \" | mail -s 'Hank Notification' \" + emailTarget);"], [102, "    }"], [103, ""], [104, "    if (!temporaryEmailBody.delete()) {"], [105, "      throw new IOException(\"Could not delete \" + temporaryEmailBody.getAbsolutePath());"]]}, "num_lines_added": 11, "num_lines_removed": 18}