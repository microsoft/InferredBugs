{"hash": "9994104a8038f6e7ebc1116d532880785cdb6b93", "message": "Use JavaX mail to send notification emails", "file_num_lines": 99, "diff_parsed": {"added": [[22, "import javax.mail.Message;"], [23, "import javax.mail.MessagingException;"], [24, "import javax.mail.Session;"], [25, "import javax.mail.Transport;"], [26, "import javax.mail.internet.InternetAddress;"], [27, "import javax.mail.internet.MimeMessage;"], [31, "import java.util.Properties;"], [41, "  private final Properties emailSessionProperties = new Properties();"], [49, "                              String smtpHost,"], [53, "    this.emailSessionProperties.put(\"mail.smtp.host\", smtpHost);"], [108, "    Session session = Session.getDefaultInstance(emailSessionProperties);"], [109, "    Message message = new MimeMessage(session);"], [110, "    try {"], [111, "      message.setSubject(\"Hank: \" + name);"], [112, "      for (String emailTarget : emailTargets) {"], [113, "        message.addRecipient(Message.RecipientType.TO, new InternetAddress(emailTarget));"], [114, "      }"], [115, "      message.setText(body);"], [116, "      Transport.send(message);"], [117, "    } catch (MessagingException e) {"], [118, "      throw new RuntimeException(\"Failed to send notification email.\", e);"]], "deleted": [[23, "import java.io.OutputStreamWriter;"], [99, "    for (String emailTarget : emailTargets) {"], [100, "      String[] command = {\"/bin/mail\", \"-s\", \"Hank: \" + name, emailTarget};"], [101, "      Process process = Runtime.getRuntime().exec(command);"], [102, "      OutputStreamWriter writer = new OutputStreamWriter(process.getOutputStream());"], [103, "      writer.write(body);"], [104, "      writer.close();"], [105, "      process.getOutputStream().close();"], [106, "      process.waitFor();"]]}, "num_lines_added": 21, "num_lines_removed": 9}